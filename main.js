/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => YouTubeProcessorPlugin
});
module.exports = __toCommonJS(main_exports);

// src/main.ts
var import_obsidian7 = require("obsidian");

// src/utils/conflict-prevention.ts
var ConflictPrevention = class {
  /**
   * Check if another plugin might be conflicting
   */
  static checkForPotentialConflicts() {
    const warnings = [];
    const suspiciousElements = [
      'div[data-plugin="web-clipper"]',
      ".web-clipper-modal",
      ".clipper-button",
      '[id*="clipper"]',
      '[class*="clip"]'
    ];
    suspiciousElements.forEach((selector) => {
      const elements = document.querySelectorAll(selector);
      if (elements.length > 0) {
        warnings.push(`Detected potential plugin conflict: ${selector}`);
      }
    });
    return warnings;
  }
  /**
   * Add conflict prevention attributes to an element
   */
  static markElement(element, type) {
    element.setAttribute("data-plugin", this.PLUGIN_ID);
    element.setAttribute("data-ytc-type", type);
    element.addClass(`${this.CSS_PREFIX}-${type}`);
  }
  /**
   * Remove conflict prevention attributes
   */
  static unmarkElement(element) {
    element.removeAttribute("data-plugin");
    element.removeAttribute("data-ytc-type");
    const classes = Array.from(element.classList);
    classes.forEach((className) => {
      if (className.startsWith(this.CSS_PREFIX)) {
        element.removeClass(className);
      }
    });
  }
  /**
   * Create a namespaced ID to prevent conflicts
   */
  static createUniqueId(base) {
    return `${this.CSS_PREFIX}-${base}-${Date.now()}`;
  }
  /**
   * Clean up all plugin elements from DOM
   */
  static cleanupAllElements() {
    const elements = document.querySelectorAll(`[data-plugin="${this.PLUGIN_ID}"]`);
    elements.forEach((element) => {
      if (element instanceof HTMLElement) {
        this.unmarkElement(element);
      }
    });
  }
  /**
   * Get safe storage key with namespace
   */
  static getStorageKey(key) {
    return `${this.PLUGIN_ID}-${key}`;
  }
  /**
   * Log plugin activity with namespace
   */
  static log(message, level = "info") {
    const timestamp = new Date().toISOString();
    const logMessage = `[${this.PLUGIN_ID}] ${timestamp} - ${message}`;
    switch (level) {
      case "warn":
        console.warn(logMessage);
        break;
      case "error":
        console.error(logMessage);
        break;
      default:
        console.log(logMessage);
    }
  }
  /**
   * Check if plugin is safe to operate
   */
  static isSafeToOperate() {
    const conflicts = this.checkForPotentialConflicts();
    if (conflicts.length > 0) {
      this.log(`Potential conflicts detected: ${conflicts.join(", ")}`, "warn");
      return false;
    }
    return true;
  }
  /**
   * Wrap async operations with conflict checking
   */
  static async safeOperation(operation, operationName) {
    if (!this.isSafeToOperate()) {
      this.log(`Skipping ${operationName} due to potential conflicts`, "warn");
      return null;
    }
    try {
      this.log(`Starting ${operationName}`);
      const result = await operation();
      this.log(`Completed ${operationName}`);
      return result;
    } catch (error) {
      this.log(`Error in ${operationName}: ${error}`, "error");
      throw error;
    }
  }
};
ConflictPrevention.PLUGIN_ID = "youtube-clipper";
ConflictPrevention.CSS_PREFIX = "ytc";

// src/constants/messages.ts
var MESSAGES = {
  PROCESSING: "Processing YouTube video...",
  SUCCESS: (title) => `Successfully processed: ${title}`,
  OPENED_FILE: (filename) => `Opened: ${filename}`,
  ERRORS: {
    INVALID_URL: "Invalid YouTube URL. Please provide a valid YouTube video URL (e.g., https://www.youtube.com/watch?v=VIDEO_ID)",
    MISSING_API_KEYS: "No valid Gemini or Groq API key configured. Please set one in plugin settings.",
    GEMINI_INVALID_KEY: "Gemini API key is invalid or missing. Please check your key.",
    GROQ_MODEL_NOT_FOUND: "Groq API error: Model not found or you do not have access. Please check your API key and model name.",
    FETCH_VIDEO_DATA: (status) => `Failed to fetch video metadata: ${status}`,
    SAVE_FILE: (message) => `Failed to save file: ${message}`,
    AI_PROCESSING: (message) => `AI processing failed: ${message}`,
    FILE_NOT_EXISTS: "File no longer exists",
    COULD_NOT_OPEN: (message) => `Could not open file: ${message}`,
    ENTER_URL: "Please enter a YouTube URL",
    VIDEO_ID_EXTRACTION: "Could not extract video ID from URL. Please check the URL format.",
    NETWORK_ERROR: "Network error occurred. Please check your internet connection and try again."
  },
  WARNINGS: {
    CORS_RESTRICTIONS: "Description not available due to CORS restrictions",
    EXTRACTION_FAILED: "Description extraction failed",
    AUTO_EXTRACTION: "Video description could not be extracted automatically."
  },
  MODALS: {
    YOUTUBE_PROCESSED: "YouTube Video Processed",
    CONFIRM_OPEN: (filename) => `Successfully processed YouTube video and saved as "${filename}". Would you like to open the note now?`,
    CLOSE_CONFIRMATION: "Close without opening the note?",
    PROCESS_VIDEO: "Process YouTube Video",
    YES_OPEN: "Yes, open note",
    NO_THANKS: "No, thanks",
    CANCEL: "Cancel",
    PROCESS: "Process"
  },
  PLACEHOLDERS: {
    YOUTUBE_URL: "https://www.youtube.com/watch?v=...",
    GEMINI_KEY: "AIza...",
    GROQ_KEY: "gsk_...",
    OUTPUT_PATH: "YouTube/Processed Videos"
  }
};

// src/utils/validation.ts
var ValidationUtils = class {
  /**
   * Clean and normalize YouTube URL
   */
  static cleanYouTubeUrl(url) {
    if (!url || typeof url !== "string") {
      return "";
    }
    let cleanUrl = url.trim();
    cleanUrl = cleanUrl.replace(/[\u200B-\u200D\uFEFF]/g, "");
    if (!cleanUrl.startsWith("http://") && !cleanUrl.startsWith("https://")) {
      cleanUrl = "https://" + cleanUrl;
    }
    if (cleanUrl.startsWith("http://youtube.com") || cleanUrl.startsWith("http://www.youtube.com")) {
      cleanUrl = cleanUrl.replace("http://", "https://");
    }
    return cleanUrl;
  }
  /**
   * Extract YouTube video ID from URL (memoized for performance)
   * Enhanced extraction with better error handling
   */
  static extractVideoId(url) {
    if (!url || typeof url !== "string")
      return null;
    if (this.URL_CACHE.has(url)) {
      return this.URL_CACHE.get(url);
    }
    const cleanUrl = this.cleanYouTubeUrl(url);
    let result = null;
    let match = cleanUrl.match(this.URL_PATTERNS[0]);
    if ((match == null ? void 0 : match[1]) && this.VIDEO_ID_REGEX.test(match[1])) {
      result = match[1];
    } else {
      for (let i = 1; i < this.URL_PATTERNS.length && !result; i++) {
        match = cleanUrl.match(this.URL_PATTERNS[i]);
        if ((match == null ? void 0 : match[1]) && this.VIDEO_ID_REGEX.test(match[1])) {
          result = match[1];
        }
      }
    }
    if (this.URL_CACHE.size > 100) {
      this.URL_CACHE.clear();
    }
    this.URL_CACHE.set(url, result);
    if (!result) {
      console.warn("Failed to extract video ID from URL:", url);
    }
    return result;
  }
  /**
   * Validate YouTube URL format
   */
  static isValidYouTubeUrl(url) {
    return this.extractVideoId(url) !== null;
  }
  /**
   * Sanitize filename for file system compatibility
   */
  static sanitizeFilename(filename, maxLength = 100) {
    return filename.replace(/[<>:"/\\|?*]/g, "").replace(/\s+/g, " ").trim().substring(0, maxLength);
  }
  /**
   * Validate API key format
   */
  static isValidAPIKey(key, provider) {
    if (!key || typeof key !== "string") {
      return false;
    }
    switch (provider) {
      case "gemini":
        return key.startsWith("AIza") && key.length > 10;
      case "groq":
        return key.startsWith("gsk_") && key.length > 10;
      default:
        return false;
    }
  }
  /**
   * Validate settings configuration
   */
  static validateSettings(settings) {
    const errors = [];
    const usingEnv = Boolean(settings.useEnvironmentVariables);
    const hasDirectKey = this.isNonEmptyString(settings.geminiApiKey) || this.isNonEmptyString(settings.groqApiKey);
    if (!hasDirectKey && !usingEnv) {
      errors.push(MESSAGES.ERRORS.MISSING_API_KEYS);
    }
    if (this.isNonEmptyString(settings.geminiApiKey) && !this.isValidAPIKey(settings.geminiApiKey, "gemini")) {
      errors.push("Invalid Gemini API key format");
    }
    if (this.isNonEmptyString(settings.groqApiKey) && !this.isValidAPIKey(settings.groqApiKey, "groq")) {
      errors.push("Invalid Groq API key format");
    }
    if (usingEnv && !this.isNonEmptyString(settings.environmentPrefix)) {
      errors.push("Environment variable prefix is required when using environment variables");
    }
    if (!settings.outputPath || typeof settings.outputPath !== "string") {
      errors.push("Output path is required");
    }
    return {
      isValid: errors.length === 0,
      errors
    };
  }
  /**
   * Validate file path
   */
  static isValidPath(path) {
    return typeof path === "string" && path.trim().length > 0;
  }
  /**
   * Validate that a string is not empty
   */
  static isNonEmptyString(value) {
    return typeof value === "string" && value.trim().length > 0;
  }
  /**
   * Truncate text to specified length with ellipsis
   */
  static truncateText(text, maxLength) {
    if (text.length <= maxLength) {
      return text;
    }
    return text.substring(0, maxLength - 3) + "...";
  }
  /**
   * Clean HTML entities and escape sequences from text
   */
  static cleanText(text) {
    return text.replace(/\\n/g, "\n").replace(/\\"/g, '"').replace(/\\'/g, "'").replace(
      /\\u([0-9a-fA-F]{4})/g,
      (match, code) => String.fromCharCode(parseInt(code, 16))
    );
  }
};
/**
 * YouTube URL patterns for validation (ordered by frequency for performance)
 * Enhanced patterns to handle various YouTube URL formats
 */
ValidationUtils.URL_PATTERNS = [
  // Standard youtube.com/watch?v= format (most common)
  /(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})(?:&.*)?$/,
  // youtu.be short format (second most common)
  /(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]{11})(?:\?.*)?$/,
  // youtube.com/embed format
  /(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})(?:\?.*)?$/,
  // youtube.com/v format
  /(?:https?:\/\/)?(?:www\.)?youtube\.com\/v\/([a-zA-Z0-9_-]{11})(?:\?.*)?$/,
  // Mobile youtube.com format
  /(?:https?:\/\/)?(?:m\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})(?:&.*)?$/
];
// Memoized regex for video ID validation (hot path optimization)
ValidationUtils.VIDEO_ID_REGEX = /^[a-zA-Z0-9_-]{11}$/;
ValidationUtils.URL_CACHE = /* @__PURE__ */ new Map();

// src/utils/error-handler.ts
var import_obsidian = require("obsidian");
var ErrorHandler = class {
  /**
   * Handle errors with consistent logging and user feedback
   */
  static handle(error, context, showNotice = true) {
    const errorMessage = `${context}: ${error.message}`;
    console.error(errorMessage, error);
    if (showNotice) {
      new import_obsidian.Notice(`Error: ${error.message}`);
    }
  }
  /**
   * Execute an operation with automatic error handling
   */
  static async withErrorHandling(operation, context, showNotice = true) {
    try {
      return await operation();
    } catch (error) {
      this.handle(error, context, showNotice);
      return null;
    }
  }
  /**
   * Execute a synchronous operation with error handling
   */
  static withSyncErrorHandling(operation, context, showNotice = true) {
    try {
      return operation();
    } catch (error) {
      this.handle(error, context, showNotice);
      return null;
    }
  }
  /**
   * Create a standardized error for API responses
   */
  static createAPIError(provider, status, statusText, details) {
    const message = `${provider} API error: ${status} ${statusText}${details ? `. ${details}` : ""}`;
    return new Error(message);
  }
  /**
   * Handle API response errors with consistent format
   */
  static async handleAPIError(response, provider, fallbackMessage) {
    var _a;
    let errorDetails = fallbackMessage || "";
    try {
      const errorData = await response.json();
      errorDetails = ((_a = errorData.error) == null ? void 0 : _a.message) || errorData.message || fallbackMessage || "";
    } catch (e) {
    }
    throw this.createAPIError(provider, response.status, response.statusText, errorDetails);
  }
  /**
   * Validate required configuration and throw descriptive errors
   */
  static validateConfiguration(config, requiredFields) {
    const missing = requiredFields.filter((field) => !config[field]);
    if (missing.length > 0) {
      throw new Error(`Missing required configuration: ${missing.join(", ")}`);
    }
  }
  /**
   * Create a user-friendly error message for common scenarios
   */
  static createUserFriendlyError(error, operation) {
    const message = `Failed to ${operation}: ${error.message}`;
    return new Error(message);
  }
  // Instance methods implementing interface
  handle(error, context, showNotice = true) {
    ErrorHandler.handle(error, context, showNotice);
  }
  async withErrorHandling(operation, context) {
    return ErrorHandler.withErrorHandling(operation, context);
  }
};

// src/components/modals/save-confirmation-modal.ts
var import_obsidian2 = require("obsidian");
var SaveConfirmationModal = class extends import_obsidian2.Modal {
  constructor(app, file, onConfirm) {
    super(app);
    this.file = file;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    try {
      contentEl.createEl("h2", { text: "Note created successfully. Open now?" });
      const buttonContainer = contentEl.createDiv("save-confirmation-buttons");
      new import_obsidian2.Setting(buttonContainer).addButton((btn) => btn.setButtonText("Open Note").setCta().onClick(() => {
        this.close();
        this.onConfirm(true);
      })).addButton((btn) => btn.setButtonText("Dismiss").onClick(() => {
        this.close();
        this.onConfirm(false);
      }));
      setTimeout(() => {
        const openButton = buttonContainer.querySelector("button");
        if (openButton) {
          openButton.focus();
        }
      }, 100);
    } catch (error) {
      console.error("[SaveConfirmationModal] Error in onOpen:", error);
      contentEl.createEl("h2", { text: "File Saved" });
      contentEl.createEl("p", { text: `File "${this.file.name}" has been saved successfully.` });
      contentEl.createEl("button", { text: "OK" }).onclick = () => this.close();
    }
  }
  /**
   * Get human-readable file size
   */
  getFileSize() {
    try {
      const stat = this.app.vault.adapter.stat(this.file.path);
      if (stat && typeof stat === "object" && "size" in stat) {
        const bytes = stat.size;
        if (bytes < 1024)
          return `${bytes} bytes`;
        if (bytes < 1024 * 1024)
          return `${(bytes / 1024).toFixed(1)} KB`;
        return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
      }
    } catch (error) {
    }
    return "";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  /**
   * Add custom styles for the modal
   */
  addStyles() {
    var _a;
    const { contentEl } = this;
    contentEl.addClass("ytp-save-confirmation-modal");
    const style = document.createElement("style");
    style.textContent = `
            .ytp-save-confirmation-modal {
                min-width: 450px;
                max-width: 650px;
            }
            
            .save-confirmation-message {
                margin: 20px 0 30px 0;
                text-align: left;
                line-height: 1.6;
            }
            
            .save-confirmation-filename {
                font-weight: bold;
                font-size: 1.1em;
                margin-bottom: 15px;
                color: var(--text-accent);
                text-align: center;
            }
            
            .save-confirmation-location-container,
            .save-confirmation-size-container {
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            .save-confirmation-location {
                font-family: var(--font-monospace);
                background: var(--background-secondary);
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 0.9em;
                word-break: break-all;
                color: var(--text-muted);
                flex: 1;
            }
            
            .save-confirmation-size {
                font-family: var(--font-monospace);
                background: var(--background-modifier-success);
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 0.9em;
                color: var(--text-on-accent);
            }
            
            .save-confirmation-buttons {
                text-align: center;
                margin-top: 20px;
                display: flex;
                justify-content: center;
                gap: 15px;
            }
            
            .save-confirmation-buttons .setting-item {
                border: none;
                padding: 0;
                margin: 0;
                display: flex;
                gap: 10px;
            }
            
            .save-confirmation-buttons button {
                min-width: 100px;
                padding: 8px 20px;
                font-size: 1em;
            }
            
            .save-confirmation-buttons button:first-child {
                /* Open File button - primary action */
                background-color: var(--interactive-accent);
                color: var(--text-on-accent);
            }
            
            .save-confirmation-buttons button:last-child {
                /* OK button - secondary action */
                background-color: var(--background-modifier-border);
                color: var(--text-normal);
            }
        `;
    document.head.appendChild(style);
    (_a = this.modalEl) == null ? void 0 : _a.setAttribute("data-style-id", "ytp-save-confirmation-style");
  }
};

// src/components/modals/youtube-url-modal.ts
var import_obsidian4 = require("obsidian");

// src/components/modals/base-modal.ts
var import_obsidian3 = require("obsidian");

// src/constants/styles.ts
var MODAL_STYLES = {
  zIndex: "10000",
  display: "flex",
  header: {
    marginBottom: "15px",
    color: "var(--text-accent)"
  },
  message: {
    marginBottom: "20px",
    lineHeight: "1.5"
  },
  buttonContainer: {
    marginTop: "20px",
    display: "flex",
    gap: "10px",
    justifyContent: "flex-end"
  },
  button: {
    padding: "8px 16px",
    minWidth: "100px"
  }
};
var INPUT_STYLES = {
  width: "100%",
  marginTop: "8px",
  padding: "8px",
  border: "1px solid var(--background-modifier-border)",
  borderRadius: "4px"
};

// src/utils/dom.ts
var DOMUtils = class {
  /**
   * Apply styles to an HTML element
   */
  static applyStyles(element, styles) {
    Object.assign(element.style, styles);
  }
  /**
   * Create a standardized button container
   */
  static createButtonContainer(parent) {
    const container = parent.createDiv();
    this.applyStyles(container, MODAL_STYLES.buttonContainer);
    return container;
  }
  /**
   * Create a styled button with consistent appearance
   */
  static createStyledButton(container, text, isPrimary = false, onClick) {
    const button = container.createEl("button", { text });
    if (isPrimary) {
      button.classList.add("mod-cta");
    }
    this.applyStyles(button, MODAL_STYLES.button);
    if (onClick) {
      button.addEventListener("click", onClick);
    }
    return button;
  }
  /**
   * Create a styled input field
   */
  static createStyledInput(container, type, placeholder, value = "") {
    const input = container.createEl("input", {
      type,
      placeholder,
      value
    });
    this.applyStyles(input, INPUT_STYLES);
    return input;
  }
  /**
   * Set up modal base styling for consistency
   */
  static setupModalStyling(modalEl) {
    this.applyStyles(modalEl, {
      zIndex: MODAL_STYLES.zIndex,
      display: MODAL_STYLES.display
    });
  }
  /**
   * Create a header element with consistent styling
   */
  static createModalHeader(parent, text) {
    const header = parent.createEl("h2", { text });
    this.applyStyles(header, MODAL_STYLES.header);
    return header;
  }
  /**
   * Create a message paragraph with consistent styling
   */
  static createModalMessage(parent, text) {
    const message = parent.createEl("p");
    message.setText(text);
    this.applyStyles(message, MODAL_STYLES.message);
    return message;
  }
  /**
   * Set up keyboard event handlers for modals
   */
  static setupModalKeyHandlers(element, onEnter, onEscape) {
    element.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        e.stopPropagation();
        onEnter();
      }
      if (e.key === "Escape" && onEscape) {
        e.preventDefault();
        e.stopPropagation();
        onEscape();
      }
    });
  }
  // Instance methods implementing interface
  applyStyles(element, styles) {
    DOMUtils.applyStyles(element, styles);
  }
  createButtonContainer(parent) {
    return DOMUtils.createButtonContainer(parent);
  }
  createStyledButton(container, text, isPrimary = false, onClick) {
    return DOMUtils.createStyledButton(container, text, isPrimary, onClick);
  }
};

// src/constants/api.ts
var API_ENDPOINTS = {
  GEMINI: "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent",
  GROQ: "https://api.groq.com/openai/v1/chat/completions",
  YOUTUBE_OEMBED: "https://www.youtube.com/oembed",
  CORS_PROXY: "https://api.allorigins.win/raw"
};
var AI_MODELS = {
  GEMINI: "gemini-2.5-pro",
  // Set Gemini model to gemini-2.5-pro
  GROQ: "llama-3.3-70b-versatile"
};
var API_LIMITS = {
  MAX_TOKENS: 2e3,
  TEMPERATURE: 0.7,
  DESCRIPTION_MAX_LENGTH: 1e3,
  TITLE_MAX_LENGTH: 100
};
var TIMEOUTS = {
  FILE_CREATION_WAIT: 300,
  MODAL_DELAY: 100,
  FALLBACK_MODAL_CHECK: 500,
  FOCUS_DELAY: 150,
  REPAINT_DELAY: 50
};

// src/components/modals/base-modal.ts
var MODAL_CSS_CLASSES = {
  modal: "ytc-modal",
  header: "ytc-modal-header",
  content: "ytc-modal-content",
  button: "ytc-modal-button",
  input: "ytc-modal-input"
};
var BaseModal = class extends import_obsidian3.Modal {
  constructor(app) {
    super(app);
    this.events = {};
    this.isDisposed = false;
    this.setupModalStyling();
    this.setupConflictPrevention();
  }
  /**
   * Set up base modal styling for consistency
   */
  setupModalStyling() {
    DOMUtils.setupModalStyling(this.modalEl);
    this.modalEl.addClass(MODAL_CSS_CLASSES.modal);
    this.contentEl.addClass(MODAL_CSS_CLASSES.content);
  }
  /**
   * Set up conflict prevention measures
   */
  setupConflictPrevention() {
    this.modalEl.setAttribute("data-plugin", "youtube-clipper");
    this.modalEl.style.zIndex = "9999";
  }
  /**
   * Create standardized modal header with conflict prevention
   */
  createHeader(text) {
    const header = DOMUtils.createModalHeader(this.contentEl, text);
    header.addClass(MODAL_CSS_CLASSES.header);
    return header;
  }
  /**
   * Create standardized modal message
   */
  createMessage(text) {
    return DOMUtils.createModalMessage(this.contentEl, text);
  }
  /**
   * Create standardized button container
   */
  createButtonContainer() {
    return DOMUtils.createButtonContainer(this.contentEl);
  }
  /**
  * Create standardized button with conflict prevention
  */
  createButton(container, text, isPrimary = false, onClick) {
    const button = DOMUtils.createStyledButton(container, text, isPrimary, onClick);
    button.addClass(MODAL_CSS_CLASSES.button);
    button.setAttribute("data-plugin", "youtube-clipper");
    return button;
  }
  /**
   * Create standardized input with conflict prevention
   */
  createInput(container, type, placeholder) {
    const input = container.createEl("input", {
      type,
      placeholder
    });
    DOMUtils.applyStyles(input, INPUT_STYLES);
    input.addClass(MODAL_CSS_CLASSES.input);
    input.setAttribute("data-plugin", "youtube-clipper");
    return input;
  }
  /**
   * Set up keyboard event handlers
   */
  setupKeyHandlers(onEnter, onEscape) {
    const wrappedOnEnter = async () => {
      try {
        await onEnter();
      } catch (error) {
        console.error("Enter key handler error:", error);
      }
    };
    const wrappedOnEscape = onEscape ? async () => {
      try {
        await onEscape();
      } catch (error) {
        console.error("Escape key handler error:", error);
      }
    } : void 0;
    DOMUtils.setupModalKeyHandlers(this.contentEl, wrappedOnEnter, wrappedOnEscape);
  }
  /**
   * Focus element with delay for better UX
   */
  focusElement(element, delay = TIMEOUTS.FOCUS_DELAY) {
    setTimeout(() => {
      element.focus();
    }, delay);
  }
  /**
   * Set up event handlers
   */
  setEvents(events) {
    this.events = events;
  }
  /**
   * Show confirmation dialog before closing
   */
  confirmClose(message) {
    return confirm(message);
  }
  /**
   * Force modal visibility (for stubborn modals)
   */
  forceVisible() {
    setTimeout(() => {
      DOMUtils.setupModalStyling(this.modalEl);
    }, TIMEOUTS.REPAINT_DELAY);
  }
  /**
   * Clean up on close with proper disposal
   */
  onClose() {
    if (this.isDisposed) {
      return;
    }
    console.log("[youtube-clipper] Cleaning up modal");
    this.isDisposed = true;
    const { contentEl } = this;
    contentEl.empty();
    this.modalEl.removeClass(MODAL_CSS_CLASSES.modal);
    this.modalEl.removeAttribute("data-plugin");
    console.log("[youtube-clipper] Modal cleanup complete");
  }
};

// src/components/modals/youtube-url-modal.ts
var YouTubeUrlModal = class extends BaseModal {
  constructor(app, options) {
    super(app);
    this.options = options;
    this.url = "";
    this.format = "executive-summary";
    this.fetchInProgress = false;
    this.progressSteps = [];
    this.currentStepIndex = 0;
    this.isProcessing = false;
    this.url = options.initialUrl || "";
  }
  onOpen() {
    this.createModalContent();
    this.setupEventHandlers();
    this.focusUrlInput();
  }
  /**
   * Create modal content
   */
  createModalContent() {
    this.headerEl = this.createHeader(MESSAGES.MODALS.PROCESS_VIDEO);
    this.createUrlInputSection();
    this.createFormatSelectionSection();
    this.createProgressSection();
    this.createActionButtons();
  }
  /**
   * Create URL input section
   */
  createUrlInputSection() {
    const container = this.contentEl.createDiv();
    container.createEl("label", { text: "YouTube URL:" });
    const inputRow = container.createDiv();
    inputRow.style.display = "flex";
    inputRow.style.gap = "8px";
    inputRow.style.alignItems = "center";
    this.urlInput = this.createInput(
      inputRow,
      "url",
      MESSAGES.PLACEHOLDERS.YOUTUBE_URL + " (Press Enter to process)"
    );
    this.urlInput.style.flex = "1";
    this.urlInput.style.transition = "border-color 0.2s ease, box-shadow 0.2s ease";
    this.pasteButton = this.createInlineButton(inputRow, "Paste", () => {
      void this.handlePasteFromClipboard();
    });
    this.clearButton = this.createInlineButton(inputRow, "Clear", () => {
      this.handleClearUrl();
    });
    if (this.options.initialUrl) {
      this.urlInput.value = this.options.initialUrl;
      this.url = this.options.initialUrl;
    }
    this.urlInput.addEventListener("input", (e) => {
      this.url = e.target.value;
      this.updateProcessButtonState();
      this.updateQuickActionsState();
    });
    this.validationMessage = container.createDiv();
    this.validationMessage.style.marginTop = "6px";
    this.validationMessage.style.fontSize = "0.85rem";
    this.validationMessage.style.color = "var(--text-muted)";
    this.setValidationMessage("Paste a YouTube link to begin processing.", "info");
    const preview = container.createDiv();
    preview.style.display = "flex";
    preview.style.gap = "10px";
    preview.style.alignItems = "center";
    preview.style.marginTop = "8px";
    this.thumbnailEl = preview.createEl("img");
    this.thumbnailEl.style.width = "120px";
    this.thumbnailEl.style.height = "68px";
    this.thumbnailEl.style.objectFit = "cover";
    this.thumbnailEl.style.borderRadius = "4px";
    this.thumbnailEl.style.display = "none";
    this.metadataContainer = preview.createDiv();
    this.metadataContainer.style.display = "none";
    this.metadataContainer.style.fontSize = "0.9rem";
    this.metadataContainer.style.color = "var(--text-normal)";
    this.metadataContainer.createDiv({ cls: "yt-preview-title" });
    this.metadataContainer.createDiv({ cls: "yt-preview-channel" });
    this.setUrlInputState("idle");
    this.updateQuickActionsState();
  }
  /**
   * Create format selection section with radio buttons
   */
  createFormatSelectionSection() {
    const container = this.contentEl.createDiv();
    container.createEl("label", { text: "Output Format:" });
    const radioContainer = container.createDiv();
    radioContainer.style.marginTop = "8px";
    radioContainer.style.display = "flex";
    radioContainer.style.gap = "20px";
    const executiveContainer = radioContainer.createDiv();
    executiveContainer.style.display = "flex";
    executiveContainer.style.alignItems = "center";
    executiveContainer.style.gap = "8px";
    const executiveRadio = executiveContainer.createEl("input");
    executiveRadio.type = "radio";
    executiveRadio.name = "outputFormat";
    executiveRadio.value = "executive-summary";
    executiveRadio.id = "executive-radio";
    executiveRadio.checked = this.format === "executive-summary";
    const executiveLabel = executiveContainer.createEl("label");
    executiveLabel.setAttribute("for", "executive-radio");
    executiveLabel.textContent = "Executive";
    executiveLabel.style.cursor = "pointer";
    const tutorialContainer = radioContainer.createDiv();
    tutorialContainer.style.display = "flex";
    tutorialContainer.style.alignItems = "center";
    tutorialContainer.style.gap = "8px";
    const tutorialRadio = tutorialContainer.createEl("input");
    tutorialRadio.type = "radio";
    tutorialRadio.name = "outputFormat";
    tutorialRadio.value = "detailed-guide";
    tutorialRadio.id = "tutorial-radio";
    tutorialRadio.checked = this.format === "detailed-guide";
    const tutorialLabel = tutorialContainer.createEl("label");
    tutorialLabel.setAttribute("for", "tutorial-radio");
    tutorialLabel.textContent = "Tutorial";
    tutorialLabel.style.cursor = "pointer";
    executiveRadio.addEventListener("change", (e) => {
      if (e.target.checked) {
        this.format = "executive-summary";
      }
    });
    tutorialRadio.addEventListener("change", (e) => {
      if (e.target.checked) {
        this.format = "detailed-guide";
      }
    });
  }
  /**
   * Create progress section
   */
  createProgressSection() {
    this.progressContainer = this.contentEl.createDiv();
    this.progressContainer.style.marginTop = "16px";
    this.progressContainer.style.display = "none";
    this.progressText = this.progressContainer.createDiv();
    this.progressText.style.marginBottom = "8px";
    this.progressText.style.fontWeight = "500";
    this.progressText.style.color = "var(--text-accent)";
    this.progressText.textContent = "Processing video...";
    const progressBarContainer = this.progressContainer.createDiv();
    progressBarContainer.style.width = "100%";
    progressBarContainer.style.height = "6px";
    progressBarContainer.style.backgroundColor = "var(--background-modifier-border)";
    progressBarContainer.style.borderRadius = "3px";
    progressBarContainer.style.overflow = "hidden";
    this.progressBar = progressBarContainer.createDiv();
    this.progressBar.style.height = "100%";
    this.progressBar.style.backgroundColor = "var(--text-accent)";
    this.progressBar.style.borderRadius = "3px";
    this.progressBar.style.width = "0%";
    this.progressBar.style.transition = "width 0.3s ease";
    const stepList = this.progressContainer.createEl("ol");
    stepList.style.marginTop = "12px";
    stepList.style.paddingLeft = "20px";
    stepList.style.fontSize = "0.9rem";
    stepList.style.color = "var(--text-normal)";
    const labels = [
      "Validate URL",
      "Fetch video info",
      "Run AI analysis",
      "Save note"
    ];
    this.progressSteps = labels.map((label) => {
      const item = stepList.createEl("li");
      item.style.marginBottom = "4px";
      item.textContent = `\u25CB ${label}`;
      return { label, element: item };
    });
  }
  /**
   * Create action buttons
   */
  createActionButtons() {
    const container = this.createButtonContainer();
    this.createButton(
      container,
      MESSAGES.MODALS.CANCEL,
      false,
      () => this.close()
    );
    this.processButton = this.createButton(
      container,
      MESSAGES.MODALS.PROCESS,
      true,
      () => this.handleProcess()
    );
    this.openButton = this.createButton(
      container,
      "Open Note",
      true,
      () => this.handleOpenFile()
    );
    this.openButton.style.display = "none";
    this.updateProcessButtonState();
  }
  /**
   * Set up event handlers
   */
  setupEventHandlers() {
    this.setupKeyHandlers(
      () => this.handleProcess(),
      () => this.close()
    );
  }
  /**
   * Focus on URL input
   */
  focusUrlInput() {
    if (this.urlInput) {
      this.focusElement(this.urlInput);
    }
  }
  /**
   * Update process button enabled state (optimized with debouncing and memoization)
   */
  updateProcessButtonState() {
    if (!this.processButton)
      return;
    if (this.isProcessing) {
      return;
    }
    const trimmedUrl = this.url.trim();
    if (this.processButton && this.processButton.textContent !== MESSAGES.MODALS.PROCESS && trimmedUrl.length >= 0) {
      this.processButton.textContent = MESSAGES.MODALS.PROCESS;
    }
    if (trimmedUrl === this.lastValidUrl) {
      const isValid = this.lastValidResult;
      this.processButton.disabled = !isValid;
      this.processButton.style.opacity = isValid ? "1" : "0.5";
      if (trimmedUrl.length === 0) {
        this.setValidationMessage("Paste a YouTube link to begin processing.", "info");
        this.setUrlInputState("idle");
      } else {
        this.setValidationMessage(
          isValid ? "Ready to process this video." : "Enter a valid YouTube video URL.",
          isValid ? "success" : "error"
        );
        this.setUrlInputState(isValid ? "valid" : "invalid");
      }
      this.updateQuickActionsState();
      return;
    }
    if (this.validationTimer) {
      clearTimeout(this.validationTimer);
    }
    this.validationTimer = window.setTimeout(() => {
      const isValid = ValidationUtils.isValidYouTubeUrl(trimmedUrl);
      this.lastValidUrl = trimmedUrl;
      this.lastValidResult = isValid;
      this.processButton.disabled = !isValid;
      this.processButton.style.opacity = isValid ? "1" : "0.5";
      if (trimmedUrl.length === 0) {
        this.setValidationMessage("Paste a YouTube link to begin processing.", "info");
        this.setUrlInputState("idle");
      } else {
        this.setValidationMessage(
          isValid ? "Ready to process this video." : "Enter a valid YouTube video URL.",
          isValid ? "success" : "error"
        );
        this.setUrlInputState(isValid ? "valid" : "invalid");
      }
      this.updateQuickActionsState();
      if (isValid) {
        void this.maybeFetchPreview(trimmedUrl);
      } else {
        this.clearPreview();
      }
    }, 300);
  }
  /**
   * Validate URL input (simplified - used by debounced handler)
   */
  isUrlValid() {
    return ValidationUtils.isValidYouTubeUrl(this.url.trim());
  }
  /**
   * Handle process button click
   */
  async handleProcess() {
    const trimmedUrl = this.url.trim();
    if (!trimmedUrl) {
      new import_obsidian4.Notice(MESSAGES.ERRORS.ENTER_URL);
      this.focusUrlInput();
      return;
    }
    if (!this.isUrlValid()) {
      new import_obsidian4.Notice(MESSAGES.ERRORS.INVALID_URL);
      this.focusUrlInput();
      return;
    }
    try {
      this.showProcessingState();
      this.setStepState(0, "active");
      this.updateProgress(20, "Validating YouTube URL...");
      await new Promise((resolve) => setTimeout(resolve, 500));
      this.setStepState(0, "complete");
      this.setStepState(1, "active");
      this.updateProgress(40, "Extracting video data...");
      await new Promise((resolve) => setTimeout(resolve, 500));
      this.setStepState(1, "complete");
      this.setStepState(2, "active");
      this.updateProgress(60, "Analyzing video content...");
      const filePath = await this.options.onProcess(trimmedUrl, this.format);
      this.setStepState(2, "complete");
      this.setStepState(3, "active");
      this.updateProgress(80, "Generating note...");
      await new Promise((resolve) => setTimeout(resolve, 300));
      this.updateProgress(100, "Complete!");
      this.setStepState(3, "complete");
      this.processedFilePath = filePath;
      this.showCompletionState();
    } catch (error) {
      this.flagActiveStepAsError();
      this.showErrorState(error);
      ErrorHandler.handle(error, "YouTube URL processing");
    }
  }
  /**
   * Handle open file button click
   */
  async handleOpenFile() {
    if (this.processedFilePath && this.options.onOpenFile) {
      try {
        await this.options.onOpenFile(this.processedFilePath);
        this.close();
      } catch (error) {
        ErrorHandler.handle(error, "Opening file");
      }
    }
  }
  /**
   * Show processing state
   */
  showProcessingState() {
    this.isProcessing = true;
    this.setValidationMessage("Processing video. This may take a moment...", "info");
    this.resetProgressSteps();
    if (this.progressContainer) {
      this.progressContainer.style.display = "block";
    }
    if (this.urlInput) {
      this.urlInput.disabled = true;
    }
    if (this.processButton) {
      this.processButton.disabled = true;
      this.processButton.textContent = "Processing...";
    }
    if (this.openButton) {
      this.openButton.style.display = "none";
    }
    this.setUrlInputState("idle");
    this.updateQuickActionsState();
  }
  /**
   * Show completion state
   */
  showCompletionState() {
    this.isProcessing = false;
    if (this.progressContainer) {
      this.progressContainer.style.display = "none";
    }
    if (this.urlInput) {
      this.urlInput.disabled = false;
    }
    if (this.processButton) {
      this.processButton.disabled = false;
      this.processButton.textContent = "Process Another";
      this.processButton.style.display = "inline-block";
      this.processButton.style.opacity = "1";
    }
    if (this.openButton) {
      this.openButton.style.display = "inline-block";
    }
    if (this.headerEl) {
      this.headerEl.textContent = "\u2705 Video Processed Successfully!";
    }
    this.setValidationMessage("Note saved to today's folder. You can open it now or process another video.", "success");
    this.focusUrlInput();
    this.updateQuickActionsState();
    this.setUrlInputState(this.url.trim().length > 0 ? "valid" : "idle");
  }
  /**
   * Show error state
   */
  showErrorState(error) {
    this.isProcessing = false;
    if (this.progressContainer) {
      this.progressContainer.style.display = "none";
    }
    if (this.urlInput) {
      this.urlInput.disabled = false;
    }
    if (this.processButton) {
      this.processButton.disabled = false;
      this.processButton.textContent = MESSAGES.MODALS.PROCESS;
      this.processButton.style.display = "inline-block";
    }
    if (this.openButton) {
      this.openButton.style.display = "none";
    }
    if (this.headerEl) {
      this.headerEl.textContent = "\u274C Processing Failed";
    }
    this.setValidationMessage(error.message, "error");
    this.updateQuickActionsState();
    this.setUrlInputState(this.url.trim().length > 0 ? "invalid" : "idle");
  }
  /**
   * Update progress bar and text
   */
  updateProgress(percent, text) {
    if (this.progressBar) {
      this.progressBar.style.width = `${percent}%`;
    }
    if (this.progressText) {
      this.progressText.textContent = text;
    }
  }
  /**
   * Set initial URL value
   */
  setUrl(url) {
    this.url = url;
    if (this.urlInput) {
      this.urlInput.value = url;
      this.updateProcessButtonState();
      this.updateQuickActionsState();
      const trimmed = url.trim();
      if (trimmed.length === 0) {
        this.setUrlInputState("idle");
      } else {
        this.setUrlInputState(ValidationUtils.isValidYouTubeUrl(trimmed) ? "valid" : "invalid");
      }
    }
  }
  /**
   * Clean up resources when modal is closed
   */
  onClose() {
    if (this.validationTimer) {
      clearTimeout(this.validationTimer);
      this.validationTimer = void 0;
    }
    super.onClose();
  }
  /**
   * Get current URL value
   */
  getUrl() {
    return this.url;
  }
  resetProgressSteps() {
    this.currentStepIndex = 0;
    if (this.progressSteps.length === 0) {
      return;
    }
    this.progressSteps.forEach((step) => {
      step.element.textContent = `\u25CB ${step.label}`;
    });
  }
  setStepState(index, state) {
    const target = this.progressSteps[index];
    if (!target) {
      return;
    }
    const prefix = this.getStepPrefix(state);
    target.element.textContent = `${prefix} ${target.label}`;
    if (state === "active") {
      this.currentStepIndex = index;
    } else if (state === "complete" && this.currentStepIndex === index) {
      this.currentStepIndex = Math.min(index + 1, this.progressSteps.length - 1);
    }
  }
  flagActiveStepAsError() {
    if (this.progressSteps.length === 0) {
      return;
    }
    this.setStepState(this.currentStepIndex, "error");
  }
  getStepPrefix(state) {
    switch (state) {
      case "active":
        return "\u25CF";
      case "complete":
        return "\u2714";
      case "error":
        return "\u26A0";
      default:
        return "\u25CB";
    }
  }
  createInlineButton(container, label, onClick) {
    const button = container.createEl("button", { text: label });
    button.style.padding = "6px 12px";
    button.style.fontSize = "0.85rem";
    button.style.borderRadius = "6px";
    button.style.border = "1px solid var(--background-modifier-border)";
    button.style.backgroundColor = "var(--background-primary)";
    button.style.color = "var(--text-normal)";
    button.style.cursor = "pointer";
    button.style.transition = "background-color 0.2s ease";
    button.addEventListener("mouseenter", () => {
      button.style.backgroundColor = "var(--background-modifier-hover)";
    });
    button.addEventListener("mouseleave", () => {
      button.style.backgroundColor = "var(--background-primary)";
    });
    button.addEventListener("click", onClick);
    return button;
  }
  async handlePasteFromClipboard() {
    if (this.isProcessing) {
      return;
    }
    if (!navigator.clipboard || !navigator.clipboard.readText) {
      this.setValidationMessage("Clipboard access is not available in this environment.", "error");
      new import_obsidian4.Notice("Clipboard access is not available.");
      return;
    }
    try {
      const text = await navigator.clipboard.readText();
      if (!text) {
        this.setValidationMessage("Clipboard is empty. Copy a YouTube URL first.", "info");
        return;
      }
      const trimmed = text.trim();
      this.url = trimmed;
      if (this.urlInput) {
        this.urlInput.value = trimmed;
      }
      this.lastValidUrl = void 0;
      this.updateProcessButtonState();
      this.updateQuickActionsState();
      const isValid = ValidationUtils.isValidYouTubeUrl(trimmed);
      this.setValidationMessage(
        isValid ? "Ready to process this video." : "Enter a valid YouTube video URL.",
        isValid ? "success" : "error"
      );
      this.setUrlInputState(isValid ? "valid" : "invalid");
      if (this.processButton && !this.isProcessing && isValid) {
        this.processButton.focus();
      } else {
        this.focusUrlInput();
      }
    } catch (error) {
      ErrorHandler.handle(error, "Reading clipboard", false);
      this.setValidationMessage("Could not read from clipboard. Paste manually instead.", "error");
      new import_obsidian4.Notice("Could not read from clipboard.");
    }
  }
  handleClearUrl() {
    if (this.isProcessing) {
      return;
    }
    this.url = "";
    if (this.urlInput) {
      this.urlInput.value = "";
    }
    this.lastValidUrl = void 0;
    this.updateProcessButtonState();
    this.updateQuickActionsState();
    this.setValidationMessage("Paste a YouTube link to begin processing.", "info");
    this.setUrlInputState("idle");
    this.focusUrlInput();
  }
  updateQuickActionsState() {
    const hasUrl = this.url.trim().length > 0;
    if (this.clearButton) {
      this.clearButton.disabled = !hasUrl || this.isProcessing;
      this.clearButton.style.opacity = this.clearButton.disabled ? "0.5" : "1";
    }
    if (this.pasteButton) {
      this.pasteButton.disabled = this.isProcessing;
      this.pasteButton.style.opacity = this.pasteButton.disabled ? "0.5" : "1";
    }
  }
  setUrlInputState(state) {
    if (!this.urlInput) {
      return;
    }
    let borderColor = "var(--background-modifier-border)";
    let boxShadow = "none";
    if (state === "valid") {
      borderColor = "var(--text-accent)";
      boxShadow = "0 0 0 1px var(--text-accent)";
    } else if (state === "invalid") {
      borderColor = "var(--text-error)";
      boxShadow = "0 0 0 1px var(--text-error)";
    }
    this.urlInput.style.borderColor = borderColor;
    this.urlInput.style.boxShadow = boxShadow;
  }
  setValidationMessage(message, type) {
    if (!this.validationMessage) {
      return;
    }
    this.validationMessage.textContent = message;
    let color = "var(--text-muted)";
    if (type === "error") {
      color = "var(--text-error)";
    } else if (type === "success") {
      color = "var(--text-accent)";
    } else {
      color = "var(--text-muted)";
    }
    this.validationMessage.style.color = color;
  }
  /**
   * Try to fetch a lightweight preview for the provided YouTube URL using oEmbed.
   */
  async maybeFetchPreview(url) {
    if (this.fetchInProgress)
      return;
    if (!url)
      return;
    if (this.lastValidUrl === url && this.thumbnailEl && this.thumbnailEl.style.display === "block") {
      return;
    }
    this.setFetchingState(true);
    try {
      const meta = await this.fetchVideoPreview(url);
      if (meta) {
        this.showPreview(meta);
      } else {
        this.clearPreview();
      }
    } catch (error) {
      this.clearPreview();
    } finally {
      this.setFetchingState(false);
    }
  }
  setFetchingState(isFetching) {
    var _a;
    this.fetchInProgress = isFetching;
    if (this.processButton) {
      this.processButton.disabled = isFetching || !((_a = this.lastValidResult) != null ? _a : false);
      this.processButton.style.opacity = this.processButton.disabled ? "0.5" : "1";
    }
    if (this.validationMessage) {
      if (isFetching)
        this.setValidationMessage("Fetching preview...", "info");
      else if (this.lastValidResult)
        this.setValidationMessage("Ready to process this video.", "success");
      else
        this.setValidationMessage("Enter a valid YouTube video URL.", "error");
    }
  }
  async fetchVideoPreview(url) {
    try {
      const oembed = `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`;
      const res = await fetch(oembed);
      if (!res.ok)
        return null;
      const data = await res.json();
      return {
        title: data.title || "",
        author: data.author_name || "",
        thumbnail: data.thumbnail_url || ""
      };
    } catch (error) {
      return null;
    }
  }
  showPreview(meta) {
    if (!this.thumbnailEl || !this.metadataContainer)
      return;
    if (meta.thumbnail) {
      this.thumbnailEl.src = meta.thumbnail;
      this.thumbnailEl.style.display = "block";
    } else {
      this.thumbnailEl.style.display = "none";
    }
    const titleEl = this.metadataContainer.querySelector(".yt-preview-title");
    const channelEl = this.metadataContainer.querySelector(".yt-preview-channel");
    if (titleEl) {
      titleEl.textContent = meta.title;
      titleEl.style.fontWeight = "600";
      titleEl.style.marginBottom = "4px";
    }
    if (channelEl) {
      channelEl.textContent = meta.author;
      channelEl.style.color = "var(--text-muted)";
      channelEl.style.fontSize = "0.85rem";
    }
    this.metadataContainer.style.display = "block";
  }
  clearPreview() {
    if (this.thumbnailEl) {
      this.thumbnailEl.src = "";
      this.thumbnailEl.style.display = "none";
    }
    if (this.metadataContainer) {
      const titleEl = this.metadataContainer.querySelector(".yt-preview-title");
      const channelEl = this.metadataContainer.querySelector(".yt-preview-channel");
      if (titleEl)
        titleEl.textContent = "";
      if (channelEl)
        channelEl.textContent = "";
      this.metadataContainer.style.display = "none";
    }
  }
};

// src/components/settings/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/services/secure-config.ts
var SecureConfigService = class {
  constructor(settings) {
    this.settings = settings;
  }
  /**
   * Get API key with environment variable fallback
   */
  getApiKey(keyType) {
    if (this.settings.useEnvironmentVariables) {
      return this.getFromEnvironment(keyType);
    }
    return keyType === "gemini" ? this.settings.geminiApiKey : this.settings.groqApiKey;
  }
  /**
   * Get API key from environment variables
   */
  getFromEnvironment(keyType) {
    const prefix = this.settings.environmentPrefix || "YTC";
    const envVarName = `${prefix}_${keyType.toUpperCase()}_API_KEY`;
    return this.getSecureEnvVar(envVarName) || "";
  }
  /**
   * Secure environment variable access
   * Note: In Obsidian plugins, environment variables are limited
   * This method can be extended for server-side environments
   */
  getSecureEnvVar(varName) {
    if (typeof process !== "undefined" && process.env) {
      return process.env[varName];
    }
    return this.getFromSecureStorage(varName);
  }
  /**
   * Get from secure storage (implementation depends on environment)
   */
  getFromSecureStorage(varName) {
    return void 0;
  }
  /**
   * Validate configuration security
   */
  validateSecurityConfiguration() {
    const warnings = [];
    let isSecure = true;
    if (!this.settings.useEnvironmentVariables) {
      if (this.settings.geminiApiKey && this.settings.geminiApiKey.length > 0) {
        warnings.push("Gemini API key is stored directly in configuration. Consider using environment variables.");
        isSecure = false;
      }
      if (this.settings.groqApiKey && this.settings.groqApiKey.length > 0) {
        warnings.push("Groq API key is stored directly in configuration. Consider using environment variables.");
        isSecure = false;
      }
    }
    if (this.settings.geminiApiKey === "your-api-key-here" || this.settings.groqApiKey === "your-api-key-here") {
      warnings.push("Default placeholder API keys detected. Please set real API keys.");
      isSecure = false;
    }
    return { isSecure, warnings };
  }
  /**
   * Get configuration template for environment variables
   */
  getEnvironmentTemplate() {
    const prefix = this.settings.environmentPrefix || "YTC";
    return `# YouTubeClipper Environment Variables
# Set these in your environment for secure API key management

# Google Gemini API Key
${prefix}_GEMINI_API_KEY=your_gemini_api_key_here

# Groq API Key  
${prefix}_GROQ_API_KEY=your_groq_api_key_here

# Usage:
# 1. Set these variables in your shell profile (.bashrc, .zshrc, etc.)
# 2. Enable "Use Environment Variables" in plugin settings
# 3. Restart Obsidian to pick up the new environment variables
`;
  }
};

// src/components/settings/settings-tab.ts
var SETTINGS_CSS_CLASSES = {
  container: "ytc-settings-container",
  section: "ytc-settings-section",
  header: "ytc-settings-header",
  validation: "ytc-settings-validation"
};
var YouTubeSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, options) {
    super(app, options.plugin);
    this.options = options;
    this.validationErrors = [];
    this.settings = { ...options.plugin.settings };
    this.secureConfig = new SecureConfigService(this.settings);
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass(SETTINGS_CSS_CLASSES.container);
    containerEl.setAttribute("data-plugin", "youtube-clipper");
    this.createHeader();
    this.createAPISettings();
    this.createSecuritySettings();
    this.createFileSettings();
    this.createValidationStatus();
    this.createUsageInstructions();
  }
  /**
   * Create header with version information
   */
  createHeader() {
    const headerEl = this.containerEl.createDiv(SETTINGS_CSS_CLASSES.header);
    headerEl.createEl("h2", { text: "YouTubeClipper Settings" });
    const versionEl = headerEl.createDiv("ytc-version-info");
    versionEl.createEl("span", {
      text: "v1.2.0 - Production Ready",
      cls: "ytc-version-badge"
    });
    const statusEl = headerEl.createDiv("ytc-status-info");
    const hasValidConfig = this.validateConfiguration();
    statusEl.createEl("span", {
      text: hasValidConfig ? "\u2705 Ready to use" : "\u26A0\uFE0F Configuration needed",
      cls: hasValidConfig ? "ytc-status-good" : "ytc-status-warning"
    });
    const docsEl = headerEl.createDiv("ytc-docs-link");
    docsEl.createEl("a", {
      text: "\u{1F4D6} View Documentation",
      href: "#",
      cls: "ytc-docs-button"
    }).addEventListener("click", (e) => {
      e.preventDefault();
      this.showDocumentation();
    });
  }
  /**
   * Validate entire configuration
   */
  validateConfiguration() {
    var _a, _b;
    const hasApiKey = ((_a = this.settings.geminiApiKey) == null ? void 0 : _a.trim()) || ((_b = this.settings.groqApiKey) == null ? void 0 : _b.trim());
    const hasValidPath = ValidationUtils.isValidPath(this.settings.outputPath);
    return Boolean(hasApiKey && hasValidPath);
  }
  /**
   * Show inline documentation
   */
  showDocumentation() {
    window.open("https://github.com/youtube-clipper/obsidian-plugin#readme", "_blank");
  }
  /**
  * Create API configuration settings
  */
  createAPISettings() {
    const { containerEl } = this;
    containerEl.createEl("h3", { text: "API Configuration" });
    new import_obsidian5.Setting(containerEl).setName("Gemini API Key").setDesc("Your Google Gemini API key for content processing (recommended)").addText((text) => text.setPlaceholder(MESSAGES.PLACEHOLDERS.GEMINI_KEY).setValue(this.settings.geminiApiKey).onChange(async (value) => {
      await this.updateSetting("geminiApiKey", value);
    }));
    new import_obsidian5.Setting(containerEl).setName("Groq API Key").setDesc("Your Groq API key for fallback processing").addText((text) => text.setPlaceholder(MESSAGES.PLACEHOLDERS.GROQ_KEY).setValue(this.settings.groqApiKey).onChange(async (value) => {
      await this.updateSetting("groqApiKey", value);
    }));
  }
  /**
   * Create security configuration settings
   */
  createSecuritySettings() {
    const { containerEl } = this;
    containerEl.createEl("h3", { text: "Security Configuration" });
    new import_obsidian5.Setting(containerEl).setName("Use Environment Variables").setDesc("Load API keys from environment variables instead of storing them in configuration").addToggle((toggle) => toggle.setValue(this.settings.useEnvironmentVariables || false).onChange(async (value) => {
      await this.updateSetting("useEnvironmentVariables", value);
      this.display();
    }));
    if (this.settings.useEnvironmentVariables) {
      new import_obsidian5.Setting(containerEl).setName("Environment Variable Prefix").setDesc("Prefix for environment variable names (e.g., YTC_GEMINI_API_KEY)").addText((text) => text.setPlaceholder("YTC").setValue(this.settings.environmentPrefix || "YTC").onChange(async (value) => {
        await this.updateSetting("environmentPrefix", value || "YTC");
      }));
      const envTemplate = this.secureConfig.getEnvironmentTemplate();
      const envSection = containerEl.createDiv("ytc-env-template");
      envSection.createEl("h4", { text: "Environment Variables Template" });
      envSection.createEl("p", {
        text: "Copy these environment variables to your shell profile:",
        cls: "setting-item-description"
      });
      const preEl = envSection.createEl("pre");
      preEl.createEl("code", { text: envTemplate });
      new import_obsidian5.Setting(envSection).setName("Copy Template").setDesc("Copy the environment variables template to clipboard").addButton((button) => button.setButtonText("Copy to Clipboard").onClick(() => {
        navigator.clipboard.writeText(envTemplate);
        button.setButtonText("Copied!");
        setTimeout(() => button.setButtonText("Copy to Clipboard"), 2e3);
      }));
    }
    const validation = this.secureConfig.validateSecurityConfiguration();
    if (!validation.isSecure) {
      const warningEl = containerEl.createDiv("ytc-security-warnings");
      warningEl.createEl("h4", { text: "\u26A0\uFE0F Security Warnings", cls: "ytc-warning-header" });
      validation.warnings.forEach((warning) => {
        warningEl.createEl("p", { text: warning, cls: "ytc-warning-text" });
      });
    }
  }
  /**
   * Create file configuration settings
   */
  createFileSettings() {
    const { containerEl } = this;
    containerEl.createEl("h3", { text: "File Configuration" });
    new import_obsidian5.Setting(containerEl).setName("Output Path").setDesc("Directory path where processed videos will be saved (relative to vault root)").addText((text) => text.setPlaceholder(MESSAGES.PLACEHOLDERS.OUTPUT_PATH).setValue(this.settings.outputPath).onChange(async (value) => {
      await this.updateSetting("outputPath", value);
    }));
  }
  /**
   * Create validation status display
   */
  createValidationStatus() {
    const { containerEl } = this;
    if (this.validationErrors.length > 0) {
      const errorSection = containerEl.createDiv();
      errorSection.style.marginTop = "20px";
      errorSection.style.padding = "10px";
      errorSection.style.backgroundColor = "var(--background-modifier-error)";
      errorSection.style.borderRadius = "4px";
      errorSection.createEl("h4", {
        text: "\u26A0\uFE0F Configuration Issues",
        attr: { style: "color: var(--text-error); margin-top: 0;" }
      });
      const errorList = errorSection.createEl("ul");
      this.validationErrors.forEach((error) => {
        errorList.createEl("li", { text: error });
      });
    } else {
      const successSection = containerEl.createDiv();
      successSection.style.marginTop = "20px";
      successSection.style.padding = "10px";
      successSection.style.backgroundColor = "var(--background-modifier-success)";
      successSection.style.borderRadius = "4px";
      successSection.createEl("h4", {
        text: "\u2705 Configuration Valid",
        attr: { style: "color: var(--text-success); margin-top: 0;" }
      });
    }
  }
  /**
   * Create usage instructions
   */
  createUsageInstructions() {
    const { containerEl } = this;
    containerEl.createEl("h3", { text: "Usage Instructions" });
    const instructions = containerEl.createDiv();
    instructions.innerHTML = `
            <p><strong>How to use:</strong></p>
            <ol>
                <li>Set your Gemini or Groq API key above</li>
                <li>Configure your preferred output directory</li>
                <li>Click the video icon in the ribbon or use the command palette</li>
                <li>Paste a YouTube URL and click Process</li>
                <li>The plugin will analyze the video and create a structured note</li>
            </ol>
            
            <p><strong>API Key Information:</strong></p>
            <ul>
                <li><strong>Gemini API:</strong> Get your key from <a href="https://aistudio.google.com/app/apikey">Google AI Studio</a></li>
                <li><strong>Groq API:</strong> Get your key from <a href="https://console.groq.com/keys">Groq Console</a></li>
                <li>At least one API key is required for the plugin to function</li>
            </ul>
            
            <p><strong>Note:</strong> This plugin requires an active internet connection and a valid API key.</p>
            <p><strong>Limitations:</strong> Due to CORS restrictions, full transcript extraction may be limited. The plugin works with available metadata and descriptions.</p>
        `;
  }
  /**
   * Update a setting value
   */
  async updateSetting(key, value) {
    try {
      this.settings[key] = value;
      await this.validateAndSaveSettings();
    } catch (error) {
      ErrorHandler.handle(error, `Settings update for ${key}`);
    }
  }
  /**
   * Validate and save settings
   */
  async validateAndSaveSettings() {
    const validation = ValidationUtils.validateSettings(this.settings);
    this.validationErrors = validation.errors;
    if (validation.isValid) {
      await this.options.onSettingsChange(this.settings);
    }
    this.display();
  }
  /**
   * Get current settings
   */
  getSettings() {
    return { ...this.settings };
  }
  /**
   * Update settings from external source
   */
  updateSettings(newSettings) {
    this.settings = { ...newSettings };
    this.display();
  }
};

// src/services/ai/ai-service.ts
var AIService = class {
  constructor(providers) {
    this.providers = [];
    if (!providers || providers.length === 0) {
      throw new Error(MESSAGES.ERRORS.MISSING_API_KEYS);
    }
    this.providers = providers;
  }
  /**
   * Process prompt with fallback support
   */
  async process(prompt) {
    if (!prompt || typeof prompt !== "string") {
      throw new Error("Valid prompt is required");
    }
    let lastError = null;
    for (const provider of this.providers) {
      try {
        console.log(`Attempting to process with ${provider.name}...`);
        const content = await provider.process(prompt);
        if (content && content.trim().length > 0) {
          return {
            content,
            provider: provider.name,
            model: provider.model
          };
        } else {
          throw new Error("Empty response from AI provider");
        }
      } catch (error) {
        lastError = error;
        console.warn(`${provider.name} failed:`, error);
        if (provider === this.providers[this.providers.length - 1]) {
          break;
        }
      }
    }
    const errorMessage = lastError ? MESSAGES.ERRORS.AI_PROCESSING(lastError.message) : "All AI providers failed to process the request";
    throw new Error(errorMessage);
  }
  /**
   * Check if any providers are available
   */
  hasAvailableProviders() {
    return this.providers.length > 0;
  }
  /**
   * Get list of available provider names
   */
  getProviderNames() {
    return this.providers.map((p) => p.name);
  }
  /**
   * Add a new provider
   */
  addProvider(provider) {
    this.providers.push(provider);
  }
  /**
   * Remove a provider by name
   */
  removeProvider(providerName) {
    const index = this.providers.findIndex((p) => p.name === providerName);
    if (index !== -1) {
      this.providers.splice(index, 1);
      return true;
    }
    return false;
  }
};

// src/services/ai/base.ts
var BaseAIProvider = class {
  constructor(apiKey) {
    this.apiKey = apiKey;
    if (!apiKey) {
      throw new Error("API key is required for AI provider");
    }
  }
  /**
   * Validate API response structure
   */
  validateResponse(response, requiredPath) {
    let current = response;
    for (const key of requiredPath) {
      if (!current || typeof current !== "object" || !(key in current)) {
        return false;
      }
      current = current[key];
    }
    return current !== null && current !== void 0;
  }
  /**
   * Handle API errors consistently
   */
  async handleAPIError(response) {
    return ErrorHandler.handleAPIError(response, this.name);
  }
};

// src/services/ai/gemini.ts
var GeminiProvider = class extends BaseAIProvider {
  constructor(apiKey) {
    super(apiKey);
    this.name = "Google Gemini";
    this.model = AI_MODELS.GEMINI;
  }
  async process(prompt) {
    const response = await fetch(`${API_ENDPOINTS.GEMINI}?key=${this.apiKey}`, {
      method: "POST",
      headers: this.createHeaders(),
      body: JSON.stringify(this.createRequestBody(prompt))
    });
    if (response.status === 401) {
      throw new Error(MESSAGES.ERRORS.GEMINI_INVALID_KEY);
    }
    if (!response.ok) {
      await this.handleAPIError(response);
    }
    const data = await response.json();
    if (!this.validateResponse(data, ["candidates", "0", "content", "parts", "0", "text"])) {
      throw new Error("Invalid response format from Gemini API");
    }
    return this.extractContent(data);
  }
  createHeaders() {
    return {
      "Content-Type": "application/json"
    };
  }
  createRequestBody(prompt) {
    const normalizedPrompt = prompt.toLowerCase();
    const isVideoAnalysis = normalizedPrompt.includes("youtube video") || normalizedPrompt.includes("youtu.be/") || normalizedPrompt.includes("youtube.com/");
    const baseConfig = {
      contents: [{
        parts: [{ text: prompt }]
      }],
      generationConfig: {
        temperature: 0.7,
        maxOutputTokens: 4e3,
        // Increased for detailed guides
        candidateCount: 1
      }
      // safetySettings: [
      //     {
      //         category: "HARM_CATEGORY_HARASSMENT",
      //         threshold: "BLOCK_MEDIUM_AND_ABOVE"
      //     },
      //     {
      //         category: "HARM_CATEGORY_HATE_SPEECH", 
      //         threshold: "BLOCK_MEDIUM_AND_ABOVE"
      //     }
      // ]
    };
    if (isVideoAnalysis) {
      return {
        ...baseConfig,
        // Enable audio and video token processing for comprehensive analysis
        useAudioVideoTokens: true,
        systemInstruction: {
          parts: [{
            text: "You are an expert video content analyzer. Use both audio and visual information from videos to provide comprehensive analysis. Pay attention to slides, diagrams, text overlays, speaker gestures, and visual demonstrations in addition to spoken content."
          }]
        }
      };
    }
    return baseConfig;
  }
  extractContent(response) {
    const content = response.candidates[0].content.parts[0].text;
    return content ? content.trim() : "";
  }
};

// src/services/ai/groq.ts
var GroqProvider = class extends BaseAIProvider {
  constructor(apiKey) {
    super(apiKey);
    this.name = "Groq";
    this.model = AI_MODELS.GROQ;
  }
  async process(prompt) {
    const response = await fetch(API_ENDPOINTS.GROQ, {
      method: "POST",
      headers: this.createHeaders(),
      body: JSON.stringify(this.createRequestBody(prompt))
    });
    if (response.status === 404) {
      throw new Error(MESSAGES.ERRORS.GROQ_MODEL_NOT_FOUND);
    }
    if (!response.ok) {
      await this.handleAPIError(response);
    }
    const data = await response.json();
    if (!this.validateResponse(data, ["choices", "0", "message"])) {
      throw new Error("Invalid response format from Groq API");
    }
    return this.extractContent(data);
  }
  createHeaders() {
    return {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${this.apiKey}`
    };
  }
  createRequestBody(prompt) {
    return {
      model: this.model,
      messages: [
        {
          role: "system",
          content: "You are an expert content analyzer specializing in extracting practical value and creating actionable guides from video content. Focus on clarity, practicality, and immediate implementability. Even with limited information, provide maximum value through structured analysis and practical recommendations."
        },
        {
          role: "user",
          content: prompt
        }
      ],
      max_tokens: API_LIMITS.MAX_TOKENS,
      temperature: API_LIMITS.TEMPERATURE
    };
  }
  extractContent(response) {
    const content = response.choices[0].message.content;
    return content ? content.trim() : "";
  }
};

// src/services/youtube/video-data.ts
var YouTubeVideoService = class {
  // 30 minutes
  constructor(cache) {
    this.cache = cache;
    this.metadataTTL = 1e3 * 60 * 30;
    // 30 minutes
    this.descriptionTTL = 1e3 * 60 * 30;
  }
  /**
   * Extract video ID from YouTube URL
   */
  extractVideoId(url) {
    return ValidationUtils.extractVideoId(url);
  }
  /**
   * Get video metadata and description
   */
  async getVideoData(videoId) {
    var _a, _b;
    if (!videoId) {
      throw new Error("Video ID is required");
    }
    const cacheKey = this.getCacheKey("video-data", videoId);
    const cached = (_a = this.cache) == null ? void 0 : _a.get(cacheKey);
    if (cached) {
      return cached;
    }
    try {
      const [metadata, description] = await Promise.all([
        this.getVideoMetadata(videoId),
        this.getVideoDescription(videoId)
      ]);
      const result = {
        title: metadata.title || "Unknown Title",
        description: description || "No description available"
      };
      (_b = this.cache) == null ? void 0 : _b.set(cacheKey, result, this.metadataTTL);
      return result;
    } catch (error) {
      throw ErrorHandler.createUserFriendlyError(
        error,
        "fetch video data"
      );
    }
  }
  /**
   * Get video metadata using YouTube oEmbed API
   */
  async getVideoMetadata(videoId) {
    var _a, _b;
    const cacheKey = this.getCacheKey("metadata", videoId);
    const cached = (_a = this.cache) == null ? void 0 : _a.get(cacheKey);
    if (cached) {
      return cached;
    }
    const oembedUrl = `${API_ENDPOINTS.YOUTUBE_OEMBED}?url=https://www.youtube.com/watch?v=${videoId}&format=json`;
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 1e4);
      const response = await fetch(oembedUrl, {
        headers: {
          "User-Agent": "Obsidian YouTube Processor Plugin"
        },
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      if (!response.ok) {
        if (response.status === 400) {
          throw new Error(`Invalid YouTube video ID: ${videoId}. Please check the URL and try again.`);
        } else if (response.status === 404) {
          throw new Error(`YouTube video not found: ${videoId}. The video may be private, deleted, or the ID is incorrect.`);
        } else if (response.status === 403) {
          throw new Error(`Access denied to YouTube video: ${videoId}. The video may be private or restricted.`);
        } else {
          throw new Error(MESSAGES.ERRORS.FETCH_VIDEO_DATA(response.status));
        }
      }
      const data = await response.json();
      const metadata = {
        title: data.title || "Unknown Title"
      };
      (_b = this.cache) == null ? void 0 : _b.set(cacheKey, metadata, this.metadataTTL);
      return metadata;
    } catch (error) {
      if (error instanceof DOMException && error.name === "AbortError") {
        throw new Error("Request timed out. Please check your internet connection and try again.");
      } else if (error instanceof TypeError) {
        throw new Error(MESSAGES.ERRORS.NETWORK_ERROR);
      } else if (error instanceof Error && error.message.includes("JSON")) {
        throw new Error("Failed to parse YouTube response. The service may be temporarily unavailable.");
      }
      throw error;
    }
  }
  /**
   * Get video description by scraping the YouTube page
   */
  async getVideoDescription(videoId) {
    var _a, _b, _c;
    const cacheKey = this.getCacheKey("description", videoId);
    const cached = (_a = this.cache) == null ? void 0 : _a.get(cacheKey);
    if (cached) {
      return cached;
    }
    try {
      const html = await this.fetchVideoPageHTML(videoId);
      const description = this.extractDescriptionFromHTML(html);
      (_b = this.cache) == null ? void 0 : _b.set(cacheKey, description, this.descriptionTTL);
      return description;
    } catch (error) {
      console.warn("Failed to scrape video page:", error);
      const fallback = MESSAGES.WARNINGS.EXTRACTION_FAILED;
      (_c = this.cache) == null ? void 0 : _c.set(cacheKey, fallback, this.descriptionTTL);
      return fallback;
    }
  }
  /**
   * Fetch YouTube page HTML using CORS proxy
   */
  async fetchVideoPageHTML(videoId) {
    const videoUrl = `https://www.youtube.com/watch?v=${videoId}`;
    const proxyUrl = `${API_ENDPOINTS.CORS_PROXY}?url=${encodeURIComponent(videoUrl)}`;
    const response = await fetch(proxyUrl);
    if (!response.ok) {
      throw new Error(MESSAGES.WARNINGS.CORS_RESTRICTIONS);
    }
    return response.text();
  }
  /**
   * Extract description from YouTube page HTML
   */
  extractDescriptionFromHTML(html) {
    const patterns = [
      /"shortDescription":"([^"]*?)"/,
      /"description":{"simpleText":"([^"]*?)"}/,
      /<meta name="description" content="([^"]*?)">/,
      /<meta property="og:description" content="([^"]*?)">/
    ];
    for (const pattern of patterns) {
      const match = html.match(pattern);
      if (match && match[1]) {
        const cleanedText = ValidationUtils.cleanText(match[1]);
        return ValidationUtils.truncateText(cleanedText, API_LIMITS.DESCRIPTION_MAX_LENGTH);
      }
    }
    return MESSAGES.WARNINGS.AUTO_EXTRACTION;
  }
  /**
   * Validate YouTube URL and extract video ID
   */
  validateAndExtractVideoId(url) {
    if (!ValidationUtils.isValidYouTubeUrl(url)) {
      throw new Error(MESSAGES.ERRORS.INVALID_URL);
    }
    const videoId = this.extractVideoId(url);
    if (!videoId) {
      throw new Error(MESSAGES.ERRORS.INVALID_URL);
    }
    return videoId;
  }
  getCacheKey(namespace, videoId) {
    return `youtube-video-service:${namespace}:${videoId}`;
  }
};

// src/services/file/obsidian-file.ts
var import_obsidian6 = require("obsidian");

// src/components/modals/file-conflict-modal.ts
var COPY_WARNING = "A note with this title already exists. Choose how to proceed.";
var FileConflictModal = class extends BaseModal {
  constructor(app, file) {
    super(app);
    this.file = file;
    this.decision = "cancel";
  }
  onOpen() {
    this.createHeader("Note Already Exists");
    this.createMessage(`${COPY_WARNING}

Existing note: ${this.file.path}`);
    this.createButtons();
  }
  openAndWait() {
    return new Promise((resolve) => {
      this.resolve = resolve;
      this.forceVisible();
      this.open();
    });
  }
  onClose() {
    if (this.resolve) {
      this.resolve(this.decision);
    }
    super.onClose();
  }
  createButtons() {
    const container = this.createButtonContainer();
    this.createButton(container, "Cancel", false, () => {
      this.closeWithDecision("cancel");
    });
    this.createButton(container, "Save as Numbered Copy", false, () => {
      this.closeWithDecision("new-name");
    });
    this.createButton(container, "Overwrite Existing", true, () => {
      this.closeWithDecision("overwrite");
    });
  }
  closeWithDecision(decision) {
    this.decision = decision;
    this.close();
  }
};

// src/services/file/obsidian-file.ts
var ObsidianFileService = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Save content to a file in the vault
   */
  async saveToFile(title, content, outputPath) {
    try {
      const filename = this.createSafeFilename(title);
      const normalizedBase = this.normalizePath(outputPath);
      await this.ensureDirectoryExists(normalizedBase);
      const dailyFolder = this.getDailyFolderPath(normalizedBase);
      await this.ensureDirectoryExists(dailyFolder);
      const filePath = `${dailyFolder}/${filename}`;
      const finalPath = await this.handleFileConflicts(filePath, content);
      return finalPath;
    } catch (error) {
      throw new Error(MESSAGES.ERRORS.SAVE_FILE(error.message));
    }
  }
  /**
   * Open a file with user confirmation
   */
  async openFileWithConfirmation(file) {
    await this.waitForFileCreation();
    try {
      const currentFile = this.app.vault.getAbstractFileByPath(file.path);
      if (!(currentFile instanceof import_obsidian6.TFile)) {
        throw new Error(MESSAGES.ERRORS.FILE_NOT_EXISTS);
      }
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(currentFile);
    } catch (error) {
      throw new Error(MESSAGES.ERRORS.COULD_NOT_OPEN(error.message));
    }
  }
  /**
   * Create a safe filename from title
   */
  createSafeFilename(title) {
    const sanitized = ValidationUtils.sanitizeFilename(title);
    return `${sanitized}.md`;
  }
  /**
   * Ensure the output directory exists
   */
  async ensureDirectoryExists(outputPath) {
    try {
      await this.app.vault.createFolder(outputPath);
    } catch (error) {
    }
  }
  getDailyFolderPath(basePath) {
    const trimmedBase = basePath.replace(/\/+$/, "");
    const today = new Date().toISOString().split("T")[0];
    return `${trimmedBase}/${today}`;
  }
  /**
   * Handle file naming conflicts by adding timestamp
   */
  async handleFileConflicts(filePath, content) {
    const existingFile = this.app.vault.getAbstractFileByPath(filePath);
    if (existingFile instanceof import_obsidian6.TFile) {
      const decision = await this.promptConflictResolution(existingFile);
      switch (decision) {
        case "overwrite":
          await this.app.vault.modify(existingFile, content);
          return existingFile.path;
        case "new-name":
          return this.createVersionedCopy(existingFile.path, content);
        default:
          throw new Error("Save cancelled by user");
      }
    }
    await this.app.vault.create(filePath, content);
    return filePath;
  }
  /**
   * Wait for file creation to complete
   */
  async waitForFileCreation() {
    return new Promise(
      (resolve) => setTimeout(resolve, TIMEOUTS.FILE_CREATION_WAIT)
    );
  }
  /**
   * Get file by path with validation
   */
  getFileByPath(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    return file instanceof import_obsidian6.TFile ? file : null;
  }
  /**
   * Check if file exists at path
   */
  fileExists(filePath) {
    return this.getFileByPath(filePath) !== null;
  }
  /**
   * Create a file with unique naming
   */
  async createUniqueFile(basePath, content) {
    let counter = 1;
    let filePath = basePath;
    while (this.fileExists(filePath)) {
      const pathParts = basePath.split("/");
      const filename = pathParts.pop();
      const nameWithoutExt = filename.replace(".md", "");
      const newFilename = `${nameWithoutExt} (${counter}).md`;
      filePath = [...pathParts, newFilename].join("/");
      counter++;
    }
    await this.app.vault.create(filePath, content);
    return filePath;
  }
  async promptConflictResolution(file) {
    const modal = new FileConflictModal(this.app, file);
    const decision = await modal.openAndWait();
    return decision;
  }
  async createVersionedCopy(originalPath, content) {
    const pathParts = originalPath.split("/");
    const filename = pathParts.pop();
    const nameWithoutExt = filename.replace(".md", "");
    let counter = 1;
    let candidatePath;
    do {
      candidatePath = [...pathParts, `${nameWithoutExt} (${counter}).md`].join("/");
      counter++;
    } while (this.fileExists(candidatePath));
    await this.app.vault.create(candidatePath, content);
    return candidatePath;
  }
  normalizePath(path) {
    if (!path) {
      return "";
    }
    let normalized = path.trim();
    if (normalized.startsWith("./")) {
      normalized = normalized.slice(2);
    }
    while (normalized.startsWith("/")) {
      normalized = normalized.slice(1);
    }
    normalized = normalized.replace(/\/+/g, "/");
    return normalized;
  }
};

// src/services/prompt-service.ts
var _AIPromptService = class {
  /**
   * Create analysis prompt for YouTube video content with format selection (optimized)
   */
  createAnalysisPrompt(videoData, videoUrl, format = "detailed-guide") {
    const baseContent = _AIPromptService.BASE_TEMPLATE.replace("{{TITLE}}", videoData.title).replace("{{URL}}", videoUrl).replace("{{DESCRIPTION}}", videoData.description);
    return format === "executive-summary" ? this.createExecutiveSummaryPrompt(baseContent, videoUrl) : this.createDetailedGuidePrompt(baseContent, videoUrl);
  }
  /**
   * Create executive summary prompt (250 words)
   */
  createExecutiveSummaryPrompt(baseContent, videoUrl) {
    const videoId = ValidationUtils.extractVideoId(videoUrl);
    const embedUrl = videoId ? `https://www.youtube-nocookie.com/embed/${videoId}` : videoUrl;
    return `${baseContent}

        OUTPUT FORMAT - EXECUTIVE SUMMARY:
        
        Use this EXACT template:

        ---
        title: {Video Title}
        source: ${videoUrl}
        created: "${new Date().toISOString().split("T")[0]}"
        modified: "${new Date().toISOString().split("T")[0]}"
        description: "Single sentence capturing the core insight"
        type: youtube-note
        format: executive-summary
        tags:
          - youtube
          - executive-summary
          - tag_1
          - tag_2
          - tag_3
        status: processed
        duration: "[Extract video duration]"
        channel: "[Extract channel name]"
        video_id: "${videoId || "unknown"}"
        processing_date: "${new Date().toISOString()}"
        word_count: 250
    ai_provider: "__AI_PROVIDER__"
    ai_model: "__AI_MODEL__"
        ---

        <iframe width="640" height="360" src="${embedUrl}" title="{Video Title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

        ---

        ## Key Insights
        - [Critical insight 1 with specific detail]
        - [Critical insight 2 with specific detail]
        - [Critical insight 3 with specific detail]

        ## Concise Summary
        [Provide a concise, cohesive summary in exactly two paragraphs, maximum 250 words total. Focus on the core value, main insights, and key actionable takeaways. Make every word count.]

        ## Resources
        - **Original Video:** [Watch on YouTube](${videoUrl})
        - **Channel:** [Creator's Channel](https://youtube.com/channel/[extract-channel-id])
        - **Key Tools/Frameworks:** [List main tools or frameworks mentioned]
        - **Official Documentation:** [Links to official docs for mentioned technologies]
        - **Further Reading:** [1-2 high-quality related articles or resources]

        CRITICAL: Keep the Executive Summary section to exactly 250 words or fewer. Be concise but comprehensive.`;
  }
  /**
   * Create detailed guide prompt
   */
  createDetailedGuidePrompt(baseContent, videoUrl) {
    const videoId = ValidationUtils.extractVideoId(videoUrl);
    const embedUrl = videoId ? `https://www.youtube-nocookie.com/embed/${videoId}` : videoUrl;
    return `${baseContent}

        OUTPUT FORMAT - COMPREHENSIVE TUTORIAL:

        Use this EXACT template:

        ---
        title: {Video Title}
        source: ${videoUrl}
        created: "${new Date().toISOString().split("T")[0]}"
        modified: "${new Date().toISOString().split("T")[0]}"
        description: "Single sentence capturing the core insight"
        type: youtube-note
        format: detailed-tutorial
        tags:
          - youtube
          - tutorial
          - step-by-step
          - tag_1
          - tag_2
          - tag_3
        status: processed
        duration: "[Extract video duration]"
        channel: "[Extract channel name]"
        video_id: "${videoId || "unknown"}"
        processing_date: "${new Date().toISOString()}"
        word_count: "[estimated word count]"
    ai_provider: "__AI_PROVIDER__"
    ai_model: "__AI_MODEL__"
        difficulty: "[beginner/intermediate/advanced]"
        estimated_time: "[time to complete]"
        ---

        <iframe width="640" height="360" src="${embedUrl}" title="{Video Title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

        ---

        ## Comprehensive Tutorial

        ### Concise Summary

        [Two-part response: a concise summary under 150 words that captures the video's core value and main insights]

        ## Step-by-Step Implementation Guide
        ### Step 1: [Action Title]
        - Detailed instruction 1
        - Detailed instruction 2
        - Key considerations or tips
        
        ### Step 2: [Action Title]
        - Detailed instruction 1
        - Detailed instruction 2
        - Key considerations or tips

        [Continue with additional steps as needed - provide comprehensive coverage]

        ## Resources
        - **Original Video:** [Watch on YouTube](${videoUrl})
        - **Channel:** [Creator's Channel](https://youtube.com/channel/[extract-channel-id])
        - **Related Documentation:** [If any tools/frameworks mentioned, provide official docs links]
        - **Additional Learning:** [Suggest 2-3 related high-quality resources]
        - **Tools & Software:** [List any tools mentioned with download/setup links]
        - **Community:** [Relevant forums, Discord servers, or communities]

        IMPORTANT: Provide detailed, actionable steps that someone could follow to implement the concepts from the video.`;
  }
  /**
   * Process AI response and inject provider information
   */
  processAIResponse(content, provider, model, format) {
    if (!content) {
      return content;
    }
    const providerValue = provider || "unknown";
    const modelValue = model || "unknown";
    let updatedContent = content.replace(/__AI_PROVIDER__/g, providerValue).replace(/__AI_MODEL__/g, modelValue);
    updatedContent = this.ensureFrontMatterValue(updatedContent, "ai_provider", providerValue);
    updatedContent = this.ensureFrontMatterValue(updatedContent, "ai_model", modelValue);
    return updatedContent;
  }
  ensureFrontMatterValue(content, key, value) {
    const pattern = new RegExp(`(${key}\\s*:\\s*)(["'])?([^"'\\n]*)(["'])?`, "i");
    if (pattern.test(content)) {
      return content.replace(pattern, (_, prefix, openingQuote, _existing, closingQuote) => {
        const quote = openingQuote || closingQuote ? '"' : "";
        return `${prefix}${quote}${value}${quote}`;
      });
    }
    if (content.startsWith("---")) {
      return content.replace(/^---\s*\n/, `---
${key}: "${value}"
`);
    }
    return content;
  }
  /**
   * Create a summary prompt for shorter content
   */
  createSummaryPrompt(videoData, videoUrl) {
    return `Create a concise summary for this YouTube video:

        Title: ${videoData.title}
        URL: ${videoUrl}
        Description: ${videoData.description}

        Please provide:
        1. A 2-paragraph summary (max 250 words)
        2. 3-5 key takeaways
        3. Main actionable insights

        Format as markdown with clear headings.`;
  }
  /**
   * Validate prompt length and content
   */
  validatePrompt(prompt) {
    return Boolean(prompt) && typeof prompt === "string" && prompt.trim().length > 10 && prompt.length < 5e4;
  }
};
var AIPromptService = _AIPromptService;
// Pre-compiled template fragments for hot paths (performance optimization)
AIPromptService.BASE_TEMPLATE = `Analyze this YouTube video using comprehensive multimodal analysis with audio_video_tokens=True:

        VIDEO INFORMATION:
        Title: {{TITLE}}
        URL: {{URL}}
        Description/Context: {{DESCRIPTION}}

        MULTIMODAL ANALYSIS INSTRUCTIONS:
        1. Watch the complete video using both audio and visual analysis capabilities with audio_video_tokens=True
        2. Extract insights from spoken content, music, sound effects, and ambient audio
        3. Analyze visual elements including:
           - Slides, presentations, and text overlays
           - Diagrams, charts, and visual demonstrations
           - Body language, gestures, and facial expressions
           - Screen recordings, code examples, or software demos
           - Any visual aids or props used
        4. Before responding, perform a web search to find relevant insights or highlights about this topic
        5. Use web search results only when they directly enhance the response by adding clarity, depth, or useful context
        6. Focus on practical, action-oriented information that viewers can implement
        7. Maintain accuracy and cite specific examples from the video when relevant
        8. Identify the main value proposition and key learning objectives`;

// src/services/cache/memory-cache.ts
var MemoryCacheService = class {
  constructor() {
    this.cache = /* @__PURE__ */ new Map();
    this.defaultTTL = 3e5;
    // 5 minutes
    this.lastCleanup = 0;
    this.CLEANUP_INTERVAL = 6e4;
  }
  // 1 minute
  /**
   * Get item from cache (optimized with lazy cleanup)
   */
  get(key) {
    var _a;
    if (this.cache.size > 50) {
      this.cleanup();
    }
    const item = this.cache.get(key);
    if (!item)
      return null;
    const ttl = (_a = item.ttl) != null ? _a : this.defaultTTL;
    if (Date.now() - item.timestamp > ttl) {
      this.cache.delete(key);
      return null;
    }
    return item.data;
  }
  /**
   * Set item in cache
   */
  set(key, data, ttl) {
    this.cache.set(key, {
      data,
      timestamp: Date.now(),
      ttl
    });
  }
  /**
   * Clear all cache items
   */
  clear() {
    this.cache.clear();
  }
  /**
   * Delete specific cache item
   */
  delete(key) {
    return this.cache.delete(key);
  }
  /**
   * Check if key exists in cache
   */
  has(key) {
    var _a;
    const item = this.cache.get(key);
    if (!item) {
      return false;
    }
    const ttl = (_a = item.ttl) != null ? _a : this.defaultTTL;
    if (Date.now() - item.timestamp > ttl) {
      this.cache.delete(key);
      return false;
    }
    return true;
  }
  /**
   * Get cache size
   */
  size() {
    return this.cache.size;
  }
  /**
   * Clean up expired items (optimized with batched operations)
   */
  cleanup() {
    var _a;
    const now = Date.now();
    if (now - this.lastCleanup < this.CLEANUP_INTERVAL)
      return;
    this.lastCleanup = now;
    const expiredKeys = [];
    for (const [key, item] of this.cache.entries()) {
      const ttl = (_a = item.ttl) != null ? _a : this.defaultTTL;
      if (now - item.timestamp > ttl) {
        expiredKeys.push(key);
      }
    }
    expiredKeys.forEach((key) => this.cache.delete(key));
  }
};

// src/services/service-container.ts
var ServiceContainer = class {
  constructor(settings, app) {
    this.settings = settings;
    this.app = app;
  }
  get aiService() {
    if (!this._aiService) {
      const providers = [];
      if (this.settings.geminiApiKey) {
        providers.push(new GeminiProvider(this.settings.geminiApiKey));
      }
      if (this.settings.groqApiKey) {
        providers.push(new GroqProvider(this.settings.groqApiKey));
      }
      this._aiService = new AIService(providers);
    }
    return this._aiService;
  }
  get videoService() {
    if (!this._videoService) {
      this._videoService = new YouTubeVideoService(this.cacheService);
    }
    return this._videoService;
  }
  get fileService() {
    if (!this._fileService) {
      this._fileService = new ObsidianFileService(this.app);
    }
    return this._fileService;
  }
  get cacheService() {
    if (!this._cacheService) {
      this._cacheService = new MemoryCacheService();
    }
    return this._cacheService;
  }
  get promptService() {
    if (!this._promptService) {
      this._promptService = new AIPromptService();
    }
    return this._promptService;
  }
  /**
   * Update settings and refresh services that depend on them
   */
  async updateSettings(newSettings) {
    this.settings = newSettings;
    this._aiService = void 0;
  }
  /**
   * Clear all cached services
   */
  clearServices() {
    this._aiService = void 0;
    this._videoService = void 0;
    this._fileService = void 0;
    this._cacheService = void 0;
    this._promptService = void 0;
  }
};

// src/main.ts
var PLUGIN_PREFIX = "ytp";
var DEFAULT_SETTINGS = {
  geminiApiKey: "",
  groqApiKey: "",
  outputPath: "YouTube/Processed Videos",
  useEnvironmentVariables: false,
  environmentPrefix: "YTC"
};
var YouTubeProcessorPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.settings = DEFAULT_SETTINGS;
    this.isUnloading = false;
    this.operationCount = 0;
  }
  async onload() {
    this.logInfo("Initializing YouTube Processor Plugin v1.2.0...");
    const conflicts = ConflictPrevention.checkForPotentialConflicts();
    if (conflicts.length > 0) {
      this.logWarning(`Potential conflicts detected but proceeding: ${conflicts.join(", ")}`);
    }
    try {
      await this.loadSettings();
      await this.initializeServices();
      this.registerUIComponents();
      this.logInfo("YouTube Processor Plugin loaded successfully");
    } catch (error) {
      this.logError("Failed to load plugin", error);
      ErrorHandler.handle(error, "Plugin initialization");
      new import_obsidian7.Notice("Failed to load YouTube Processor Plugin. Check console for details.");
    }
  }
  onunload() {
    var _a;
    this.logInfo("Unloading YouTube Processor Plugin...");
    this.isUnloading = true;
    try {
      (_a = this.serviceContainer) == null ? void 0 : _a.clearServices();
      this.cleanupUIElements();
      ConflictPrevention.cleanupAllElements();
      this.logInfo("YouTube Processor Plugin unloaded successfully");
    } catch (error) {
      this.logError("Error during plugin unload", error);
    }
  }
  async initializeServices() {
    this.serviceContainer = new ServiceContainer(this.settings, this.app);
  }
  registerUIComponents() {
    this.ribbonIcon = this.addRibbonIcon("video", "Process YouTube Video", () => {
      void this.safeShowUrlModal();
    });
    this.addCommand({
      id: `${PLUGIN_PREFIX}-process-youtube-video`,
      name: "Process YouTube Video",
      callback: () => {
        void this.safeShowUrlModal();
      }
    });
    this.addSettingTab(new YouTubeSettingsTab(this.app, {
      plugin: this,
      onSettingsChange: this.handleSettingsChange.bind(this)
    }));
  }
  cleanupUIElements() {
    if (this.ribbonIcon) {
      this.ribbonIcon.remove();
      this.ribbonIcon = void 0;
    }
  }
  async safeShowUrlModal() {
    await this.safeOperation(async () => {
      this.openYouTubeUrlModal();
    }, "Show URL Modal");
  }
  async safeOperation(operation, operationName) {
    if (this.isUnloading) {
      this.logWarning(`Attempted ${operationName} during plugin unload - skipping`);
      return null;
    }
    const opId = ++this.operationCount;
    this.logInfo(`Starting operation ${opId}: ${operationName}`);
    try {
      const result = await operation();
      this.logInfo(`Completed operation ${opId}: ${operationName}`);
      return result;
    } catch (error) {
      this.logError(`Failed operation ${opId}: ${operationName}`, error);
      ErrorHandler.handle(error, operationName);
      return null;
    }
  }
  openYouTubeUrlModal() {
    if (this.isUnloading) {
      ConflictPrevention.log("Plugin is unloading, ignoring modal request");
      return;
    }
    ConflictPrevention.safeOperation(async () => {
      new YouTubeUrlModal(this.app, {
        onProcess: this.processYouTubeVideo.bind(this),
        onOpenFile: this.openFileByPath.bind(this)
      }).open();
    }, "YouTube URL Modal").catch((error) => {
      ErrorHandler.handle(error, "Opening YouTube URL modal");
    });
  }
  async processYouTubeVideo(url, format = "detailed-guide") {
    if (this.isUnloading) {
      ConflictPrevention.log("Plugin is unloading, cancelling video processing");
      throw new Error("Plugin is shutting down");
    }
    const result = await ConflictPrevention.safeOperation(async () => {
      new import_obsidian7.Notice(MESSAGES.PROCESSING);
      const validation = ValidationUtils.validateSettings(this.settings);
      if (!validation.isValid) {
        throw new Error(`Configuration invalid: ${validation.errors.join(", ")}`);
      }
      const youtubeService = this.serviceContainer.videoService;
      const aiService = this.serviceContainer.aiService;
      const fileService = this.serviceContainer.fileService;
      const promptService = this.serviceContainer.promptService;
      const videoId = youtubeService.extractVideoId(url);
      if (!videoId) {
        throw new Error(MESSAGES.ERRORS.VIDEO_ID_EXTRACTION);
      }
      const videoData = await youtubeService.getVideoData(videoId);
      const prompt = promptService.createAnalysisPrompt(videoData, url, format);
      const aiResponse = await aiService.process(prompt);
      const formattedContent = promptService.processAIResponse(
        aiResponse.content,
        aiResponse.provider,
        aiResponse.model,
        format,
        videoData,
        url
      );
      const filePath = await fileService.saveToFile(
        videoData.title,
        formattedContent,
        this.settings.outputPath
      );
      new import_obsidian7.Notice(MESSAGES.SUCCESS(videoData.title));
      return filePath;
    }, "YouTube Video Processing");
    if (!result) {
      throw new Error("Failed to process YouTube video");
    }
    return result;
  }
  async openFileByPath(filePath) {
    try {
      await new Promise((resolve) => setTimeout(resolve, 300));
      const cleanPath = filePath.startsWith("/") ? filePath.substring(1) : filePath;
      const file = this.app.vault.getAbstractFileByPath(cleanPath);
      if (!file || !(file instanceof import_obsidian7.TFile)) {
        throw new Error(`File not found at path: ${cleanPath}`);
      }
      await this.openFileInNewTab(file);
    } catch (error) {
      ErrorHandler.handle(error, "Opening file by path");
      throw error;
    }
  }
  async openFileInNewTab(file) {
    try {
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
      this.app.workspace.setActiveLeaf(leaf);
      new import_obsidian7.Notice(`\u{1F4C2} Opened: ${file.name}`);
    } catch (error) {
      try {
        const currentLeaf = this.app.workspace.getLeaf(false);
        await currentLeaf.openFile(file);
        new import_obsidian7.Notice(`\u{1F4C2} Opened: ${file.name}`);
      } catch (fallbackError) {
        ErrorHandler.handle(fallbackError, "Opening file in current tab");
        new import_obsidian7.Notice(`Note saved as "${file.name}" but could not auto-open. Please open manually.`);
      }
    }
  }
  showPersistentSaveConfirmation(file) {
    try {
      const modal = new SaveConfirmationModal(this.app, file, (shouldOpen) => {
        if (shouldOpen) {
          void this.openFileInNewTab(file);
        }
      });
      modal.open();
    } catch (error) {
      ErrorHandler.handle(error, "Showing save confirmation");
      new import_obsidian7.Notice(`File saved: ${file.name}. Click to open.`, 0).noticeEl.onclick = () => {
        void this.openFileInNewTab(file);
      };
    }
  }
  async handleSettingsChange(newSettings) {
    var _a;
    try {
      this.settings = { ...newSettings };
      await this.saveSettings();
      await ((_a = this.serviceContainer) == null ? void 0 : _a.updateSettings(this.settings));
    } catch (error) {
      ErrorHandler.handle(error, "Settings update");
      throw error;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  getServiceContainer() {
    return this.serviceContainer;
  }
  logInfo(message) {
    ConflictPrevention.log(`[INFO] ${message}`);
  }
  logWarning(message) {
    ConflictPrevention.log(`[WARN] ${message}`, "warn");
  }
  logError(message, error) {
    ConflictPrevention.log(`[ERROR] ${message}: ${error.message}`, "error");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvdXRpbHMvY29uZmxpY3QtcHJldmVudGlvbi50cyIsICJzcmMvY29uc3RhbnRzL21lc3NhZ2VzLnRzIiwgInNyYy91dGlscy92YWxpZGF0aW9uLnRzIiwgInNyYy91dGlscy9lcnJvci1oYW5kbGVyLnRzIiwgInNyYy9jb21wb25lbnRzL21vZGFscy9zYXZlLWNvbmZpcm1hdGlvbi1tb2RhbC50cyIsICJzcmMvY29tcG9uZW50cy9tb2RhbHMveW91dHViZS11cmwtbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvbW9kYWxzL2Jhc2UtbW9kYWwudHMiLCAic3JjL2NvbnN0YW50cy9zdHlsZXMudHMiLCAic3JjL3V0aWxzL2RvbS50cyIsICJzcmMvY29uc3RhbnRzL2FwaS50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9zZXR0aW5ncy10YWIudHMiLCAic3JjL3NlcnZpY2VzL3NlY3VyZS1jb25maWcudHMiLCAic3JjL3NlcnZpY2VzL2FpL2FpLXNlcnZpY2UudHMiLCAic3JjL3NlcnZpY2VzL2FpL2Jhc2UudHMiLCAic3JjL3NlcnZpY2VzL2FpL2dlbWluaS50cyIsICJzcmMvc2VydmljZXMvYWkvZ3JvcS50cyIsICJzcmMvc2VydmljZXMveW91dHViZS92aWRlby1kYXRhLnRzIiwgInNyYy9zZXJ2aWNlcy9maWxlL29ic2lkaWFuLWZpbGUudHMiLCAic3JjL2NvbXBvbmVudHMvbW9kYWxzL2ZpbGUtY29uZmxpY3QtbW9kYWwudHMiLCAic3JjL3NlcnZpY2VzL3Byb21wdC1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9jYWNoZS9tZW1vcnktY2FjaGUudHMiLCAic3JjL3NlcnZpY2VzL3NlcnZpY2UtY29udGFpbmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgeyBkZWZhdWx0IH0gZnJvbSAnLi9zcmMvbWFpbic7XG4iLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ29uZmxpY3RQcmV2ZW50aW9uIH0gZnJvbSAnLi91dGlscy9jb25mbGljdC1wcmV2ZW50aW9uJztcbmltcG9ydCB7IE1FU1NBR0VTIH0gZnJvbSAnLi9jb25zdGFudHMvbWVzc2FnZXMnO1xuaW1wb3J0IHsgVmFsaWRhdGlvblV0aWxzIH0gZnJvbSAnLi91dGlscy92YWxpZGF0aW9uJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4vdXRpbHMvZXJyb3ItaGFuZGxlcic7XG5pbXBvcnQgeyBTYXZlQ29uZmlybWF0aW9uTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWxzL3NhdmUtY29uZmlybWF0aW9uLW1vZGFsJztcbmltcG9ydCB7IFlvdVR1YmVVcmxNb2RhbCB9IGZyb20gJy4vY29tcG9uZW50cy9tb2RhbHMveW91dHViZS11cmwtbW9kYWwnO1xuaW1wb3J0IHsgWW91VHViZVNldHRpbmdzVGFiIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL3NldHRpbmdzLXRhYic7XG5pbXBvcnQgeyBTZXJ2aWNlQ29udGFpbmVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9zZXJ2aWNlLWNvbnRhaW5lcic7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXQsIFlvdVR1YmVQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy90eXBlcyc7XG5cbmNvbnN0IFBMVUdJTl9QUkVGSVggPSAneXRwJztcblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogWW91VHViZVBsdWdpblNldHRpbmdzID0ge1xuICAgIGdlbWluaUFwaUtleTogJycsXG4gICAgZ3JvcUFwaUtleTogJycsXG4gICAgb3V0cHV0UGF0aDogJ1lvdVR1YmUvUHJvY2Vzc2VkIFZpZGVvcycsXG4gICAgdXNlRW52aXJvbm1lbnRWYXJpYWJsZXM6IGZhbHNlLFxuICAgIGVudmlyb25tZW50UHJlZml4OiAnWVRDJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWW91VHViZVByb2Nlc3NvclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogWW91VHViZVBsdWdpblNldHRpbmdzID0gREVGQVVMVF9TRVRUSU5HUztcbiAgICBwcml2YXRlIHNlcnZpY2VDb250YWluZXI/OiBTZXJ2aWNlQ29udGFpbmVyO1xuICAgIHByaXZhdGUgcmliYm9uSWNvbj86IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaXNVbmxvYWRpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIG9wZXJhdGlvbkNvdW50ID0gMDtcblxuICAgIGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5sb2dJbmZvKCdJbml0aWFsaXppbmcgWW91VHViZSBQcm9jZXNzb3IgUGx1Z2luIHYxLjIuMC4uLicpO1xuICAgICAgICBjb25zdCBjb25mbGljdHMgPSBDb25mbGljdFByZXZlbnRpb24uY2hlY2tGb3JQb3RlbnRpYWxDb25mbGljdHMoKTtcbiAgICAgICAgaWYgKGNvbmZsaWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ1dhcm5pbmcoYFBvdGVudGlhbCBjb25mbGljdHMgZGV0ZWN0ZWQgYnV0IHByb2NlZWRpbmc6ICR7Y29uZmxpY3RzLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyVUlDb21wb25lbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmxvZ0luZm8oJ1lvdVR1YmUgUHJvY2Vzc29yIFBsdWdpbiBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ0Vycm9yKCdGYWlsZWQgdG8gbG9hZCBwbHVnaW4nLCBlcnJvciBhcyBFcnJvcik7XG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yIGFzIEVycm9yLCAnUGx1Z2luIGluaXRpYWxpemF0aW9uJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gbG9hZCBZb3VUdWJlIFByb2Nlc3NvciBQbHVnaW4uIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dJbmZvKCdVbmxvYWRpbmcgWW91VHViZSBQcm9jZXNzb3IgUGx1Z2luLi4uJyk7XG4gICAgICAgIHRoaXMuaXNVbmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VDb250YWluZXI/LmNsZWFyU2VydmljZXMoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cFVJRWxlbWVudHMoKTtcbiAgICAgICAgICAgIENvbmZsaWN0UHJldmVudGlvbi5jbGVhbnVwQWxsRWxlbWVudHMoKTtcbiAgICAgICAgICAgIHRoaXMubG9nSW5mbygnWW91VHViZSBQcm9jZXNzb3IgUGx1Z2luIHVubG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcignRXJyb3IgZHVyaW5nIHBsdWdpbiB1bmxvYWQnLCBlcnJvciBhcyBFcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVTZXJ2aWNlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlQ29udGFpbmVyID0gbmV3IFNlcnZpY2VDb250YWluZXIodGhpcy5zZXR0aW5ncywgdGhpcy5hcHApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJVSUNvbXBvbmVudHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbigndmlkZW8nLCAnUHJvY2VzcyBZb3VUdWJlIFZpZGVvJywgKCkgPT4ge1xuICAgICAgICAgICAgdm9pZCB0aGlzLnNhZmVTaG93VXJsTW9kYWwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBgJHtQTFVHSU5fUFJFRklYfS1wcm9jZXNzLXlvdXR1YmUtdmlkZW9gLFxuICAgICAgICAgICAgbmFtZTogJ1Byb2Nlc3MgWW91VHViZSBWaWRlbycsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5zYWZlU2hvd1VybE1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgWW91VHViZVNldHRpbmdzVGFiKHRoaXMuYXBwLCB7XG4gICAgICAgICAgICBwbHVnaW46IHRoaXMsXG4gICAgICAgICAgICBvblNldHRpbmdzQ2hhbmdlOiB0aGlzLmhhbmRsZVNldHRpbmdzQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYW51cFVJRWxlbWVudHMoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnJpYmJvbkljb24pIHtcbiAgICAgICAgICAgIHRoaXMucmliYm9uSWNvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMucmliYm9uSWNvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2FmZVNob3dVcmxNb2RhbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYWZlT3BlcmF0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BlbllvdVR1YmVVcmxNb2RhbCgpO1xuICAgICAgICB9LCAnU2hvdyBVUkwgTW9kYWwnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNhZmVPcGVyYXRpb248VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LCBvcGVyYXRpb25OYW1lOiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gICAgICAgIGlmICh0aGlzLmlzVW5sb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ1dhcm5pbmcoYEF0dGVtcHRlZCAke29wZXJhdGlvbk5hbWV9IGR1cmluZyBwbHVnaW4gdW5sb2FkIC0gc2tpcHBpbmdgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3BJZCA9ICsrdGhpcy5vcGVyYXRpb25Db3VudDtcbiAgICAgICAgdGhpcy5sb2dJbmZvKGBTdGFydGluZyBvcGVyYXRpb24gJHtvcElkfTogJHtvcGVyYXRpb25OYW1lfWApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMubG9nSW5mbyhgQ29tcGxldGVkIG9wZXJhdGlvbiAke29wSWR9OiAke29wZXJhdGlvbk5hbWV9YCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcihgRmFpbGVkIG9wZXJhdGlvbiAke29wSWR9OiAke29wZXJhdGlvbk5hbWV9YCwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgb3BlcmF0aW9uTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbllvdVR1YmVVcmxNb2RhbCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNVbmxvYWRpbmcpIHtcbiAgICAgICAgICAgIENvbmZsaWN0UHJldmVudGlvbi5sb2coJ1BsdWdpbiBpcyB1bmxvYWRpbmcsIGlnbm9yaW5nIG1vZGFsIHJlcXVlc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIENvbmZsaWN0UHJldmVudGlvbi5zYWZlT3BlcmF0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIG5ldyBZb3VUdWJlVXJsTW9kYWwodGhpcy5hcHAsIHtcbiAgICAgICAgICAgICAgICBvblByb2Nlc3M6IHRoaXMucHJvY2Vzc1lvdVR1YmVWaWRlby5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uT3BlbkZpbGU6IHRoaXMub3BlbkZpbGVCeVBhdGguYmluZCh0aGlzKVxuICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICB9LCAnWW91VHViZSBVUkwgTW9kYWwnKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5oYW5kbGUoZXJyb3IgYXMgRXJyb3IsICdPcGVuaW5nIFlvdVR1YmUgVVJMIG1vZGFsJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1lvdVR1YmVWaWRlbyh1cmw6IHN0cmluZywgZm9ybWF0OiBPdXRwdXRGb3JtYXQgPSAnZGV0YWlsZWQtZ3VpZGUnKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNVbmxvYWRpbmcpIHtcbiAgICAgICAgICAgIENvbmZsaWN0UHJldmVudGlvbi5sb2coJ1BsdWdpbiBpcyB1bmxvYWRpbmcsIGNhbmNlbGxpbmcgdmlkZW8gcHJvY2Vzc2luZycpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbHVnaW4gaXMgc2h1dHRpbmcgZG93bicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29uZmxpY3RQcmV2ZW50aW9uLnNhZmVPcGVyYXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbmV3IE5vdGljZShNRVNTQUdFUy5QUk9DRVNTSU5HKTtcblxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IFZhbGlkYXRpb25VdGlscy52YWxpZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZ3VyYXRpb24gaW52YWxpZDogJHt2YWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB5b3V0dWJlU2VydmljZSA9IHRoaXMuc2VydmljZUNvbnRhaW5lciEudmlkZW9TZXJ2aWNlO1xuICAgICAgICAgICAgY29uc3QgYWlTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlQ29udGFpbmVyIS5haVNlcnZpY2U7XG4gICAgICAgICAgICBjb25zdCBmaWxlU2VydmljZSA9IHRoaXMuc2VydmljZUNvbnRhaW5lciEuZmlsZVNlcnZpY2U7XG4gICAgICAgICAgICBjb25zdCBwcm9tcHRTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlQ29udGFpbmVyIS5wcm9tcHRTZXJ2aWNlO1xuXG4gICAgICAgICAgICBjb25zdCB2aWRlb0lkID0geW91dHViZVNlcnZpY2UuZXh0cmFjdFZpZGVvSWQodXJsKTtcbiAgICAgICAgICAgIGlmICghdmlkZW9JZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNRVNTQUdFUy5FUlJPUlMuVklERU9fSURfRVhUUkFDVElPTik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHZpZGVvRGF0YSA9IGF3YWl0IHlvdXR1YmVTZXJ2aWNlLmdldFZpZGVvRGF0YSh2aWRlb0lkKTtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHByb21wdFNlcnZpY2UuY3JlYXRlQW5hbHlzaXNQcm9tcHQodmlkZW9EYXRhLCB1cmwsIGZvcm1hdCk7XG4gICAgICAgICAgICBjb25zdCBhaVJlc3BvbnNlID0gYXdhaXQgYWlTZXJ2aWNlLnByb2Nlc3MocHJvbXB0KTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSBwcm9tcHRTZXJ2aWNlLnByb2Nlc3NBSVJlc3BvbnNlKFxuICAgICAgICAgICAgICAgIGFpUmVzcG9uc2UuY29udGVudCxcbiAgICAgICAgICAgICAgICBhaVJlc3BvbnNlLnByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIGFpUmVzcG9uc2UubW9kZWwsXG4gICAgICAgICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgICAgICAgIHZpZGVvRGF0YSxcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgZmlsZVNlcnZpY2Uuc2F2ZVRvRmlsZShcbiAgICAgICAgICAgICAgICB2aWRlb0RhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLm91dHB1dFBhdGhcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoTUVTU0FHRVMuU1VDQ0VTUyh2aWRlb0RhdGEudGl0bGUpKTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlUGF0aDtcbiAgICAgICAgfSwgJ1lvdVR1YmUgVmlkZW8gUHJvY2Vzc2luZycpO1xuXG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIFlvdVR1YmUgdmlkZW8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvcGVuRmlsZUJ5UGF0aChmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuUGF0aCA9IGZpbGVQYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IGZpbGVQYXRoLnN1YnN0cmluZygxKSA6IGZpbGVQYXRoO1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjbGVhblBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoIWZpbGUgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlIG5vdCBmb3VuZCBhdCBwYXRoOiAke2NsZWFuUGF0aH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5vcGVuRmlsZUluTmV3VGFiKGZpbGUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgJ09wZW5pbmcgZmlsZSBieSBwYXRoJyk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb3BlbkZpbGVJbk5ld1RhYihmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKSBhcyBXb3Jrc3BhY2VMZWFmO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHVEODNEXHVEQ0MyIE9wZW5lZDogJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGN1cnJlbnRMZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1RDgzRFx1RENDMiBPcGVuZWQ6ICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgICAgICAgICAgIEVycm9ySGFuZGxlci5oYW5kbGUoZmFsbGJhY2tFcnJvciBhcyBFcnJvciwgJ09wZW5pbmcgZmlsZSBpbiBjdXJyZW50IHRhYicpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5vdGUgc2F2ZWQgYXMgXCIke2ZpbGUubmFtZX1cIiBidXQgY291bGQgbm90IGF1dG8tb3Blbi4gUGxlYXNlIG9wZW4gbWFudWFsbHkuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dQZXJzaXN0ZW50U2F2ZUNvbmZpcm1hdGlvbihmaWxlOiBURmlsZSk6IHZvaWQge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgU2F2ZUNvbmZpcm1hdGlvbk1vZGFsKHRoaXMuYXBwLCBmaWxlLCAoc2hvdWxkT3BlbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5vcGVuRmlsZUluTmV3VGFiKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgJ1Nob3dpbmcgc2F2ZSBjb25maXJtYXRpb24nKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpbGUgc2F2ZWQ6ICR7ZmlsZS5uYW1lfS4gQ2xpY2sgdG8gb3Blbi5gLCAwKS5ub3RpY2VFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5vcGVuRmlsZUluTmV3VGFiKGZpbGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlU2V0dGluZ3NDaGFuZ2UobmV3U2V0dGluZ3M6IFlvdVR1YmVQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4ubmV3U2V0dGluZ3MgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlcnZpY2VDb250YWluZXI/LnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgJ1NldHRpbmdzIHVwZGF0ZScpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgZ2V0U2VydmljZUNvbnRhaW5lcigpOiBTZXJ2aWNlQ29udGFpbmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZUNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvZ0luZm8obWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIENvbmZsaWN0UHJldmVudGlvbi5sb2coYFtJTkZPXSAke21lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2dXYXJuaW5nKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBDb25mbGljdFByZXZlbnRpb24ubG9nKGBbV0FSTl0gJHttZXNzYWdlfWAsICd3YXJuJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2dFcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgICAgICBDb25mbGljdFByZXZlbnRpb24ubG9nKGBbRVJST1JdICR7bWVzc2FnZX06ICR7ZXJyb3IubWVzc2FnZX1gLCAnZXJyb3InKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBDb25mbGljdCBwcmV2ZW50aW9uIHV0aWxpdGllcyBmb3IgWW91VHViZSBQcm9jZXNzb3IgUGx1Z2luXG4gKiBEZXNpZ25lZCB0byBwcmV2ZW50IGNvbmZsaWN0cyB3aXRoIG90aGVyIE9ic2lkaWFuIHBsdWdpbnNcbiAqL1xuXG5leHBvcnQgY2xhc3MgQ29uZmxpY3RQcmV2ZW50aW9uIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBQTFVHSU5fSUQgPSAneW91dHViZS1jbGlwcGVyJztcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDU1NfUFJFRklYID0gJ3l0Yyc7XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYW5vdGhlciBwbHVnaW4gbWlnaHQgYmUgY29uZmxpY3RpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tGb3JQb3RlbnRpYWxDb25mbGljdHMoKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBXZWJDbGlwcGVyLWxpa2UgcGx1Z2luc1xuICAgICAgICBjb25zdCBzdXNwaWNpb3VzRWxlbWVudHMgPSBbXG4gICAgICAgICAgICAnZGl2W2RhdGEtcGx1Z2luPVwid2ViLWNsaXBwZXJcIl0nLFxuICAgICAgICAgICAgJy53ZWItY2xpcHBlci1tb2RhbCcsXG4gICAgICAgICAgICAnLmNsaXBwZXItYnV0dG9uJyxcbiAgICAgICAgICAgICdbaWQqPVwiY2xpcHBlclwiXScsXG4gICAgICAgICAgICAnW2NsYXNzKj1cImNsaXBcIl0nXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBzdXNwaWNpb3VzRWxlbWVudHMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKGBEZXRlY3RlZCBwb3RlbnRpYWwgcGx1Z2luIGNvbmZsaWN0OiAke3NlbGVjdG9yfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB3YXJuaW5ncztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWRkIGNvbmZsaWN0IHByZXZlbnRpb24gYXR0cmlidXRlcyB0byBhbiBlbGVtZW50XG4gICAgICovXG4gICAgc3RhdGljIG1hcmtFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCB0eXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGx1Z2luJywgdGhpcy5QTFVHSU5fSUQpO1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS15dGMtdHlwZScsIHR5cGUpO1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKGAke3RoaXMuQ1NTX1BSRUZJWH0tJHt0eXBlfWApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY29uZmxpY3QgcHJldmVudGlvbiBhdHRyaWJ1dGVzXG4gICAgICovXG4gICAgc3RhdGljIHVubWFya0VsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGx1Z2luJyk7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXl0Yy10eXBlJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgYWxsIGNsYXNzZXMgc3RhcnRpbmcgd2l0aCBvdXIgcHJlZml4XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICAgICAgY2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgodGhpcy5DU1NfUFJFRklYKSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5hbWVzcGFjZWQgSUQgdG8gcHJldmVudCBjb25mbGljdHNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlVW5pcXVlSWQoYmFzZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuQ1NTX1BSRUZJWH0tJHtiYXNlfS0ke0RhdGUubm93KCl9YDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAgYWxsIHBsdWdpbiBlbGVtZW50cyBmcm9tIERPTVxuICAgICAqL1xuICAgIHN0YXRpYyBjbGVhbnVwQWxsRWxlbWVudHMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtcGx1Z2luPVwiJHt0aGlzLlBMVUdJTl9JRH1cIl1gKTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVubWFya0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgc2FmZSBzdG9yYWdlIGtleSB3aXRoIG5hbWVzcGFjZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRTdG9yYWdlS2V5KGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuUExVR0lOX0lEfS0ke2tleX1gO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBMb2cgcGx1Z2luIGFjdGl2aXR5IHdpdGggbmFtZXNwYWNlXG4gICAgICovXG4gICAgc3RhdGljIGxvZyhtZXNzYWdlOiBzdHJpbmcsIGxldmVsOiAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InID0gJ2luZm8nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IGBbJHt0aGlzLlBMVUdJTl9JRH1dICR7dGltZXN0YW1wfSAtICR7bWVzc2FnZX1gO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICAgICAgY2FzZSAnd2Fybic6XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGxvZ01lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobG9nTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZ01lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHBsdWdpbiBpcyBzYWZlIHRvIG9wZXJhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNTYWZlVG9PcGVyYXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIHNhZmUgc3RhdGUgdG8gb3BlcmF0ZVxuICAgICAgICBjb25zdCBjb25mbGljdHMgPSB0aGlzLmNoZWNrRm9yUG90ZW50aWFsQ29uZmxpY3RzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9nKGBQb3RlbnRpYWwgY29uZmxpY3RzIGRldGVjdGVkOiAke2NvbmZsaWN0cy5qb2luKCcsICcpfWAsICd3YXJuJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBXcmFwIGFzeW5jIG9wZXJhdGlvbnMgd2l0aCBjb25mbGljdCBjaGVja2luZ1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBzYWZlT3BlcmF0aW9uPFQ+KFxuICAgICAgICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IHN0cmluZ1xuICAgICk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FmZVRvT3BlcmF0ZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhgU2tpcHBpbmcgJHtvcGVyYXRpb25OYW1lfSBkdWUgdG8gcG90ZW50aWFsIGNvbmZsaWN0c2AsICd3YXJuJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMubG9nKGBTdGFydGluZyAke29wZXJhdGlvbk5hbWV9YCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMubG9nKGBDb21wbGV0ZWQgJHtvcGVyYXRpb25OYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKGBFcnJvciBpbiAke29wZXJhdGlvbk5hbWV9OiAke2Vycm9yfWAsICdlcnJvcicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiBVc2VyLWZhY2luZyBtZXNzYWdlcyBhbmQgbm90aWZpY2F0aW9uc1xuICovXG5cbmV4cG9ydCBjb25zdCBNRVNTQUdFUyA9IHtcbiAgICBQUk9DRVNTSU5HOiAnUHJvY2Vzc2luZyBZb3VUdWJlIHZpZGVvLi4uJyxcbiAgICBTVUNDRVNTOiAodGl0bGU6IHN0cmluZykgPT4gYFN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQ6ICR7dGl0bGV9YCxcbiAgICBPUEVORURfRklMRTogKGZpbGVuYW1lOiBzdHJpbmcpID0+IGBPcGVuZWQ6ICR7ZmlsZW5hbWV9YCxcbiAgICBcbiAgICBFUlJPUlM6IHtcbiAgICAgICAgSU5WQUxJRF9VUkw6ICdJbnZhbGlkIFlvdVR1YmUgVVJMLiBQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIFlvdVR1YmUgdmlkZW8gVVJMIChlLmcuLCBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVZJREVPX0lEKScsXG4gICAgICAgIE1JU1NJTkdfQVBJX0tFWVM6ICdObyB2YWxpZCBHZW1pbmkgb3IgR3JvcSBBUEkga2V5IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgb25lIGluIHBsdWdpbiBzZXR0aW5ncy4nLFxuICAgICAgICBHRU1JTklfSU5WQUxJRF9LRVk6ICdHZW1pbmkgQVBJIGtleSBpcyBpbnZhbGlkIG9yIG1pc3NpbmcuIFBsZWFzZSBjaGVjayB5b3VyIGtleS4nLFxuICAgICAgICBHUk9RX01PREVMX05PVF9GT1VORDogJ0dyb3EgQVBJIGVycm9yOiBNb2RlbCBub3QgZm91bmQgb3IgeW91IGRvIG5vdCBoYXZlIGFjY2Vzcy4gUGxlYXNlIGNoZWNrIHlvdXIgQVBJIGtleSBhbmQgbW9kZWwgbmFtZS4nLFxuICAgICAgICBGRVRDSF9WSURFT19EQVRBOiAoc3RhdHVzOiBudW1iZXIpID0+IGBGYWlsZWQgdG8gZmV0Y2ggdmlkZW8gbWV0YWRhdGE6ICR7c3RhdHVzfWAsXG4gICAgICAgIFNBVkVfRklMRTogKG1lc3NhZ2U6IHN0cmluZykgPT4gYEZhaWxlZCB0byBzYXZlIGZpbGU6ICR7bWVzc2FnZX1gLFxuICAgICAgICBBSV9QUk9DRVNTSU5HOiAobWVzc2FnZTogc3RyaW5nKSA9PiBgQUkgcHJvY2Vzc2luZyBmYWlsZWQ6ICR7bWVzc2FnZX1gLFxuICAgICAgICBGSUxFX05PVF9FWElTVFM6ICdGaWxlIG5vIGxvbmdlciBleGlzdHMnLFxuICAgICAgICBDT1VMRF9OT1RfT1BFTjogKG1lc3NhZ2U6IHN0cmluZykgPT4gYENvdWxkIG5vdCBvcGVuIGZpbGU6ICR7bWVzc2FnZX1gLFxuICAgICAgICBFTlRFUl9VUkw6ICdQbGVhc2UgZW50ZXIgYSBZb3VUdWJlIFVSTCcsXG4gICAgICAgIFZJREVPX0lEX0VYVFJBQ1RJT046ICdDb3VsZCBub3QgZXh0cmFjdCB2aWRlbyBJRCBmcm9tIFVSTC4gUGxlYXNlIGNoZWNrIHRoZSBVUkwgZm9ybWF0LicsXG4gICAgICAgIE5FVFdPUktfRVJST1I6ICdOZXR3b3JrIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4uJ1xuICAgIH0sXG4gICAgXG4gICAgV0FSTklOR1M6IHtcbiAgICAgICAgQ09SU19SRVNUUklDVElPTlM6ICdEZXNjcmlwdGlvbiBub3QgYXZhaWxhYmxlIGR1ZSB0byBDT1JTIHJlc3RyaWN0aW9ucycsXG4gICAgICAgIEVYVFJBQ1RJT05fRkFJTEVEOiAnRGVzY3JpcHRpb24gZXh0cmFjdGlvbiBmYWlsZWQnLFxuICAgICAgICBBVVRPX0VYVFJBQ1RJT046ICdWaWRlbyBkZXNjcmlwdGlvbiBjb3VsZCBub3QgYmUgZXh0cmFjdGVkIGF1dG9tYXRpY2FsbHkuJ1xuICAgIH0sXG4gICAgXG4gICAgTU9EQUxTOiB7XG4gICAgICAgIFlPVVRVQkVfUFJPQ0VTU0VEOiAnWW91VHViZSBWaWRlbyBQcm9jZXNzZWQnLFxuICAgICAgICBDT05GSVJNX09QRU46IChmaWxlbmFtZTogc3RyaW5nKSA9PiBgU3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCBZb3VUdWJlIHZpZGVvIGFuZCBzYXZlZCBhcyBcIiR7ZmlsZW5hbWV9XCIuIFdvdWxkIHlvdSBsaWtlIHRvIG9wZW4gdGhlIG5vdGUgbm93P2AsXG4gICAgICAgIENMT1NFX0NPTkZJUk1BVElPTjogJ0Nsb3NlIHdpdGhvdXQgb3BlbmluZyB0aGUgbm90ZT8nLFxuICAgICAgICBQUk9DRVNTX1ZJREVPOiAnUHJvY2VzcyBZb3VUdWJlIFZpZGVvJyxcbiAgICAgICAgWUVTX09QRU46ICdZZXMsIG9wZW4gbm90ZScsXG4gICAgICAgIE5PX1RIQU5LUzogJ05vLCB0aGFua3MnLFxuICAgICAgICBDQU5DRUw6ICdDYW5jZWwnLFxuICAgICAgICBQUk9DRVNTOiAnUHJvY2VzcydcbiAgICB9LFxuICAgIFxuICAgIFBMQUNFSE9MREVSUzoge1xuICAgICAgICBZT1VUVUJFX1VSTDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9Li4uJyxcbiAgICAgICAgR0VNSU5JX0tFWTogJ0FJemEuLi4nLFxuICAgICAgICBHUk9RX0tFWTogJ2dza18uLi4nLFxuICAgICAgICBPVVRQVVRfUEFUSDogJ1lvdVR1YmUvUHJvY2Vzc2VkIFZpZGVvcydcbiAgICB9XG59IGFzIGNvbnN0O1xuIiwgIi8qKlxuICogSW5wdXQgdmFsaWRhdGlvbiB1dGlsaXRpZXNcbiAqL1xuXG5pbXBvcnQgeyBNRVNTQUdFUyB9IGZyb20gJy4uL2NvbnN0YW50cy9tZXNzYWdlcyc7XG5cbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uVXRpbHMge1xuICAgIC8qKlxuICAgICAqIFlvdVR1YmUgVVJMIHBhdHRlcm5zIGZvciB2YWxpZGF0aW9uIChvcmRlcmVkIGJ5IGZyZXF1ZW5jeSBmb3IgcGVyZm9ybWFuY2UpXG4gICAgICogRW5oYW5jZWQgcGF0dGVybnMgdG8gaGFuZGxlIHZhcmlvdXMgWW91VHViZSBVUkwgZm9ybWF0c1xuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFVSTF9QQVRURVJOUyA9IFtcbiAgICAgICAgLy8gU3RhbmRhcmQgeW91dHViZS5jb20vd2F0Y2g/dj0gZm9ybWF0IChtb3N0IGNvbW1vbilcbiAgICAgICAgLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/eW91dHViZVxcLmNvbVxcL3dhdGNoXFw/dj0oW2EtekEtWjAtOV8tXXsxMX0pKD86Ji4qKT8kLyxcbiAgICAgICAgLy8geW91dHUuYmUgc2hvcnQgZm9ybWF0IChzZWNvbmQgbW9zdCBjb21tb24pXG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pP3lvdXR1XFwuYmVcXC8oW2EtekEtWjAtOV8tXXsxMX0pKD86XFw/LiopPyQvLFxuICAgICAgICAvLyB5b3V0dWJlLmNvbS9lbWJlZCBmb3JtYXRcbiAgICAgICAgLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/eW91dHViZVxcLmNvbVxcL2VtYmVkXFwvKFthLXpBLVowLTlfLV17MTF9KSg/OlxcPy4qKT8kLyxcbiAgICAgICAgLy8geW91dHViZS5jb20vdiBmb3JtYXRcbiAgICAgICAgLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/eW91dHViZVxcLmNvbVxcL3ZcXC8oW2EtekEtWjAtOV8tXXsxMX0pKD86XFw/LiopPyQvLFxuICAgICAgICAvLyBNb2JpbGUgeW91dHViZS5jb20gZm9ybWF0XG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT8oPzptXFwuKT95b3V0dWJlXFwuY29tXFwvd2F0Y2hcXD92PShbYS16QS1aMC05Xy1dezExfSkoPzomLiopPyQvXG4gICAgXTtcblxuICAgIC8vIE1lbW9pemVkIHJlZ2V4IGZvciB2aWRlbyBJRCB2YWxpZGF0aW9uIChob3QgcGF0aCBvcHRpbWl6YXRpb24pXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVklERU9fSURfUkVHRVggPSAvXlthLXpBLVowLTlfLV17MTF9JC87XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVVJMX0NBQ0hFID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZyB8IG51bGw+KCk7XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbiBhbmQgbm9ybWFsaXplIFlvdVR1YmUgVVJMXG4gICAgICovXG4gICAgc3RhdGljIGNsZWFuWW91VHViZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgZXh0cmEgd2hpdGVzcGFjZSBhbmQgbm9ybWFsaXplXG4gICAgICAgIGxldCBjbGVhblVybCA9IHVybC50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgVVJMcyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBjb3B5LXBhc3RlZCB3aXRoIGV4dHJhIGNoYXJhY3RlcnNcbiAgICAgICAgY2xlYW5VcmwgPSBjbGVhblVybC5yZXBsYWNlKC9bXFx1MjAwQi1cXHUyMDBEXFx1RkVGRl0vZywgJycpOyAvLyBSZW1vdmUgemVyby13aWR0aCBjaGFyYWN0ZXJzXG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgaHR0cHM6Ly8gaWYgbWlzc2luZyBwcm90b2NvbFxuICAgICAgICBpZiAoIWNsZWFuVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiAhY2xlYW5Vcmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSkge1xuICAgICAgICAgICAgY2xlYW5VcmwgPSAnaHR0cHM6Ly8nICsgY2xlYW5Vcmw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0IGh0dHAgdG8gaHR0cHMgZm9yIFlvdVR1YmVcbiAgICAgICAgaWYgKGNsZWFuVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly95b3V0dWJlLmNvbScpIHx8IGNsZWFuVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly93d3cueW91dHViZS5jb20nKSkge1xuICAgICAgICAgICAgY2xlYW5VcmwgPSBjbGVhblVybC5yZXBsYWNlKCdodHRwOi8vJywgJ2h0dHBzOi8vJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5Vcmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBZb3VUdWJlIHZpZGVvIElEIGZyb20gVVJMIChtZW1vaXplZCBmb3IgcGVyZm9ybWFuY2UpXG4gICAgICogRW5oYW5jZWQgZXh0cmFjdGlvbiB3aXRoIGJldHRlciBlcnJvciBoYW5kbGluZ1xuICAgICAqL1xuICAgIHN0YXRpYyBleHRyYWN0VmlkZW9JZCh1cmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBjYWNoZSBmaXJzdCAoTygxKSBmb3IgcmVwZWF0ZWQgVVJMcylcbiAgICAgICAgaWYgKHRoaXMuVVJMX0NBQ0hFLmhhcyh1cmwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5VUkxfQ0FDSEUuZ2V0KHVybCkhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xlYW5VcmwgPSB0aGlzLmNsZWFuWW91VHViZVVybCh1cmwpO1xuICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgICAgICAvLyBEaXJlY3QgaW5kZXggYWNjZXNzIGZvciBtb3N0IGNvbW1vbiBwYXR0ZXJuIGZpcnN0IChtaWNyby1vcHRpbWl6YXRpb24pXG4gICAgICAgIGxldCBtYXRjaCA9IGNsZWFuVXJsLm1hdGNoKHRoaXMuVVJMX1BBVFRFUk5TWzBdKTsgLy8gTW9zdCBjb21tb24gcGF0dGVybiBmaXJzdFxuICAgICAgICBpZiAobWF0Y2g/LlsxXSAmJiB0aGlzLlZJREVPX0lEX1JFR0VYLnRlc3QobWF0Y2hbMV0pKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBtYXRjaFsxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHJlbWFpbmluZyBwYXR0ZXJuc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLlVSTF9QQVRURVJOUy5sZW5ndGggJiYgIXJlc3VsdDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBjbGVhblVybC5tYXRjaCh0aGlzLlVSTF9QQVRURVJOU1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoPy5bMV0gJiYgdGhpcy5WSURFT19JRF9SRUdFWC50ZXN0KG1hdGNoWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWNoZSByZXN1bHQgd2l0aCBzaW1wbGUgTFJVIGV2aWN0aW9uXG4gICAgICAgIGlmICh0aGlzLlVSTF9DQUNIRS5zaXplID4gMTAwKSB7XG4gICAgICAgICAgICB0aGlzLlVSTF9DQUNIRS5jbGVhcigpOyAvLyBTaW1wbGUgTFJVIGJ5IGNsZWFyaW5nIHdoZW4gZnVsbFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuVVJMX0NBQ0hFLnNldCh1cmwsIHJlc3VsdCk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGV4dHJhY3QgdmlkZW8gSUQgZnJvbSBVUkw6JywgdXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgWW91VHViZSBVUkwgZm9ybWF0XG4gICAgICovXG4gICAgc3RhdGljIGlzVmFsaWRZb3VUdWJlVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RWaWRlb0lkKHVybCkgIT09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2FuaXRpemUgZmlsZW5hbWUgZm9yIGZpbGUgc3lzdGVtIGNvbXBhdGliaWxpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgc2FuaXRpemVGaWxlbmFtZShmaWxlbmFtZTogc3RyaW5nLCBtYXhMZW5ndGggPSAxMDApOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZmlsZW5hbWVcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAuc3Vic3RyaW5nKDAsIG1heExlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgQVBJIGtleSBmb3JtYXRcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNWYWxpZEFQSUtleShrZXk6IHN0cmluZywgcHJvdmlkZXI6ICdnZW1pbmknIHwgJ2dyb3EnKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICgha2V5IHx8IHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICBjYXNlICdnZW1pbmknOlxuICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3RhcnRzV2l0aCgnQUl6YScpICYmIGtleS5sZW5ndGggPiAxMDtcbiAgICAgICAgICAgIGNhc2UgJ2dyb3EnOlxuICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3RhcnRzV2l0aCgnZ3NrXycpICYmIGtleS5sZW5ndGggPiAxMDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgc2V0dGluZ3MgY29uZmlndXJhdGlvblxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBhbnkpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBjb25zdCB1c2luZ0VudiA9IEJvb2xlYW4oc2V0dGluZ3MudXNlRW52aXJvbm1lbnRWYXJpYWJsZXMpO1xuICAgICAgICBjb25zdCBoYXNEaXJlY3RLZXkgPSB0aGlzLmlzTm9uRW1wdHlTdHJpbmcoc2V0dGluZ3MuZ2VtaW5pQXBpS2V5KSB8fCB0aGlzLmlzTm9uRW1wdHlTdHJpbmcoc2V0dGluZ3MuZ3JvcUFwaUtleSk7XG5cbiAgICAgICAgaWYgKCFoYXNEaXJlY3RLZXkgJiYgIXVzaW5nRW52KSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChNRVNTQUdFUy5FUlJPUlMuTUlTU0lOR19BUElfS0VZUyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc05vbkVtcHR5U3RyaW5nKHNldHRpbmdzLmdlbWluaUFwaUtleSkgJiYgIXRoaXMuaXNWYWxpZEFQSUtleShzZXR0aW5ncy5nZW1pbmlBcGlLZXksICdnZW1pbmknKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0ludmFsaWQgR2VtaW5pIEFQSSBrZXkgZm9ybWF0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc05vbkVtcHR5U3RyaW5nKHNldHRpbmdzLmdyb3FBcGlLZXkpICYmICF0aGlzLmlzVmFsaWRBUElLZXkoc2V0dGluZ3MuZ3JvcUFwaUtleSwgJ2dyb3EnKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0ludmFsaWQgR3JvcSBBUEkga2V5IGZvcm1hdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzaW5nRW52ICYmICF0aGlzLmlzTm9uRW1wdHlTdHJpbmcoc2V0dGluZ3MuZW52aXJvbm1lbnRQcmVmaXgpKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnRW52aXJvbm1lbnQgdmFyaWFibGUgcHJlZml4IGlzIHJlcXVpcmVkIHdoZW4gdXNpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNldHRpbmdzLm91dHB1dFBhdGggfHwgdHlwZW9mIHNldHRpbmdzLm91dHB1dFBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnT3V0cHV0IHBhdGggaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgICAgICAgZXJyb3JzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgZmlsZSBwYXRoXG4gICAgICovXG4gICAgc3RhdGljIGlzVmFsaWRQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHBhdGggPT09ICdzdHJpbmcnICYmIHBhdGgudHJpbSgpLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhhdCBhIHN0cmluZyBpcyBub3QgZW1wdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNOb25FbXB0eVN0cmluZyh2YWx1ZTogYW55KTogdmFsdWUgaXMgc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1bmNhdGUgdGV4dCB0byBzcGVjaWZpZWQgbGVuZ3RoIHdpdGggZWxsaXBzaXNcbiAgICAgKi9cbiAgICBzdGF0aWMgdHJ1bmNhdGVUZXh0KHRleHQ6IHN0cmluZywgbWF4TGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoIC0gMykgKyAnLi4uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbiBIVE1MIGVudGl0aWVzIGFuZCBlc2NhcGUgc2VxdWVuY2VzIGZyb20gdGV4dFxuICAgICAqL1xuICAgIHN0YXRpYyBjbGVhblRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcJy9nLCBcIidcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcdShbMC05YS1mQS1GXXs0fSkvZywgKG1hdGNoLCBjb2RlKSA9PiBcbiAgICAgICAgICAgICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGNvZGUsIDE2KSlcbiAgICAgICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogQ2VudHJhbGl6ZWQgZXJyb3IgaGFuZGxpbmcgdG8gZWxpbWluYXRlIGNvZGUgZHVwbGljYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFcnJvckhhbmRsZXJJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEVycm9ySGFuZGxlciBpbXBsZW1lbnRzIEVycm9ySGFuZGxlckludGVyZmFjZSB7XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGVycm9ycyB3aXRoIGNvbnNpc3RlbnQgbG9nZ2luZyBhbmQgdXNlciBmZWVkYmFja1xuICAgICAqL1xuICAgIHN0YXRpYyBoYW5kbGUoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcsIHNob3dOb3RpY2UgPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGAke2NvbnRleHR9OiAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG93Tm90aWNlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhbiBvcGVyYXRpb24gd2l0aCBhdXRvbWF0aWMgZXJyb3IgaGFuZGxpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgd2l0aEVycm9ySGFuZGxpbmc8VD4oXG4gICAgICAgIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICAgICAgY29udGV4dDogc3RyaW5nLFxuICAgICAgICBzaG93Tm90aWNlID0gdHJ1ZVxuICAgICk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlKGVycm9yIGFzIEVycm9yLCBjb250ZXh0LCBzaG93Tm90aWNlKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICovXG4gICAgc3RhdGljIHdpdGhTeW5jRXJyb3JIYW5kbGluZzxUPihcbiAgICAgICAgb3BlcmF0aW9uOiAoKSA9PiBULFxuICAgICAgICBjb250ZXh0OiBzdHJpbmcsXG4gICAgICAgIHNob3dOb3RpY2UgPSB0cnVlXG4gICAgKTogVCB8IG51bGwge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGUoZXJyb3IgYXMgRXJyb3IsIGNvbnRleHQsIHNob3dOb3RpY2UpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzdGFuZGFyZGl6ZWQgZXJyb3IgZm9yIEFQSSByZXNwb25zZXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlQVBJRXJyb3IoXG4gICAgICAgIHByb3ZpZGVyOiBzdHJpbmcsXG4gICAgICAgIHN0YXR1czogbnVtYmVyLFxuICAgICAgICBzdGF0dXNUZXh0OiBzdHJpbmcsXG4gICAgICAgIGRldGFpbHM/OiBzdHJpbmdcbiAgICApOiBFcnJvciB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtwcm92aWRlcn0gQVBJIGVycm9yOiAke3N0YXR1c30gJHtzdGF0dXNUZXh0fSR7ZGV0YWlscyA/IGAuICR7ZGV0YWlsc31gIDogJyd9YDtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgQVBJIHJlc3BvbnNlIGVycm9ycyB3aXRoIGNvbnNpc3RlbnQgZm9ybWF0XG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGhhbmRsZUFQSUVycm9yKFxuICAgICAgICByZXNwb25zZTogUmVzcG9uc2UsXG4gICAgICAgIHByb3ZpZGVyOiBzdHJpbmcsXG4gICAgICAgIGZhbGxiYWNrTWVzc2FnZT86IHN0cmluZ1xuICAgICk6IFByb21pc2U8bmV2ZXI+IHtcbiAgICAgICAgbGV0IGVycm9yRGV0YWlscyA9IGZhbGxiYWNrTWVzc2FnZSB8fCAnJztcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBlcnJvckRldGFpbHMgPSBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3JEYXRhLm1lc3NhZ2UgfHwgZmFsbGJhY2tNZXNzYWdlIHx8ICcnO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBKU09OIHBhcnNpbmcgZXJyb3JzXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRocm93IHRoaXMuY3JlYXRlQVBJRXJyb3IocHJvdmlkZXIsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgZXJyb3JEZXRhaWxzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSByZXF1aXJlZCBjb25maWd1cmF0aW9uIGFuZCB0aHJvdyBkZXNjcmlwdGl2ZSBlcnJvcnNcbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVDb25maWd1cmF0aW9uKGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55PiwgcmVxdWlyZWRGaWVsZHM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1pc3NpbmcgPSByZXF1aXJlZEZpZWxkcy5maWx0ZXIoZmllbGQgPT4gIWNvbmZpZ1tmaWVsZF0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb246ICR7bWlzc2luZy5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdXNlci1mcmllbmRseSBlcnJvciBtZXNzYWdlIGZvciBjb21tb24gc2NlbmFyaW9zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVVzZXJGcmllbmRseUVycm9yKGVycm9yOiBFcnJvciwgb3BlcmF0aW9uOiBzdHJpbmcpOiBFcnJvciB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgRmFpbGVkIHRvICR7b3BlcmF0aW9ufTogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLy8gSW5zdGFuY2UgbWV0aG9kcyBpbXBsZW1lbnRpbmcgaW50ZXJmYWNlXG4gICAgaGFuZGxlKGVycm9yOiBFcnJvciwgY29udGV4dDogc3RyaW5nLCBzaG93Tm90aWNlID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yLCBjb250ZXh0LCBzaG93Tm90aWNlKTtcbiAgICB9XG5cbiAgICBhc3luYyB3aXRoRXJyb3JIYW5kbGluZzxUPihcbiAgICAgICAgb3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgICAgICBjb250ZXh0OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gICAgICAgIHJldHVybiBFcnJvckhhbmRsZXIud2l0aEVycm9ySGFuZGxpbmcob3BlcmF0aW9uLCBjb250ZXh0KTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBTYXZlIENvbmZpcm1hdGlvbiBNb2RhbFxuICogU2hvd3MgYSBwZXJzaXN0ZW50IGNvbmZpcm1hdGlvbiBkaWFsb2cgd2hlbiBhIGZpbGUgaGFzIGJlZW4gc2F2ZWRcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBURmlsZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFNhdmVDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgb25Db25maXJtOiAoc2hvdWxkT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgb25Db25maXJtOiAoc2hvdWxkT3BlbjogYm9vbGVhbikgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRVhBQ1Qgc3BlY2lmaWNhdGlvbiBmcm9tIHRhc2tzXzEubWQgU3RlcCA1XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTm90ZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseS4gT3BlbiBub3c/JyB9KTtcblxuICAgICAgICAgICAgLy8gQWRkIGJ1dHRvbnMgY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzYXZlLWNvbmZpcm1hdGlvbi1idXR0b25zJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCBidXR0b25zIGFzIHBlciBzcGVjaWZpY2F0aW9uOiBcIk9wZW4gTm90ZVwiIHwgXCJEaXNtaXNzXCJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJ1dHRvbkNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ09wZW4gTm90ZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29uZmlybSh0cnVlKTsgLy8gVXNlciB3YW50cyB0byBvcGVuIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnRGlzbWlzcycpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db25maXJtKGZhbHNlKTsgLy8gVXNlciBkaXNtaXNzZXNcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAvLyBGb2N1cyB0aGUgT3BlbiBOb3RlIGJ1dHRvbiBmb3IgYmV0dGVyIFVYXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVuQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGlmIChvcGVuQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIChvcGVuQnV0dG9uIGFzIEhUTUxFbGVtZW50KS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTYXZlQ29uZmlybWF0aW9uTW9kYWxdIEVycm9yIGluIG9uT3BlbjonLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayBjb250ZW50XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRmlsZSBTYXZlZCcgfSk7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBGaWxlIFwiJHt0aGlzLmZpbGUubmFtZX1cIiBoYXMgYmVlbiBzYXZlZCBzdWNjZXNzZnVsbHkuYCB9KTtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnT0snIH0pLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgaHVtYW4tcmVhZGFibGUgZmlsZSBzaXplXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRGaWxlU2l6ZSgpOiBzdHJpbmcge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuc3RhdCh0aGlzLmZpbGUucGF0aCk7XG4gICAgICAgICAgICBpZiAoc3RhdCAmJiB0eXBlb2Ygc3RhdCA9PT0gJ29iamVjdCcgJiYgJ3NpemUnIGluIHN0YXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBieXRlcyA9IChzdGF0IGFzIGFueSkuc2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZXMgPCAxMDI0KSByZXR1cm4gYCR7Ynl0ZXN9IGJ5dGVzYDtcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZXMgPCAxMDI0ICogMTAyNCkgcmV0dXJuIGAkeyhieXRlcyAvIDEwMjQpLnRvRml4ZWQoMSl9IEtCYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7KGJ5dGVzIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgxKX0gTUJgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gRmlsZSBzaXplIG5vdCBhdmFpbGFibGVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBjdXN0b20gc3R5bGVzIGZvciB0aGUgbW9kYWxcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgQ1NTIGNsYXNzZXMgZm9yIHN0eWxpbmdcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCd5dHAtc2F2ZS1jb25maXJtYXRpb24tbW9kYWwnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBpbmxpbmUgc3R5bGVzIGlmIG5lZWRlZFxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgICAgICAgLnl0cC1zYXZlLWNvbmZpcm1hdGlvbi1tb2RhbCB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA0NTBweDtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDY1MHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2F2ZS1jb25maXJtYXRpb24tbWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDAgMzBweCAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnNhdmUtY29uZmlybWF0aW9uLWZpbGVuYW1lIHtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMWVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zYXZlLWNvbmZpcm1hdGlvbi1sb2NhdGlvbi1jb250YWluZXIsXG4gICAgICAgICAgICAuc2F2ZS1jb25maXJtYXRpb24tc2l6ZS1jb250YWluZXIge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2F2ZS1jb25maXJtYXRpb24tbG9jYXRpb24ge1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2F2ZS1jb25maXJtYXRpb24tc2l6ZSB7XG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtbW9ub3NwYWNlKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnNhdmUtY29uZmlybWF0aW9uLWJ1dHRvbnMge1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2F2ZS1jb25maXJtYXRpb24tYnV0dG9ucyAuc2V0dGluZy1pdGVtIHtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zYXZlLWNvbmZpcm1hdGlvbi1idXR0b25zIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxMDBweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnNhdmUtY29uZmlybWF0aW9uLWJ1dHRvbnMgYnV0dG9uOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICAvKiBPcGVuIEZpbGUgYnV0dG9uIC0gcHJpbWFyeSBhY3Rpb24gKi9cbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zYXZlLWNvbmZpcm1hdGlvbi1idXR0b25zIGJ1dHRvbjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICAvKiBPSyBidXR0b24gLSBzZWNvbmRhcnkgYWN0aW9uICovXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIHJlZmVyZW5jZSB0byBjbGVhbiB1cCBsYXRlclxuICAgICAgICB0aGlzLm1vZGFsRWw/LnNldEF0dHJpYnV0ZSgnZGF0YS1zdHlsZS1pZCcsICd5dHAtc2F2ZS1jb25maXJtYXRpb24tc3R5bGUnKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBZb3VUdWJlIFVSTCBpbnB1dCBtb2RhbCBjb21wb25lbnRcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJhc2VNb2RhbCB9IGZyb20gJy4vYmFzZS1tb2RhbCc7XG5pbXBvcnQgeyBNRVNTQUdFUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9tZXNzYWdlcyc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0aW9uJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0IH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgWW91VHViZVVybE1vZGFsT3B0aW9ucyB7XG4gICAgb25Qcm9jZXNzOiAodXJsOiBzdHJpbmcsIGZvcm1hdDogT3V0cHV0Rm9ybWF0KSA9PiBQcm9taXNlPHN0cmluZz47IC8vIFJldHVybiBmaWxlIHBhdGhcbiAgICBvbk9wZW5GaWxlPzogKGZpbGVQYXRoOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gICAgaW5pdGlhbFVybD86IHN0cmluZztcbn1cblxudHlwZSBTdGVwU3RhdGUgPSAncGVuZGluZycgfCAnYWN0aXZlJyB8ICdjb21wbGV0ZScgfCAnZXJyb3InO1xuXG5leHBvcnQgY2xhc3MgWW91VHViZVVybE1vZGFsIGV4dGVuZHMgQmFzZU1vZGFsIHtcbiAgICBwcml2YXRlIHVybCA9ICcnO1xuICAgIHByaXZhdGUgZm9ybWF0OiBPdXRwdXRGb3JtYXQgPSAnZXhlY3V0aXZlLXN1bW1hcnknO1xuICAgIHByaXZhdGUgaGVhZGVyRWw/OiBIVE1MSGVhZGluZ0VsZW1lbnQ7XG4gICAgcHJpdmF0ZSB1cmxJbnB1dD86IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwYXN0ZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgY2xlYXJCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIHByb2Nlc3NCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIG9wZW5CdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIHRodW1ibmFpbEVsPzogSFRNTEltYWdlRWxlbWVudDtcbiAgICBwcml2YXRlIG1ldGFkYXRhQ29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBmZXRjaEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICBwcml2YXRlIHByb2dyZXNzQ29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwcm9ncmVzc0Jhcj86IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NUZXh0PzogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB2YWxpZGF0aW9uTWVzc2FnZT86IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NTdGVwczogeyBsYWJlbDogc3RyaW5nOyBlbGVtZW50OiBIVE1MTElFbGVtZW50IH1bXSA9IFtdO1xuICAgIHByaXZhdGUgY3VycmVudFN0ZXBJbmRleCA9IDA7XG4gICAgcHJpdmF0ZSBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIHByb2Nlc3NlZEZpbGVQYXRoPzogc3RyaW5nO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbjogZGVib3VuY2VkIHZhbGlkYXRpb25cbiAgICBwcml2YXRlIHZhbGlkYXRpb25UaW1lcj86IG51bWJlcjtcbiAgICBwcml2YXRlIGxhc3RWYWxpZFVybD86IHN0cmluZztcbiAgICBwcml2YXRlIGxhc3RWYWxpZFJlc3VsdD86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIHByaXZhdGUgb3B0aW9uczogWW91VHViZVVybE1vZGFsT3B0aW9uc1xuICAgICkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnVybCA9IG9wdGlvbnMuaW5pdGlhbFVybCB8fCAnJztcbiAgICB9XG5cbiAgICBvbk9wZW4oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY3JlYXRlTW9kYWxDb250ZW50KCk7XG4gICAgICAgIHRoaXMuc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuZm9jdXNVcmxJbnB1dCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBtb2RhbCBjb250ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RhbENvbnRlbnQoKTogdm9pZCB7XG4gICAgdGhpcy5oZWFkZXJFbCA9IHRoaXMuY3JlYXRlSGVhZGVyKE1FU1NBR0VTLk1PREFMUy5QUk9DRVNTX1ZJREVPKTtcbiAgICAgICAgdGhpcy5jcmVhdGVVcmxJbnB1dFNlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGb3JtYXRTZWxlY3Rpb25TZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3Jlc3NTZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBVUkwgaW5wdXQgc2VjdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlVXJsSW5wdXRTZWN0aW9uKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1lvdVR1YmUgVVJMOicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dFJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgaW5wdXRSb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaW5wdXRSb3cuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgICAgIGlucHV0Um93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXJsSW5wdXQgPSB0aGlzLmNyZWF0ZUlucHV0KFxuICAgICAgICAgICAgaW5wdXRSb3csXG4gICAgICAgICAgICAndXJsJyxcbiAgICAgICAgICAgIE1FU1NBR0VTLlBMQUNFSE9MREVSUy5ZT1VUVUJFX1VSTCArICcgKFByZXNzIEVudGVyIHRvIHByb2Nlc3MpJ1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnVybElucHV0LnN0eWxlLmZsZXggPSAnMSc7XG4gICAgICAgIHRoaXMudXJsSW5wdXQuc3R5bGUudHJhbnNpdGlvbiA9ICdib3JkZXItY29sb3IgMC4ycyBlYXNlLCBib3gtc2hhZG93IDAuMnMgZWFzZSc7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhc3RlQnV0dG9uID0gdGhpcy5jcmVhdGVJbmxpbmVCdXR0b24oaW5wdXRSb3csICdQYXN0ZScsICgpID0+IHtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5oYW5kbGVQYXN0ZUZyb21DbGlwYm9hcmQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdGhpcy5jcmVhdGVJbmxpbmVCdXR0b24oaW5wdXRSb3csICdDbGVhcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xlYXJVcmwoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcm92aWRlZFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluaXRpYWxVcmwpIHtcbiAgICAgICAgICAgIHRoaXMudXJsSW5wdXQudmFsdWUgPSB0aGlzLm9wdGlvbnMuaW5pdGlhbFVybDtcbiAgICAgICAgICAgIHRoaXMudXJsID0gdGhpcy5vcHRpb25zLmluaXRpYWxVcmw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgVVJMIHN0YXRlIG9uIGlucHV0XG4gICAgICAgIHRoaXMudXJsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy51cmwgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlLnN0eWxlLm1hcmdpblRvcCA9ICc2cHgnO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlLnN0eWxlLmZvbnRTaXplID0gJzAuODVyZW0nO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZSgnUGFzdGUgYSBZb3VUdWJlIGxpbmsgdG8gYmVnaW4gcHJvY2Vzc2luZy4nLCAnaW5mbycpO1xuXG4gICAgLy8gUHJldmlldyBjb250YWluZXIgKHRodW1ibmFpbCArIG1ldGFkYXRhKVxuICAgIGNvbnN0IHByZXZpZXcgPSBjb250YWluZXIuY3JlYXRlRGl2KCk7XG4gICAgcHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHByZXZpZXcuc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgIHByZXZpZXcuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHByZXZpZXcuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG5cbiAgICB0aGlzLnRodW1ibmFpbEVsID0gcHJldmlldy5jcmVhdGVFbCgnaW1nJyk7XG4gICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS53aWR0aCA9ICcxMjBweCc7XG4gICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS5oZWlnaHQgPSAnNjhweCc7XG4gICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS5vYmplY3RGaXQgPSAnY292ZXInO1xuICAgIHRoaXMudGh1bWJuYWlsRWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdGhpcy5tZXRhZGF0YUNvbnRhaW5lciA9IHByZXZpZXcuY3JlYXRlRGl2KCk7XG4gICAgdGhpcy5tZXRhZGF0YUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMubWV0YWRhdGFDb250YWluZXIuc3R5bGUuZm9udFNpemUgPSAnMC45cmVtJztcbiAgICB0aGlzLm1ldGFkYXRhQ29udGFpbmVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG4gICAgdGhpcy5tZXRhZGF0YUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd5dC1wcmV2aWV3LXRpdGxlJyB9KTtcbiAgICB0aGlzLm1ldGFkYXRhQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3l0LXByZXZpZXctY2hhbm5lbCcgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRVcmxJbnB1dFN0YXRlKCdpZGxlJyk7XG4gICAgICAgIHRoaXMudXBkYXRlUXVpY2tBY3Rpb25zU3RhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgZm9ybWF0IHNlbGVjdGlvbiBzZWN0aW9uIHdpdGggcmFkaW8gYnV0dG9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlRm9ybWF0U2VsZWN0aW9uU2VjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdPdXRwdXQgRm9ybWF0OicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByYWRpb0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgcmFkaW9Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgICAgIHJhZGlvQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIHJhZGlvQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcyMHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIEV4ZWN1dGl2ZSByYWRpbyBidXR0b25cbiAgICAgICAgY29uc3QgZXhlY3V0aXZlQ29udGFpbmVyID0gcmFkaW9Db250YWluZXIuY3JlYXRlRGl2KCk7XG4gICAgICAgIGV4ZWN1dGl2ZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBleGVjdXRpdmVDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBleGVjdXRpdmVDb250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleGVjdXRpdmVSYWRpbyA9IGV4ZWN1dGl2ZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnKTtcbiAgICAgICAgZXhlY3V0aXZlUmFkaW8udHlwZSA9ICdyYWRpbyc7XG4gICAgICAgIGV4ZWN1dGl2ZVJhZGlvLm5hbWUgPSAnb3V0cHV0Rm9ybWF0JztcbiAgICAgICAgZXhlY3V0aXZlUmFkaW8udmFsdWUgPSAnZXhlY3V0aXZlLXN1bW1hcnknO1xuICAgICAgICBleGVjdXRpdmVSYWRpby5pZCA9ICdleGVjdXRpdmUtcmFkaW8nO1xuICAgICAgICBleGVjdXRpdmVSYWRpby5jaGVja2VkID0gdGhpcy5mb3JtYXQgPT09ICdleGVjdXRpdmUtc3VtbWFyeSc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleGVjdXRpdmVMYWJlbCA9IGV4ZWN1dGl2ZUNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnKTtcbiAgICAgICAgZXhlY3V0aXZlTGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZXhlY3V0aXZlLXJhZGlvJyk7XG4gICAgICAgIGV4ZWN1dGl2ZUxhYmVsLnRleHRDb250ZW50ID0gJ0V4ZWN1dGl2ZSc7XG4gICAgICAgIGV4ZWN1dGl2ZUxhYmVsLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgXG4gICAgICAgIC8vIFR1dG9yaWFsIHJhZGlvIGJ1dHRvblxuICAgICAgICBjb25zdCB0dXRvcmlhbENvbnRhaW5lciA9IHJhZGlvQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICB0dXRvcmlhbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICB0dXRvcmlhbENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIHR1dG9yaWFsQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdHV0b3JpYWxSYWRpbyA9IHR1dG9yaWFsQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcpO1xuICAgICAgICB0dXRvcmlhbFJhZGlvLnR5cGUgPSAncmFkaW8nO1xuICAgICAgICB0dXRvcmlhbFJhZGlvLm5hbWUgPSAnb3V0cHV0Rm9ybWF0JztcbiAgICAgICAgdHV0b3JpYWxSYWRpby52YWx1ZSA9ICdkZXRhaWxlZC1ndWlkZSc7XG4gICAgICAgIHR1dG9yaWFsUmFkaW8uaWQgPSAndHV0b3JpYWwtcmFkaW8nO1xuICAgICAgICB0dXRvcmlhbFJhZGlvLmNoZWNrZWQgPSB0aGlzLmZvcm1hdCA9PT0gJ2RldGFpbGVkLWd1aWRlJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHR1dG9yaWFsTGFiZWwgPSB0dXRvcmlhbENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnKTtcbiAgICAgICAgdHV0b3JpYWxMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICd0dXRvcmlhbC1yYWRpbycpO1xuICAgICAgICB0dXRvcmlhbExhYmVsLnRleHRDb250ZW50ID0gJ1R1dG9yaWFsJztcbiAgICAgICAgdHV0b3JpYWxMYWJlbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIGV4ZWN1dGl2ZVJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICdleGVjdXRpdmUtc3VtbWFyeSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdHV0b3JpYWxSYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSAnZGV0YWlsZWQtZ3VpZGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcHJvZ3Jlc3Mgc2VjdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlUHJvZ3Jlc3NTZWN0aW9uKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzE2cHgnO1xuICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9ncmVzcyB0ZXh0XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUZXh0ID0gdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc1RleHQuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAnNTAwJztcbiAgICAgICAgdGhpcy5wcm9ncmVzc1RleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgdGhpcy5wcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSAnUHJvY2Vzc2luZyB2aWRlby4uLic7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9ncmVzcyBiYXIgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzQmFyQ29udGFpbmVyID0gdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgcHJvZ3Jlc3NCYXJDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHByb2dyZXNzQmFyQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICc2cHgnO1xuICAgICAgICBwcm9ncmVzc0JhckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgcHJvZ3Jlc3NCYXJDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7XG4gICAgICAgIHByb2dyZXNzQmFyQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9ncmVzcyBiYXJcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhciA9IHByb2dyZXNzQmFyQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4JztcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICcwJSc7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICd3aWR0aCAwLjNzIGVhc2UnO1xuXG4gICAgICAgIGNvbnN0IHN0ZXBMaXN0ID0gdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVFbCgnb2wnKTtcbiAgICAgICAgc3RlcExpc3Quc3R5bGUubWFyZ2luVG9wID0gJzEycHgnO1xuICAgICAgICBzdGVwTGlzdC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcyMHB4JztcbiAgICAgICAgc3RlcExpc3Quc3R5bGUuZm9udFNpemUgPSAnMC45cmVtJztcbiAgICAgICAgc3RlcExpc3Quc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcblxuICAgICAgICBjb25zdCBsYWJlbHMgPSBbXG4gICAgICAgICAgICAnVmFsaWRhdGUgVVJMJyxcbiAgICAgICAgICAgICdGZXRjaCB2aWRlbyBpbmZvJyxcbiAgICAgICAgICAgICdSdW4gQUkgYW5hbHlzaXMnLFxuICAgICAgICAgICAgJ1NhdmUgbm90ZSdcbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLnByb2dyZXNzU3RlcHMgPSBsYWJlbHMubWFwKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHN0ZXBMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnNHB4JztcbiAgICAgICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSBgXHUyNUNCICR7bGFiZWx9YDtcbiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsLCBlbGVtZW50OiBpdGVtIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhY3Rpb24gYnV0dG9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlQWN0aW9uQnV0dG9ucygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jcmVhdGVCdXR0b25Db250YWluZXIoKTtcblxuICAgICAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uKFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgTUVTU0FHRVMuTU9EQUxTLkNBTkNFTCxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5jbG9zZSgpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUHJvY2VzcyBidXR0b25cbiAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBNRVNTQUdFUy5NT0RBTFMuUFJPQ0VTUyxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAoKSA9PiB0aGlzLmhhbmRsZVByb2Nlc3MoKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIE9wZW4gYnV0dG9uIChoaWRkZW4gaW5pdGlhbGx5KVxuICAgICAgICB0aGlzLm9wZW5CdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgICdPcGVuIE5vdGUnLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICgpID0+IHRoaXMuaGFuZGxlT3BlbkZpbGUoKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm9wZW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NCdXR0b25TdGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBldmVudCBoYW5kbGVyc1xuICAgICAqL1xuICAgIHByaXZhdGUgc2V0dXBFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHVwS2V5SGFuZGxlcnMoXG4gICAgICAgICAgICAoKSA9PiB0aGlzLmhhbmRsZVByb2Nlc3MoKSxcbiAgICAgICAgICAgICgpID0+IHRoaXMuY2xvc2UoKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvY3VzIG9uIFVSTCBpbnB1dFxuICAgICAqL1xuICAgIHByaXZhdGUgZm9jdXNVcmxJbnB1dCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudXJsSW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtZW50KHRoaXMudXJsSW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHByb2Nlc3MgYnV0dG9uIGVuYWJsZWQgc3RhdGUgKG9wdGltaXplZCB3aXRoIGRlYm91bmNpbmcgYW5kIG1lbW9pemF0aW9uKVxuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlUHJvY2Vzc0J1dHRvblN0YXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMucHJvY2Vzc0J1dHRvbikgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJpbW1lZFVybCA9IHRoaXMudXJsLnRyaW0oKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9jZXNzQnV0dG9uICYmIHRoaXMucHJvY2Vzc0J1dHRvbi50ZXh0Q29udGVudCAhPT0gTUVTU0FHRVMuTU9EQUxTLlBST0NFU1MgJiYgdHJpbW1lZFVybC5sZW5ndGggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLnRleHRDb250ZW50ID0gTUVTU0FHRVMuTU9EQUxTLlBST0NFU1M7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1lbW9pemUgdmFsaWRhdGlvbiByZXN1bHQgZm9yIHNhbWUgVVJMIChhdm9pZCByZXBlYXRlZCBleHBlbnNpdmUgdmFsaWRhdGlvbilcbiAgICAgICAgaWYgKHRyaW1tZWRVcmwgPT09IHRoaXMubGFzdFZhbGlkVXJsKSB7XG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy5sYXN0VmFsaWRSZXN1bHQhO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLmRpc2FibGVkID0gIWlzVmFsaWQ7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NCdXR0b24uc3R5bGUub3BhY2l0eSA9IGlzVmFsaWQgPyAnMScgOiAnMC41JztcbiAgICAgICAgICAgIGlmICh0cmltbWVkVXJsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbk1lc3NhZ2UoJ1Bhc3RlIGEgWW91VHViZSBsaW5rIHRvIGJlZ2luIHByb2Nlc3NpbmcuJywgJ2luZm8nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVybElucHV0U3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZShcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA/ICdSZWFkeSB0byBwcm9jZXNzIHRoaXMgdmlkZW8uJyA6ICdFbnRlciBhIHZhbGlkIFlvdVR1YmUgdmlkZW8gVVJMLicsXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPyAnc3VjY2VzcycgOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVybElucHV0U3RhdGUoaXNWYWxpZCA/ICd2YWxpZCcgOiAnaW52YWxpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEZWJvdW5jZWQgdmFsaWRhdGlvbiBmb3IgYmV0dGVyIFVYIGFuZCBwZXJmb3JtYW5jZVxuICAgICAgICBpZiAodGhpcy52YWxpZGF0aW9uVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnZhbGlkYXRpb25UaW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMudmFsaWRhdGlvblRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IFZhbGlkYXRpb25VdGlscy5pc1ZhbGlkWW91VHViZVVybCh0cmltbWVkVXJsKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbGlkVXJsID0gdHJpbW1lZFVybDtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbGlkUmVzdWx0ID0gaXNWYWxpZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uIS5kaXNhYmxlZCA9ICFpc1ZhbGlkO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uIS5zdHlsZS5vcGFjaXR5ID0gaXNWYWxpZCA/ICcxJyA6ICcwLjUnO1xuXG4gICAgICAgICAgICBpZiAodHJpbW1lZFVybC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbGlkYXRpb25NZXNzYWdlKCdQYXN0ZSBhIFlvdVR1YmUgbGluayB0byBiZWdpbiBwcm9jZXNzaW5nLicsICdpbmZvJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVcmxJbnB1dFN0YXRlKCdpZGxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbk1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPyAnUmVhZHkgdG8gcHJvY2VzcyB0aGlzIHZpZGVvLicgOiAnRW50ZXIgYSB2YWxpZCBZb3VUdWJlIHZpZGVvIFVSTC4nLFxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVcmxJbnB1dFN0YXRlKGlzVmFsaWQgPyAndmFsaWQnIDogJ2ludmFsaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlUXVpY2tBY3Rpb25zU3RhdGUoKTtcbiAgICAgICAgICAgICAgICAvLyBJZiBVUkwgaXMgdmFsaWQsIGZldGNoIGEgbGlnaHR3ZWlnaHQgcHJldmlldyAodGh1bWJuYWlsICsgdGl0bGUpXG4gICAgICAgICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLm1heWJlRmV0Y2hQcmV2aWV3KHRyaW1tZWRVcmwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDApOyAvLyAzMDBtcyBkZWJvdW5jZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIFVSTCBpbnB1dCAoc2ltcGxpZmllZCAtIHVzZWQgYnkgZGVib3VuY2VkIGhhbmRsZXIpXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1VybFZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gVmFsaWRhdGlvblV0aWxzLmlzVmFsaWRZb3VUdWJlVXJsKHRoaXMudXJsLnRyaW0oKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHByb2Nlc3MgYnV0dG9uIGNsaWNrXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVQcm9jZXNzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB0cmltbWVkVXJsID0gdGhpcy51cmwudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0cmltbWVkVXJsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKE1FU1NBR0VTLkVSUk9SUy5FTlRFUl9VUkwpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c1VybElucHV0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNVcmxWYWxpZCgpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKE1FU1NBR0VTLkVSUk9SUy5JTlZBTElEX1VSTCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVXJsSW5wdXQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNob3dQcm9jZXNzaW5nU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RlcFN0YXRlKDAsICdhY3RpdmUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RhcnQgcHJvY2Vzc2luZyB3aXRoIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoMjAsICdWYWxpZGF0aW5nIFlvdVR1YmUgVVJMLi4uJyk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0ZXBTdGF0ZSgwLCAnY29tcGxldGUnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RlcFN0YXRlKDEsICdhY3RpdmUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyg0MCwgJ0V4dHJhY3RpbmcgdmlkZW8gZGF0YS4uLicpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGVwU3RhdGUoMSwgJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICB0aGlzLnNldFN0ZXBTdGF0ZSgyLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoNjAsICdBbmFseXppbmcgdmlkZW8gY29udGVudC4uLicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBhY3R1YWwgcHJvY2Vzc2luZyBmdW5jdGlvblxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLm9wdGlvbnMub25Qcm9jZXNzKHRyaW1tZWRVcmwsIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RlcFN0YXRlKDIsICdjb21wbGV0ZScpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGVwU3RhdGUoMywgJ2FjdGl2ZScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKDgwLCAnR2VuZXJhdGluZyBub3RlLi4uJyk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoMTAwLCAnQ29tcGxldGUhJyk7XG4gICAgICAgICAgICB0aGlzLnNldFN0ZXBTdGF0ZSgzLCAnY29tcGxldGUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGZpbGUgcGF0aCBhbmQgc2hvdyBjb21wbGV0aW9uIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NlZEZpbGVQYXRoID0gZmlsZVBhdGg7XG4gICAgICAgICAgICB0aGlzLnNob3dDb21wbGV0aW9uU3RhdGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5mbGFnQWN0aXZlU3RlcEFzRXJyb3IoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yU3RhdGUoZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgJ1lvdVR1YmUgVVJMIHByb2Nlc3NpbmcnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBvcGVuIGZpbGUgYnV0dG9uIGNsaWNrXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVPcGVuRmlsZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkRmlsZVBhdGggJiYgdGhpcy5vcHRpb25zLm9uT3BlbkZpbGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLm9uT3BlbkZpbGUodGhpcy5wcm9jZXNzZWRGaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yIGFzIEVycm9yLCAnT3BlbmluZyBmaWxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHByb2Nlc3Npbmcgc3RhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dQcm9jZXNzaW5nU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZSgnUHJvY2Vzc2luZyB2aWRlby4gVGhpcyBtYXkgdGFrZSBhIG1vbWVudC4uLicsICdpbmZvJyk7XG4gICAgICAgIHRoaXMucmVzZXRQcm9ncmVzc1N0ZXBzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IHByb2dyZXNzIHNlY3Rpb25cbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc2FibGUgaW5wdXRzIGFuZCBwcm9jZXNzIGJ1dHRvblxuICAgICAgICBpZiAodGhpcy51cmxJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy51cmxJbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0J1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0J1dHRvbi50ZXh0Q29udGVudCA9ICdQcm9jZXNzaW5nLi4uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGVuQnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0VXJsSW5wdXRTdGF0ZSgnaWRsZScpO1xuICAgICAgICB0aGlzLnVwZGF0ZVF1aWNrQWN0aW9uc1N0YXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBjb21wbGV0aW9uIHN0YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG93Q29tcGxldGlvblN0YXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy51cmxJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy51cmxJbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLnRleHRDb250ZW50ID0gJ1Byb2Nlc3MgQW5vdGhlcic7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3BlbkJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckVsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckVsLnRleHRDb250ZW50ID0gJ1x1MjcwNSBWaWRlbyBQcm9jZXNzZWQgU3VjY2Vzc2Z1bGx5ISc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFZhbGlkYXRpb25NZXNzYWdlKFwiTm90ZSBzYXZlZCB0byB0b2RheSdzIGZvbGRlci4gWW91IGNhbiBvcGVuIGl0IG5vdyBvciBwcm9jZXNzIGFub3RoZXIgdmlkZW8uXCIsICdzdWNjZXNzJyk7XG4gICAgICAgIHRoaXMuZm9jdXNVcmxJbnB1dCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVF1aWNrQWN0aW9uc1N0YXRlKCk7XG4gICAgICAgIHRoaXMuc2V0VXJsSW5wdXRTdGF0ZSh0aGlzLnVybC50cmltKCkubGVuZ3RoID4gMCA/ICd2YWxpZCcgOiAnaWRsZScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgZXJyb3Igc3RhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dFcnJvclN0YXRlKGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnVybElucHV0KSB7XG4gICAgICAgICAgICB0aGlzLnVybElucHV0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0J1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NCdXR0b24udGV4dENvbnRlbnQgPSBNRVNTQUdFUy5NT0RBTFMuUFJPQ0VTUztcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3BlbkJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5vcGVuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFbCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJFbC50ZXh0Q29udGVudCA9ICdcdTI3NEMgUHJvY2Vzc2luZyBGYWlsZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZShlcnJvci5tZXNzYWdlLCAnZXJyb3InKTtcbiAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuICAgICAgICB0aGlzLnNldFVybElucHV0U3RhdGUodGhpcy51cmwudHJpbSgpLmxlbmd0aCA+IDAgPyAnaW52YWxpZCcgOiAnaWRsZScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9ncmVzcyBiYXIgYW5kIHRleHRcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKHBlcmNlbnQ6IG51bWJlciwgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzQmFyKSB7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudH0lYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9ncmVzc1RleHQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBpbml0aWFsIFVSTCB2YWx1ZVxuICAgICAqL1xuICAgIHNldFVybCh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgaWYgKHRoaXMudXJsSW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMudXJsSW5wdXQudmFsdWUgPSB1cmw7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IHVybC50cmltKCk7XG4gICAgICAgICAgICBpZiAodHJpbW1lZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVybElucHV0U3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVcmxJbnB1dFN0YXRlKFZhbGlkYXRpb25VdGlscy5pc1ZhbGlkWW91VHViZVVybCh0cmltbWVkKSA/ICd2YWxpZCcgOiAnaW52YWxpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAgcmVzb3VyY2VzIHdoZW4gbW9kYWwgaXMgY2xvc2VkXG4gICAgICovXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gQ2xlYW4gdXAgdmFsaWRhdGlvbiB0aW1lclxuICAgICAgICBpZiAodGhpcy52YWxpZGF0aW9uVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnZhbGlkYXRpb25UaW1lcik7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25UaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2FsbCBwYXJlbnQgY2xlYW51cFxuICAgICAgICBzdXBlci5vbkNsb3NlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgVVJMIHZhbHVlXG4gICAgICovXG4gICAgZ2V0VXJsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UHJvZ3Jlc3NTdGVwcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcEluZGV4ID0gMDtcbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NTdGVwcy5mb3JFYWNoKChzdGVwKSA9PiB7XG4gICAgICAgICAgICBzdGVwLmVsZW1lbnQudGV4dENvbnRlbnQgPSBgXHUyNUNCICR7c3RlcC5sYWJlbH1gO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN0ZXBTdGF0ZShpbmRleDogbnVtYmVyLCBzdGF0ZTogU3RlcFN0YXRlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMucHJvZ3Jlc3NTdGVwc1tpbmRleF07XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmVmaXggPSB0aGlzLmdldFN0ZXBQcmVmaXgoc3RhdGUpO1xuICAgICAgICB0YXJnZXQuZWxlbWVudC50ZXh0Q29udGVudCA9IGAke3ByZWZpeH0gJHt0YXJnZXQubGFiZWx9YDtcblxuICAgICAgICBpZiAoc3RhdGUgPT09ICdhY3RpdmUnKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwSW5kZXggPSBpbmRleDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2NvbXBsZXRlJyAmJiB0aGlzLmN1cnJlbnRTdGVwSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwSW5kZXggPSBNYXRoLm1pbihpbmRleCArIDEsIHRoaXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZmxhZ0FjdGl2ZVN0ZXBBc0Vycm9yKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5wcm9ncmVzc1N0ZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGVwU3RhdGUodGhpcy5jdXJyZW50U3RlcEluZGV4LCAnZXJyb3InKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN0ZXBQcmVmaXgoc3RhdGU6IFN0ZXBTdGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2FjdGl2ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdcdTI1Q0YnO1xuICAgICAgICAgICAgY2FzZSAnY29tcGxldGUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnXHUyNzE0JztcbiAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1x1MjZBMCc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnXHUyNUNCJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlSW5saW5lQnV0dG9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIG9uQ2xpY2s6ICgpID0+IHZvaWQpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBsYWJlbCB9KTtcbiAgICAgICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnNnB4IDEycHgnO1xuICAgICAgICBidXR0b24uc3R5bGUuZm9udFNpemUgPSAnMC44NXJlbSc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS50cmFuc2l0aW9uID0gJ2JhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlJztcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcbiAgICAgICAgfSk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgfSk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUGFzdGVGcm9tQ2xpcGJvYXJkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbmF2aWdhdG9yLmNsaXBib2FyZCB8fCAhbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZSgnQ2xpcGJvYXJkIGFjY2VzcyBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuJywgJ2Vycm9yJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDbGlwYm9hcmQgYWNjZXNzIGlzIG5vdCBhdmFpbGFibGUuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTtcbiAgICAgICAgICAgIGlmICghdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbk1lc3NhZ2UoJ0NsaXBib2FyZCBpcyBlbXB0eS4gQ29weSBhIFlvdVR1YmUgVVJMIGZpcnN0LicsICdpbmZvJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0cmltbWVkID0gdGV4dC50cmltKCk7XG4gICAgICAgICAgICB0aGlzLnVybCA9IHRyaW1tZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy51cmxJbnB1dCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXJsSW5wdXQudmFsdWUgPSB0cmltbWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsaWRVcmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gVmFsaWRhdGlvblV0aWxzLmlzVmFsaWRZb3VUdWJlVXJsKHRyaW1tZWQpO1xuICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZShcbiAgICAgICAgICAgICAgICBpc1ZhbGlkID8gJ1JlYWR5IHRvIHByb2Nlc3MgdGhpcyB2aWRlby4nIDogJ0VudGVyIGEgdmFsaWQgWW91VHViZSB2aWRlbyBVUkwuJyxcbiAgICAgICAgICAgICAgICBpc1ZhbGlkID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VXJsSW5wdXRTdGF0ZShpc1ZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQnV0dG9uICYmICF0aGlzLmlzUHJvY2Vzc2luZyAmJiBpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNVcmxJbnB1dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvciBhcyBFcnJvciwgJ1JlYWRpbmcgY2xpcGJvYXJkJywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZSgnQ291bGQgbm90IHJlYWQgZnJvbSBjbGlwYm9hcmQuIFBhc3RlIG1hbnVhbGx5IGluc3RlYWQuJywgJ2Vycm9yJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb3VsZCBub3QgcmVhZCBmcm9tIGNsaXBib2FyZC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQ2xlYXJVcmwoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cmwgPSAnJztcbiAgICAgICAgaWYgKHRoaXMudXJsSW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMudXJsSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RWYWxpZFVybCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy51cGRhdGVQcm9jZXNzQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVRdWlja0FjdGlvbnNTdGF0ZSgpO1xuICAgICAgICB0aGlzLnNldFZhbGlkYXRpb25NZXNzYWdlKCdQYXN0ZSBhIFlvdVR1YmUgbGluayB0byBiZWdpbiBwcm9jZXNzaW5nLicsICdpbmZvJyk7XG4gICAgICAgIHRoaXMuc2V0VXJsSW5wdXRTdGF0ZSgnaWRsZScpO1xuICAgICAgICB0aGlzLmZvY3VzVXJsSW5wdXQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVF1aWNrQWN0aW9uc1N0YXRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYXNVcmwgPSB0aGlzLnVybC50cmltKCkubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKHRoaXMuY2xlYXJCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCdXR0b24uZGlzYWJsZWQgPSAhaGFzVXJsIHx8IHRoaXMuaXNQcm9jZXNzaW5nO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gdGhpcy5jbGVhckJ1dHRvbi5kaXNhYmxlZCA/ICcwLjUnIDogJzEnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhc3RlQnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLnBhc3RlQnV0dG9uLmRpc2FibGVkID0gdGhpcy5pc1Byb2Nlc3Npbmc7XG4gICAgICAgICAgICB0aGlzLnBhc3RlQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSB0aGlzLnBhc3RlQnV0dG9uLmRpc2FibGVkID8gJzAuNScgOiAnMSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFVybElucHV0U3RhdGUoc3RhdGU6ICdpZGxlJyB8ICd2YWxpZCcgfCAnaW52YWxpZCcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnVybElucHV0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYm9yZGVyQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgbGV0IGJveFNoYWRvdyA9ICdub25lJztcblxuICAgICAgICBpZiAoc3RhdGUgPT09ICd2YWxpZCcpIHtcbiAgICAgICAgICAgIGJvcmRlckNvbG9yID0gJ3ZhcigtLXRleHQtYWNjZW50KSc7XG4gICAgICAgICAgICBib3hTaGFkb3cgPSAnMCAwIDAgMXB4IHZhcigtLXRleHQtYWNjZW50KSc7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdpbnZhbGlkJykge1xuICAgICAgICAgICAgYm9yZGVyQ29sb3IgPSAndmFyKC0tdGV4dC1lcnJvciknO1xuICAgICAgICAgICAgYm94U2hhZG93ID0gJzAgMCAwIDFweCB2YXIoLS10ZXh0LWVycm9yKSc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVybElucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gYm9yZGVyQ29sb3I7XG4gICAgICAgIHRoaXMudXJsSW5wdXQuc3R5bGUuYm94U2hhZG93ID0gYm94U2hhZG93O1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VmFsaWRhdGlvbk1lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCB0eXBlOiAnaW5mbycgfCAnZXJyb3InIHwgJ3N1Y2Nlc3MnKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0aW9uTWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52YWxpZGF0aW9uTWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICAgICAgbGV0IGNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIGNvbG9yID0gJ3ZhcigtLXRleHQtZXJyb3IpJztcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgIGNvbG9yID0gJ3ZhcigtLXRleHQtYWNjZW50KSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ5IHRvIGZldGNoIGEgbGlnaHR3ZWlnaHQgcHJldmlldyBmb3IgdGhlIHByb3ZpZGVkIFlvdVR1YmUgVVJMIHVzaW5nIG9FbWJlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIG1heWJlRmV0Y2hQcmV2aWV3KHVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmZldGNoSW5Qcm9ncmVzcykgcmV0dXJuO1xuICAgICAgICBpZiAoIXVybCkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5sYXN0VmFsaWRVcmwgPT09IHVybCAmJiB0aGlzLnRodW1ibmFpbEVsICYmIHRoaXMudGh1bWJuYWlsRWwuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBhbHJlYWR5IGZldGNoZWQgZm9yIHRoaXMgVVJMXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldEZldGNoaW5nU3RhdGUodHJ1ZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhID0gYXdhaXQgdGhpcy5mZXRjaFZpZGVvUHJldmlldyh1cmwpO1xuICAgICAgICAgICAgaWYgKG1ldGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dQcmV2aWV3KG1ldGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUHJldmlldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgY2xlYXIgcHJldmlldyBvbiBmYWlsdXJlLCBrZWVwIFVYIHJlc3BvbnNpdmVcbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcmV2aWV3KCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnNldEZldGNoaW5nU3RhdGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRGZXRjaGluZ1N0YXRlKGlzRmV0Y2hpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mZXRjaEluUHJvZ3Jlc3MgPSBpc0ZldGNoaW5nO1xuICAgICAgICBpZiAodGhpcy5wcm9jZXNzQnV0dG9uKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIHByb2Nlc3Npbmcgd2hpbGUgZmV0Y2hpbmcgcHJldmlld1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnV0dG9uLmRpc2FibGVkID0gaXNGZXRjaGluZyB8fCAhKHRoaXMubGFzdFZhbGlkUmVzdWx0ID8/IGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0J1dHRvbi5zdHlsZS5vcGFjaXR5ID0gdGhpcy5wcm9jZXNzQnV0dG9uLmRpc2FibGVkID8gJzAuNScgOiAnMSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChpc0ZldGNoaW5nKSB0aGlzLnNldFZhbGlkYXRpb25NZXNzYWdlKCdGZXRjaGluZyBwcmV2aWV3Li4uJywgJ2luZm8nKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGFzdFZhbGlkUmVzdWx0KSB0aGlzLnNldFZhbGlkYXRpb25NZXNzYWdlKCdSZWFkeSB0byBwcm9jZXNzIHRoaXMgdmlkZW8uJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy5zZXRWYWxpZGF0aW9uTWVzc2FnZSgnRW50ZXIgYSB2YWxpZCBZb3VUdWJlIHZpZGVvIFVSTC4nLCAnZXJyb3InKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hWaWRlb1ByZXZpZXcodXJsOiBzdHJpbmcpOiBQcm9taXNlPHsgdGl0bGU6IHN0cmluZzsgYXV0aG9yOiBzdHJpbmc7IHRodW1ibmFpbDogc3RyaW5nIH0gfCBudWxsPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvZW1iZWQgPSBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vb2VtYmVkP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh1cmwpfSZmb3JtYXQ9anNvbmA7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChvZW1iZWQpO1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgICAgICAgICAgIGF1dGhvcjogZGF0YS5hdXRob3JfbmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IGRhdGEudGh1bWJuYWlsX3VybCB8fCAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93UHJldmlldyhtZXRhOiB7IHRpdGxlOiBzdHJpbmc7IGF1dGhvcjogc3RyaW5nOyB0aHVtYm5haWw6IHN0cmluZyB9KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy50aHVtYm5haWxFbCB8fCAhdGhpcy5tZXRhZGF0YUNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgICBpZiAobWV0YS50aHVtYm5haWwpIHtcbiAgICAgICAgICAgIHRoaXMudGh1bWJuYWlsRWwuc3JjID0gbWV0YS50aHVtYm5haWw7XG4gICAgICAgICAgICB0aGlzLnRodW1ibmFpbEVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGEgZmllbGRzIChzdHJ1Y3R1cmUgY3JlYXRlZCBlYXJsaWVyKVxuICAgICAgICBjb25zdCB0aXRsZUVsID0gdGhpcy5tZXRhZGF0YUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueXQtcHJldmlldy10aXRsZScpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb25zdCBjaGFubmVsRWwgPSB0aGlzLm1ldGFkYXRhQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55dC1wcmV2aWV3LWNoYW5uZWwnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgaWYgKHRpdGxlRWwpIHtcbiAgICAgICAgICAgIHRpdGxlRWwudGV4dENvbnRlbnQgPSBtZXRhLnRpdGxlO1xuICAgICAgICAgICAgdGl0bGVFbC5zdHlsZS5mb250V2VpZ2h0ID0gJzYwMCc7XG4gICAgICAgICAgICB0aXRsZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc0cHgnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVsRWwpIHtcbiAgICAgICAgICAgIGNoYW5uZWxFbC50ZXh0Q29udGVudCA9IG1ldGEuYXV0aG9yO1xuICAgICAgICAgICAgY2hhbm5lbEVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgICAgIGNoYW5uZWxFbC5zdHlsZS5mb250U2l6ZSA9ICcwLjg1cmVtJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWV0YWRhdGFDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhclByZXZpZXcoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnRodW1ibmFpbEVsKSB7XG4gICAgICAgICAgICB0aGlzLnRodW1ibmFpbEVsLnNyYyA9ICcnO1xuICAgICAgICAgICAgdGhpcy50aHVtYm5haWxFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZUVsID0gdGhpcy5tZXRhZGF0YUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueXQtcHJldmlldy10aXRsZScpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbEVsID0gdGhpcy5tZXRhZGF0YUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueXQtcHJldmlldy1jaGFubmVsJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodGl0bGVFbCkgdGl0bGVFbC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgaWYgKGNoYW5uZWxFbCkgY2hhbm5lbEVsLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiBCYXNlIG1vZGFsIGNsYXNzIHdpdGggc2hhcmVkIGZ1bmN0aW9uYWxpdHkgYW5kIGNvbnNpc3RlbnQgc3R5bGluZ1xuICogRGVzaWduZWQgdG8gcHJldmVudCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW4gbW9kYWxzXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERPTVV0aWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7IE1PREFMX1NUWUxFUywgSU5QVVRfU1RZTEVTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3N0eWxlcyc7XG5pbXBvcnQgeyBUSU1FT1VUUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9hcGknO1xuaW1wb3J0IHsgTW9kYWxFdmVudHMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3R5cGVzJztcblxuLy8gVW5pcXVlIENTUyBjbGFzc2VzIHRvIHByZXZlbnQgY29uZmxpY3RzXG5jb25zdCBNT0RBTF9DU1NfQ0xBU1NFUyA9IHtcbiAgICBtb2RhbDogJ3l0Yy1tb2RhbCcsXG4gICAgaGVhZGVyOiAneXRjLW1vZGFsLWhlYWRlcicsXG4gICAgY29udGVudDogJ3l0Yy1tb2RhbC1jb250ZW50JyxcbiAgICBidXR0b246ICd5dGMtbW9kYWwtYnV0dG9uJyxcbiAgICBpbnB1dDogJ3l0Yy1tb2RhbC1pbnB1dCdcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJvdGVjdGVkIGV2ZW50czogUGFydGlhbDxNb2RhbEV2ZW50cz4gPSB7fTtcbiAgICBwcml2YXRlIGlzRGlzcG9zZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuc2V0dXBNb2RhbFN0eWxpbmcoKTtcbiAgICAgICAgdGhpcy5zZXR1cENvbmZsaWN0UHJldmVudGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBiYXNlIG1vZGFsIHN0eWxpbmcgZm9yIGNvbnNpc3RlbmN5XG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cE1vZGFsU3R5bGluZygpOiB2b2lkIHtcbiAgICAgICAgRE9NVXRpbHMuc2V0dXBNb2RhbFN0eWxpbmcodGhpcy5tb2RhbEVsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB1bmlxdWUgQ1NTIGNsYXNzIHRvIHByZXZlbnQgY29uZmxpY3RzXG4gICAgICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcyhNT0RBTF9DU1NfQ0xBU1NFUy5tb2RhbCk7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZENsYXNzKE1PREFMX0NTU19DTEFTU0VTLmNvbnRlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBjb25mbGljdCBwcmV2ZW50aW9uIG1lYXN1cmVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cENvbmZsaWN0UHJldmVudGlvbigpOiB2b2lkIHtcbiAgICAgICAgLy8gQWRkIHVuaXF1ZSBhdHRyaWJ1dGUgZm9yIGlkZW50aWZpY2F0aW9uXG4gICAgICAgIHRoaXMubW9kYWxFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGx1Z2luJywgJ3lvdXR1YmUtY2xpcHBlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIG1vZGFsIGhhcyBoaWdoIHotaW5kZXggYnV0IG5vdCBjb25mbGljdGluZ1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUuekluZGV4ID0gJzk5OTknO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBzdGFuZGFyZGl6ZWQgbW9kYWwgaGVhZGVyIHdpdGggY29uZmxpY3QgcHJldmVudGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjcmVhdGVIZWFkZXIodGV4dDogc3RyaW5nKTogSFRNTEhlYWRpbmdFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gRE9NVXRpbHMuY3JlYXRlTW9kYWxIZWFkZXIodGhpcy5jb250ZW50RWwsIHRleHQpO1xuICAgICAgICBoZWFkZXIuYWRkQ2xhc3MoTU9EQUxfQ1NTX0NMQVNTRVMuaGVhZGVyKTtcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgc3RhbmRhcmRpemVkIG1vZGFsIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY3JlYXRlTWVzc2FnZSh0ZXh0OiBzdHJpbmcpOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB7XG4gICAgICAgIHJldHVybiBET01VdGlscy5jcmVhdGVNb2RhbE1lc3NhZ2UodGhpcy5jb250ZW50RWwsIHRleHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBzdGFuZGFyZGl6ZWQgYnV0dG9uIGNvbnRhaW5lclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjcmVhdGVCdXR0b25Db250YWluZXIoKTogSFRNTERpdkVsZW1lbnQge1xuICAgICAgICByZXR1cm4gRE9NVXRpbHMuY3JlYXRlQnV0dG9uQ29udGFpbmVyKHRoaXMuY29udGVudEVsKTtcbiAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICogQ3JlYXRlIHN0YW5kYXJkaXplZCBidXR0b24gd2l0aCBjb25mbGljdCBwcmV2ZW50aW9uXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUJ1dHRvbihcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBpc1ByaW1hcnkgPSBmYWxzZSxcbiAgICAgICAgb25DbGljaz86ICgpID0+IHZvaWRcbiAgICApOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IERPTVV0aWxzLmNyZWF0ZVN0eWxlZEJ1dHRvbihjb250YWluZXIsIHRleHQsIGlzUHJpbWFyeSwgb25DbGljayk7XG4gICAgICAgIGJ1dHRvbi5hZGRDbGFzcyhNT0RBTF9DU1NfQ0xBU1NFUy5idXR0b24pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHVuaXF1ZSBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXBsdWdpbicsICd5b3V0dWJlLWNsaXBwZXInKTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgc3RhbmRhcmRpemVkIGlucHV0IHdpdGggY29uZmxpY3QgcHJldmVudGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjcmVhdGVJbnB1dChcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgdHlwZTogc3RyaW5nLFxuICAgICAgICBwbGFjZWhvbGRlcj86IHN0cmluZ1xuICAgICk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXJcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSBzdHlsZXMgYW5kIGFkZCB1bmlxdWUgY2xhc3NcbiAgICAgICAgRE9NVXRpbHMuYXBwbHlTdHlsZXMoaW5wdXQsIElOUFVUX1NUWUxFUyk7XG4gICAgICAgIGlucHV0LmFkZENsYXNzKE1PREFMX0NTU19DTEFTU0VTLmlucHV0KTtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkYXRhLXBsdWdpbicsICd5b3V0dWJlLWNsaXBwZXInKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdXAga2V5Ym9hcmQgZXZlbnQgaGFuZGxlcnNcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgc2V0dXBLZXlIYW5kbGVycyhcbiAgICAgICAgb25FbnRlcjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXG4gICAgICAgIG9uRXNjYXBlPzogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlZE9uRW50ZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG9uRW50ZXIoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRW50ZXIga2V5IGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRPbkVzY2FwZSA9IG9uRXNjYXBlID8gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBvbkVzY2FwZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFc2NhcGUga2V5IGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IDogdW5kZWZpbmVkO1xuXG4gICAgICAgIERPTVV0aWxzLnNldHVwTW9kYWxLZXlIYW5kbGVycyh0aGlzLmNvbnRlbnRFbCwgd3JhcHBlZE9uRW50ZXIsIHdyYXBwZWRPbkVzY2FwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9jdXMgZWxlbWVudCB3aXRoIGRlbGF5IGZvciBiZXR0ZXIgVVhcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZm9jdXNFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBkZWxheSA9IFRJTUVPVVRTLkZPQ1VTX0RFTEFZKTogdm9pZCB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHVwIGV2ZW50IGhhbmRsZXJzXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHNldEV2ZW50cyhldmVudHM6IFBhcnRpYWw8TW9kYWxFdmVudHM+KTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgY29uZmlybWF0aW9uIGRpYWxvZyBiZWZvcmUgY2xvc2luZ1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb25maXJtQ2xvc2UobWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maXJtKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcmNlIG1vZGFsIHZpc2liaWxpdHkgKGZvciBzdHViYm9ybiBtb2RhbHMpXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGZvcmNlVmlzaWJsZSgpOiB2b2lkIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBET01VdGlscy5zZXR1cE1vZGFsU3R5bGluZyh0aGlzLm1vZGFsRWwpO1xuICAgICAgICB9LCBUSU1FT1VUUy5SRVBBSU5UX0RFTEFZKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCBvbiBjbG9zZSB3aXRoIHByb3BlciBkaXNwb3NhbFxuICAgICAqL1xuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1t5b3V0dWJlLWNsaXBwZXJdIENsZWFuaW5nIHVwIG1vZGFsJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkIHRvIHByZXZlbnQgZG91YmxlIGNsZWFudXBcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIGNvbnRlbnRcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIHVuaXF1ZSBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzXG4gICAgICAgIHRoaXMubW9kYWxFbC5yZW1vdmVDbGFzcyhNT0RBTF9DU1NfQ0xBU1NFUy5tb2RhbCk7XG4gICAgICAgIHRoaXMubW9kYWxFbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGx1Z2luJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnW3lvdXR1YmUtY2xpcHBlcl0gTW9kYWwgY2xlYW51cCBjb21wbGV0ZScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCBmb3IgbW9kYWwgY29udGVudCBjcmVhdGlvblxuICAgICAqL1xuICAgIGFic3RyYWN0IG9uT3BlbigpOiB2b2lkO1xufVxuIiwgIi8qKlxuICogVUkgc3R5bGluZyBjb25zdGFudHMgdG8gZWxpbWluYXRlIERSWSB2aW9sYXRpb25zXG4gKi9cblxuZXhwb3J0IGNvbnN0IE1PREFMX1NUWUxFUyA9IHtcbiAgICB6SW5kZXg6ICcxMDAwMCcsXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIGhlYWRlcjoge1xuICAgICAgICBtYXJnaW5Cb3R0b206ICcxNXB4JyxcbiAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LWFjY2VudCknXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzIwcHgnLFxuICAgICAgICBsaW5lSGVpZ2h0OiAnMS41J1xuICAgIH0sXG4gICAgYnV0dG9uQ29udGFpbmVyOiB7XG4gICAgICAgIG1hcmdpblRvcDogJzIwcHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGdhcDogJzEwcHgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJ1xuICAgIH0sXG4gICAgYnV0dG9uOiB7XG4gICAgICAgIHBhZGRpbmc6ICc4cHggMTZweCcsXG4gICAgICAgIG1pbldpZHRoOiAnMTAwcHgnXG4gICAgfVxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IElOUFVUX1NUWUxFUyA9IHtcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIG1hcmdpblRvcDogJzhweCcsXG4gICAgcGFkZGluZzogJzhweCcsXG4gICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKScsXG4gICAgYm9yZGVyUmFkaXVzOiAnNHB4J1xufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IENPTlRBSU5FUl9TVFlMRVMgPSB7XG4gICAgbWFyZ2luVG9wOiAnMjBweCdcbn0gYXMgY29uc3Q7XG4iLCAiLyoqXG4gKiBET00gbWFuaXB1bGF0aW9uIHV0aWxpdGllcyB0byBlbGltaW5hdGUgY29kZSBkdXBsaWNhdGlvblxuICovXG5cbmltcG9ydCB7IE1PREFMX1NUWUxFUywgSU5QVVRfU1RZTEVTIH0gZnJvbSAnLi4vY29uc3RhbnRzL3N0eWxlcyc7XG5pbXBvcnQgeyBET01VdGlsc0ludGVyZmFjZSwgU3R5bGVPYmplY3QgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIERPTVV0aWxzIGltcGxlbWVudHMgRE9NVXRpbHNJbnRlcmZhY2Uge1xuICAgIC8qKlxuICAgICAqIEFwcGx5IHN0eWxlcyB0byBhbiBIVE1MIGVsZW1lbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgYXBwbHlTdHlsZXMoZWxlbWVudDogSFRNTEVsZW1lbnQsIHN0eWxlczogU3R5bGVPYmplY3QpOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0YW5kYXJkaXplZCBidXR0b24gY29udGFpbmVyXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUJ1dHRvbkNvbnRhaW5lcihwYXJlbnQ6IEhUTUxFbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMuYXBwbHlTdHlsZXMoY29udGFpbmVyLCBNT0RBTF9TVFlMRVMuYnV0dG9uQ29udGFpbmVyKTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzdHlsZWQgYnV0dG9uIHdpdGggY29uc2lzdGVudCBhcHBlYXJhbmNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVN0eWxlZEJ1dHRvbihcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBpc1ByaW1hcnkgPSBmYWxzZSxcbiAgICAgICAgb25DbGljaz86ICgpID0+IHZvaWRcbiAgICApOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0IH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzUHJpbWFyeSkge1xuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21vZC1jdGEnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5hcHBseVN0eWxlcyhidXR0b24sIE1PREFMX1NUWUxFUy5idXR0b24pO1xuICAgICAgICBcbiAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0eWxlZCBpbnB1dCBmaWVsZFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVTdHlsZWRJbnB1dChcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgdHlwZTogc3RyaW5nLFxuICAgICAgICBwbGFjZWhvbGRlcjogc3RyaW5nLFxuICAgICAgICB2YWx1ZSA9ICcnXG4gICAgKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hcHBseVN0eWxlcyhpbnB1dCwgSU5QVVRfU1RZTEVTKTtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBtb2RhbCBiYXNlIHN0eWxpbmcgZm9yIGNvbnNpc3RlbmN5XG4gICAgICovXG4gICAgc3RhdGljIHNldHVwTW9kYWxTdHlsaW5nKG1vZGFsRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXBwbHlTdHlsZXMobW9kYWxFbCwge1xuICAgICAgICAgICAgekluZGV4OiBNT0RBTF9TVFlMRVMuekluZGV4LFxuICAgICAgICAgICAgZGlzcGxheTogTU9EQUxfU1RZTEVTLmRpc3BsYXlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgaGVhZGVyIGVsZW1lbnQgd2l0aCBjb25zaXN0ZW50IHN0eWxpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlTW9kYWxIZWFkZXIocGFyZW50OiBIVE1MRWxlbWVudCwgdGV4dDogc3RyaW5nKTogSFRNTEhlYWRpbmdFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gcGFyZW50LmNyZWF0ZUVsKCdoMicsIHsgdGV4dCB9KTtcbiAgICAgICAgdGhpcy5hcHBseVN0eWxlcyhoZWFkZXIsIE1PREFMX1NUWUxFUy5oZWFkZXIpO1xuICAgICAgICByZXR1cm4gaGVhZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG1lc3NhZ2UgcGFyYWdyYXBoIHdpdGggY29uc2lzdGVudCBzdHlsaW5nXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU1vZGFsTWVzc2FnZShwYXJlbnQ6IEhUTUxFbGVtZW50LCB0ZXh0OiBzdHJpbmcpOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBwYXJlbnQuY3JlYXRlRWwoJ3AnKTtcbiAgICAgICAgbWVzc2FnZS5zZXRUZXh0KHRleHQpO1xuICAgICAgICB0aGlzLmFwcGx5U3R5bGVzKG1lc3NhZ2UsIE1PREFMX1NUWUxFUy5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHVwIGtleWJvYXJkIGV2ZW50IGhhbmRsZXJzIGZvciBtb2RhbHNcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0dXBNb2RhbEtleUhhbmRsZXJzKFxuICAgICAgICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgb25FbnRlcjogKCkgPT4gdm9pZCxcbiAgICAgICAgb25Fc2NhcGU/OiAoKSA9PiB2b2lkXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBvbkVudGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIG9uRXNjYXBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgb25Fc2NhcGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSW5zdGFuY2UgbWV0aG9kcyBpbXBsZW1lbnRpbmcgaW50ZXJmYWNlXG4gICAgYXBwbHlTdHlsZXMoZWxlbWVudDogSFRNTEVsZW1lbnQsIHN0eWxlczogU3R5bGVPYmplY3QpOiB2b2lkIHtcbiAgICAgICAgRE9NVXRpbHMuYXBwbHlTdHlsZXMoZWxlbWVudCwgc3R5bGVzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b25Db250YWluZXIocGFyZW50OiBIVE1MRWxlbWVudCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIERPTVV0aWxzLmNyZWF0ZUJ1dHRvbkNvbnRhaW5lcihwYXJlbnQpO1xuICAgIH1cblxuICAgIGNyZWF0ZVN0eWxlZEJ1dHRvbihcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBpc1ByaW1hcnkgPSBmYWxzZSxcbiAgICAgICAgb25DbGljaz86ICgpID0+IHZvaWRcbiAgICApOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIHJldHVybiBET01VdGlscy5jcmVhdGVTdHlsZWRCdXR0b24oY29udGFpbmVyLCB0ZXh0LCBpc1ByaW1hcnksIG9uQ2xpY2spO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIEFQSSBlbmRwb2ludHMgYW5kIGNvbmZpZ3VyYXRpb24gY29uc3RhbnRzXG4gKi9cblxuZXhwb3J0IGNvbnN0IEFQSV9FTkRQT0lOVFMgPSB7XG4gICAgR0VNSU5JOiAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktMi41LXBybzpnZW5lcmF0ZUNvbnRlbnQnLFxuICAgIEdST1E6ICdodHRwczovL2FwaS5ncm9xLmNvbS9vcGVuYWkvdjEvY2hhdC9jb21wbGV0aW9ucycsXG4gICAgWU9VVFVCRV9PRU1CRUQ6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9vZW1iZWQnLFxuICAgIENPUlNfUFJPWFk6ICdodHRwczovL2FwaS5hbGxvcmlnaW5zLndpbi9yYXcnXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgQUlfTU9ERUxTID0ge1xuICAgIEdFTUlOSTogJ2dlbWluaS0yLjUtcHJvJywgLy8gU2V0IEdlbWluaSBtb2RlbCB0byBnZW1pbmktMi41LXByb1xuICAgIEdST1E6ICdsbGFtYS0zLjMtNzBiLXZlcnNhdGlsZSdcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBBUElfTElNSVRTID0ge1xuICAgIE1BWF9UT0tFTlM6IDIwMDAsXG4gICAgVEVNUEVSQVRVUkU6IDAuNyxcbiAgICBERVNDUklQVElPTl9NQVhfTEVOR1RIOiAxMDAwLFxuICAgIFRJVExFX01BWF9MRU5HVEg6IDEwMFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IFRJTUVPVVRTID0ge1xuICAgIEZJTEVfQ1JFQVRJT05fV0FJVDogMzAwLFxuICAgIE1PREFMX0RFTEFZOiAxMDAsXG4gICAgRkFMTEJBQ0tfTU9EQUxfQ0hFQ0s6IDUwMCxcbiAgICBGT0NVU19ERUxBWTogMTUwLFxuICAgIFJFUEFJTlRfREVMQVk6IDUwXG59IGFzIGNvbnN0O1xuIiwgIi8qKlxuICogUGx1Z2luIHNldHRpbmdzIHRhYiBjb21wb25lbnRcbiAqIERlc2lnbmVkIHRvIHByZXZlbnQgY29uZmxpY3RzIHdpdGggb3RoZXIgcGx1Z2luIHNldHRpbmdzXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgWW91VHViZVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy90eXBlcyc7XG5pbXBvcnQgeyBNRVNTQUdFUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9tZXNzYWdlcyc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0aW9uJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgU2VjdXJlQ29uZmlnU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3NlY3VyZS1jb25maWcnO1xuXG4vLyBVbmlxdWUgQ1NTIGNsYXNzZXMgdG8gcHJldmVudCBjb25mbGljdHNcbmNvbnN0IFNFVFRJTkdTX0NTU19DTEFTU0VTID0ge1xuICAgIGNvbnRhaW5lcjogJ3l0Yy1zZXR0aW5ncy1jb250YWluZXInLFxuICAgIHNlY3Rpb246ICd5dGMtc2V0dGluZ3Mtc2VjdGlvbicsXG4gICAgaGVhZGVyOiAneXRjLXNldHRpbmdzLWhlYWRlcicsXG4gICAgdmFsaWRhdGlvbjogJ3l0Yy1zZXR0aW5ncy12YWxpZGF0aW9uJ1xufSBhcyBjb25zdDtcblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1RhYk9wdGlvbnMge1xuICAgIHBsdWdpbjogYW55OyAvLyBQbHVnaW4gaW5zdGFuY2VcbiAgICBvblNldHRpbmdzQ2hhbmdlOiAoc2V0dGluZ3M6IFlvdVR1YmVQbHVnaW5TZXR0aW5ncykgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGNsYXNzIFlvdVR1YmVTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IFlvdVR1YmVQbHVnaW5TZXR0aW5ncztcbiAgICBwcml2YXRlIHZhbGlkYXRpb25FcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgcHJpdmF0ZSBzZWN1cmVDb25maWc6IFNlY3VyZUNvbmZpZ1NlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIHByaXZhdGUgb3B0aW9uczogU2V0dGluZ3NUYWJPcHRpb25zXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgb3B0aW9ucy5wbHVnaW4pO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0geyAuLi5vcHRpb25zLnBsdWdpbi5zZXR0aW5ncyB9O1xuICAgICAgICB0aGlzLnNlY3VyZUNvbmZpZyA9IG5ldyBTZWN1cmVDb25maWdTZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdW5pcXVlIENTUyBjbGFzcyBmb3IgY29uZmxpY3QgcHJldmVudGlvblxuICAgICAgICBjb250YWluZXJFbC5hZGRDbGFzcyhTRVRUSU5HU19DU1NfQ0xBU1NFUy5jb250YWluZXIpO1xuICAgICAgICBjb250YWluZXJFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGx1Z2luJywgJ3lvdXR1YmUtY2xpcHBlcicpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlSGVhZGVyKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQVBJU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTZWN1cml0eVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlRmlsZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlVmFsaWRhdGlvblN0YXR1cygpO1xuICAgICAgICB0aGlzLmNyZWF0ZVVzYWdlSW5zdHJ1Y3Rpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGhlYWRlciB3aXRoIHZlcnNpb24gaW5mb3JtYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUhlYWRlcigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdihTRVRUSU5HU19DU1NfQ0xBU1NFUy5oZWFkZXIpO1xuICAgICAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdZb3VUdWJlQ2xpcHBlciBTZXR0aW5ncycgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBWZXJzaW9uIGluZm9cbiAgICAgICAgY29uc3QgdmVyc2lvbkVsID0gaGVhZGVyRWwuY3JlYXRlRGl2KCd5dGMtdmVyc2lvbi1pbmZvJyk7XG4gICAgICAgIHZlcnNpb25FbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAndjEuMi4wIC0gUHJvZHVjdGlvbiBSZWFkeScsXG4gICAgICAgICAgICBjbHM6ICd5dGMtdmVyc2lvbi1iYWRnZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBRdWljayBzdGF0dXMgY2hlY2tcbiAgICAgICAgY29uc3Qgc3RhdHVzRWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoJ3l0Yy1zdGF0dXMtaW5mbycpO1xuICAgICAgICBjb25zdCBoYXNWYWxpZENvbmZpZyA9IHRoaXMudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIHN0YXR1c0VsLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgdGV4dDogaGFzVmFsaWRDb25maWcgPyAnXHUyNzA1IFJlYWR5IHRvIHVzZScgOiAnXHUyNkEwXHVGRTBGIENvbmZpZ3VyYXRpb24gbmVlZGVkJyxcbiAgICAgICAgICAgIGNsczogaGFzVmFsaWRDb25maWcgPyAneXRjLXN0YXR1cy1nb29kJyA6ICd5dGMtc3RhdHVzLXdhcm5pbmcnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRG9jdW1lbnRhdGlvbiBsaW5rXG4gICAgICAgIGNvbnN0IGRvY3NFbCA9IGhlYWRlckVsLmNyZWF0ZURpdigneXRjLWRvY3MtbGluaycpO1xuICAgICAgICBkb2NzRWwuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0Q2IFZpZXcgRG9jdW1lbnRhdGlvbicsXG4gICAgICAgICAgICBocmVmOiAnIycsXG4gICAgICAgICAgICBjbHM6ICd5dGMtZG9jcy1idXR0b24nXG4gICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0RvY3VtZW50YXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgZW50aXJlIGNvbmZpZ3VyYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIHZhbGlkYXRlQ29uZmlndXJhdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaGFzQXBpS2V5ID0gdGhpcy5zZXR0aW5ncy5nZW1pbmlBcGlLZXk/LnRyaW0oKSB8fCB0aGlzLnNldHRpbmdzLmdyb3FBcGlLZXk/LnRyaW0oKTtcbiAgICAgICAgY29uc3QgaGFzVmFsaWRQYXRoID0gVmFsaWRhdGlvblV0aWxzLmlzVmFsaWRQYXRoKHRoaXMuc2V0dGluZ3Mub3V0cHV0UGF0aCk7XG4gICAgICAgIHJldHVybiBCb29sZWFuKGhhc0FwaUtleSAmJiBoYXNWYWxpZFBhdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgaW5saW5lIGRvY3VtZW50YXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dEb2N1bWVudGF0aW9uKCk6IHZvaWQge1xuICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3lvdXR1YmUtY2xpcHBlci9vYnNpZGlhbi1wbHVnaW4jcmVhZG1lJywgJ19ibGFuaycpO1xuICAgIH0gICAgLyoqXG4gICAgICogQ3JlYXRlIEFQSSBjb25maWd1cmF0aW9uIHNldHRpbmdzXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVBUElTZXR0aW5ncygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIC8vIEFQSSBLZXlzIHNlY3Rpb25cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQVBJIENvbmZpZ3VyYXRpb24nIH0pO1xuXG4gICAgICAgIC8vIEdlbWluaSBBUEkgS2V5XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0dlbWluaSBBUEkgS2V5JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIEdvb2dsZSBHZW1pbmkgQVBJIGtleSBmb3IgY29udGVudCBwcm9jZXNzaW5nIChyZWNvbW1lbmRlZCknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKE1FU1NBR0VTLlBMQUNFSE9MREVSUy5HRU1JTklfS0VZKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmdlbWluaUFwaUtleSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygnZ2VtaW5pQXBpS2V5JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHcm9xIEFQSSBLZXlcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnR3JvcSBBUEkgS2V5JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIEdyb3EgQVBJIGtleSBmb3IgZmFsbGJhY2sgcHJvY2Vzc2luZycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoTUVTU0FHRVMuUExBQ0VIT0xERVJTLkdST1FfS0VZKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmdyb3FBcGlLZXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmcoJ2dyb3FBcGlLZXknLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBzZWN1cml0eSBjb25maWd1cmF0aW9uIHNldHRpbmdzXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVTZWN1cml0eVNldHRpbmdzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgLy8gU2VjdXJpdHkgU2V0dGluZ3Mgc2VjdGlvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTZWN1cml0eSBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgICAgICAvLyBVc2UgRW52aXJvbm1lbnQgVmFyaWFibGVzXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZSBFbnZpcm9ubWVudCBWYXJpYWJsZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0xvYWQgQVBJIGtleXMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW5zdGVhZCBvZiBzdG9yaW5nIHRoZW0gaW4gY29uZmlndXJhdGlvbicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy51c2VFbnZpcm9ubWVudFZhcmlhYmxlcyB8fCBmYWxzZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygndXNlRW52aXJvbm1lbnRWYXJpYWJsZXMnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIGRpc3BsYXkgdG8gc2hvdy9oaWRlIHJlbGV2YW50IHNldHRpbmdzXG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEVudmlyb25tZW50IFZhcmlhYmxlIFByZWZpeFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy51c2VFbnZpcm9ubWVudFZhcmlhYmxlcykge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0Vudmlyb25tZW50IFZhcmlhYmxlIFByZWZpeCcpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ1ByZWZpeCBmb3IgZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZXMgKGUuZy4sIFlUQ19HRU1JTklfQVBJX0tFWSknKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lUQycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmVudmlyb25tZW50UHJlZml4IHx8ICdZVEMnKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmcoJ2Vudmlyb25tZW50UHJlZml4JywgdmFsdWUgfHwgJ1lUQycpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IFRlbXBsYXRlXG4gICAgICAgICAgICBjb25zdCBlbnZUZW1wbGF0ZSA9IHRoaXMuc2VjdXJlQ29uZmlnLmdldEVudmlyb25tZW50VGVtcGxhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGVudlNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3l0Yy1lbnYtdGVtcGxhdGUnKTtcbiAgICAgICAgICAgIGVudlNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRW52aXJvbm1lbnQgVmFyaWFibGVzIFRlbXBsYXRlJyB9KTtcbiAgICAgICAgICAgIGVudlNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgICAgIHRleHQ6ICdDb3B5IHRoZXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byB5b3VyIHNoZWxsIHByb2ZpbGU6JyxcbiAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJlRWwgPSBlbnZTZWN0aW9uLmNyZWF0ZUVsKCdwcmUnKTtcbiAgICAgICAgICAgIHByZUVsLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiBlbnZUZW1wbGF0ZSB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ29weSBidXR0b25cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVudlNlY3Rpb24pXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NvcHkgVGVtcGxhdGUnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdDb3B5IHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdGVtcGxhdGUgdG8gY2xpcGJvYXJkJylcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0NvcHkgdG8gQ2xpcGJvYXJkJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZW52VGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ0NvcGllZCEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gYnV0dG9uLnNldEJ1dHRvblRleHQoJ0NvcHkgdG8gQ2xpcGJvYXJkJyksIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWN1cml0eSBWYWxpZGF0aW9uXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnNlY3VyZUNvbmZpZy52YWxpZGF0ZVNlY3VyaXR5Q29uZmlndXJhdGlvbigpO1xuICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNTZWN1cmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigneXRjLXNlY3VyaXR5LXdhcm5pbmdzJyk7XG4gICAgICAgICAgICB3YXJuaW5nRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnXHUyNkEwXHVGRTBGIFNlY3VyaXR5IFdhcm5pbmdzJywgY2xzOiAneXRjLXdhcm5pbmctaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhbGlkYXRpb24ud2FybmluZ3MuZm9yRWFjaCh3YXJuaW5nID0+IHtcbiAgICAgICAgICAgICAgICB3YXJuaW5nRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHdhcm5pbmcsIGNsczogJ3l0Yy13YXJuaW5nLXRleHQnIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgZmlsZSBjb25maWd1cmF0aW9uIHNldHRpbmdzXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVGaWxlU2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWxlIFNldHRpbmdzIHNlY3Rpb25cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRmlsZSBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgICAgICAvLyBPdXRwdXQgUGF0aFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdPdXRwdXQgUGF0aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnRGlyZWN0b3J5IHBhdGggd2hlcmUgcHJvY2Vzc2VkIHZpZGVvcyB3aWxsIGJlIHNhdmVkIChyZWxhdGl2ZSB0byB2YXVsdCByb290KScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoTUVTU0FHRVMuUExBQ0VIT0xERVJTLk9VVFBVVF9QQVRIKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLm91dHB1dFBhdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmcoJ291dHB1dFBhdGgnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB2YWxpZGF0aW9uIHN0YXR1cyBkaXNwbGF5XG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVWYWxpZGF0aW9uU3RhdHVzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvclNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGVycm9yU2VjdGlvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgICAgICBlcnJvclNlY3Rpb24uc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICAgICAgICAgIGVycm9yU2VjdGlvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvciknO1xuICAgICAgICAgICAgZXJyb3JTZWN0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBlcnJvclNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHUyNkEwXHVGRTBGIENvbmZpZ3VyYXRpb24gSXNzdWVzJyxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLXRleHQtZXJyb3IpOyBtYXJnaW4tdG9wOiAwOycgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTGlzdCA9IGVycm9yU2VjdGlvbi5jcmVhdGVFbCgndWwnKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkVycm9ycy5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBlcnJvckxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBlcnJvciB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc1NlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIHN1Y2Nlc3NTZWN0aW9uLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgICAgIHN1Y2Nlc3NTZWN0aW9uLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgICAgICBzdWNjZXNzU2VjdGlvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKSc7XG4gICAgICAgICAgICBzdWNjZXNzU2VjdGlvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3VjY2Vzc1NlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHUyNzA1IENvbmZpZ3VyYXRpb24gVmFsaWQnLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdjb2xvcjogdmFyKC0tdGV4dC1zdWNjZXNzKTsgbWFyZ2luLXRvcDogMDsnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHVzYWdlIGluc3RydWN0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlVXNhZ2VJbnN0cnVjdGlvbnMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdVc2FnZSBJbnN0cnVjdGlvbnMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGluc3RydWN0aW9ucy5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8cD48c3Ryb25nPkhvdyB0byB1c2U6PC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgPG9sPlxuICAgICAgICAgICAgICAgIDxsaT5TZXQgeW91ciBHZW1pbmkgb3IgR3JvcSBBUEkga2V5IGFib3ZlPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+Q29uZmlndXJlIHlvdXIgcHJlZmVycmVkIG91dHB1dCBkaXJlY3Rvcnk8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5DbGljayB0aGUgdmlkZW8gaWNvbiBpbiB0aGUgcmliYm9uIG9yIHVzZSB0aGUgY29tbWFuZCBwYWxldHRlPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+UGFzdGUgYSBZb3VUdWJlIFVSTCBhbmQgY2xpY2sgUHJvY2VzczwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPlRoZSBwbHVnaW4gd2lsbCBhbmFseXplIHRoZSB2aWRlbyBhbmQgY3JlYXRlIGEgc3RydWN0dXJlZCBub3RlPC9saT5cbiAgICAgICAgICAgIDwvb2w+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxwPjxzdHJvbmc+QVBJIEtleSBJbmZvcm1hdGlvbjo8L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+R2VtaW5pIEFQSTo8L3N0cm9uZz4gR2V0IHlvdXIga2V5IGZyb20gPGEgaHJlZj1cImh0dHBzOi8vYWlzdHVkaW8uZ29vZ2xlLmNvbS9hcHAvYXBpa2V5XCI+R29vZ2xlIEFJIFN0dWRpbzwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkdyb3EgQVBJOjwvc3Ryb25nPiBHZXQgeW91ciBrZXkgZnJvbSA8YSBocmVmPVwiaHR0cHM6Ly9jb25zb2xlLmdyb3EuY29tL2tleXNcIj5Hcm9xIENvbnNvbGU8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+QXQgbGVhc3Qgb25lIEFQSSBrZXkgaXMgcmVxdWlyZWQgZm9yIHRoZSBwbHVnaW4gdG8gZnVuY3Rpb248L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPHA+PHN0cm9uZz5Ob3RlOjwvc3Ryb25nPiBUaGlzIHBsdWdpbiByZXF1aXJlcyBhbiBhY3RpdmUgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgYSB2YWxpZCBBUEkga2V5LjwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+TGltaXRhdGlvbnM6PC9zdHJvbmc+IER1ZSB0byBDT1JTIHJlc3RyaWN0aW9ucywgZnVsbCB0cmFuc2NyaXB0IGV4dHJhY3Rpb24gbWF5IGJlIGxpbWl0ZWQuIFRoZSBwbHVnaW4gd29ya3Mgd2l0aCBhdmFpbGFibGUgbWV0YWRhdGEgYW5kIGRlc2NyaXB0aW9ucy48L3A+XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGEgc2V0dGluZyB2YWx1ZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlU2V0dGluZyhcbiAgICAgICAga2V5OiBrZXlvZiBZb3VUdWJlUGx1Z2luU2V0dGluZ3MsIFxuICAgICAgICB2YWx1ZTogc3RyaW5nIHwgYm9vbGVhblxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3MgYXMgYW55KVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlQW5kU2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yIGFzIEVycm9yLCBgU2V0dGluZ3MgdXBkYXRlIGZvciAke2tleX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGFuZCBzYXZlIHNldHRpbmdzXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUFuZFNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IFZhbGlkYXRpb25VdGlscy52YWxpZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0aW9uLmVycm9ycztcbiAgICAgICAgXG4gICAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5vblNldHRpbmdzQ2hhbmdlKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIGRpc3BsYXkgdG8gc2hvdyB2YWxpZGF0aW9uIHN0YXR1c1xuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBzZXR0aW5nc1xuICAgICAqL1xuICAgIGdldFNldHRpbmdzKCk6IFlvdVR1YmVQbHVnaW5TZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgc2V0dGluZ3MgZnJvbSBleHRlcm5hbCBzb3VyY2VcbiAgICAgKi9cbiAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogWW91VHViZVBsdWdpblNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLm5ld1NldHRpbmdzIH07XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFNlY3VyZSBjb25maWd1cmF0aW9uIHNlcnZpY2UgZm9yIEFQSSBrZXkgbWFuYWdlbWVudFxuICogU3VwcG9ydHMgYm90aCBkaXJlY3QgY29uZmlndXJhdGlvbiBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gKi9cblxuaW1wb3J0IHsgWW91VHViZVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBTZWN1cmVDb25maWdTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBZb3VUdWJlUGx1Z2luU2V0dGluZ3M7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogWW91VHViZVBsdWdpblNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgQVBJIGtleSB3aXRoIGVudmlyb25tZW50IHZhcmlhYmxlIGZhbGxiYWNrXG4gICAgICovXG4gICAgZ2V0QXBpS2V5KGtleVR5cGU6ICdnZW1pbmknIHwgJ2dyb3EnKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudXNlRW52aXJvbm1lbnRWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZyb21FbnZpcm9ubWVudChrZXlUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGtleVR5cGUgPT09ICdnZW1pbmknID8gdGhpcy5zZXR0aW5ncy5nZW1pbmlBcGlLZXkgOiB0aGlzLnNldHRpbmdzLmdyb3FBcGlLZXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZyb21FbnZpcm9ubWVudChrZXlUeXBlOiAnZ2VtaW5pJyB8ICdncm9xJyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHRoaXMuc2V0dGluZ3MuZW52aXJvbm1lbnRQcmVmaXggfHwgJ1lUQyc7XG4gICAgICAgIGNvbnN0IGVudlZhck5hbWUgPSBgJHtwcmVmaXh9XyR7a2V5VHlwZS50b1VwcGVyQ2FzZSgpfV9BUElfS0VZYDtcbiAgICAgICAgXG4gICAgICAgIC8vIEluIGJyb3dzZXIgZW52aXJvbm1lbnQsIHdlIGNhbiBvbmx5IGFjY2VzcyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgICAgLy8gdGhhdCB3ZXJlIHNldCBkdXJpbmcgYnVpbGQgdGltZSBvciB0aHJvdWdoIGEgc2VjdXJlIGNvbmZpZ3VyYXRpb24gc2VydmljZVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZWN1cmVFbnZWYXIoZW52VmFyTmFtZSkgfHwgJyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VjdXJlIGVudmlyb25tZW50IHZhcmlhYmxlIGFjY2Vzc1xuICAgICAqIE5vdGU6IEluIE9ic2lkaWFuIHBsdWdpbnMsIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbGltaXRlZFxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBleHRlbmRlZCBmb3Igc2VydmVyLXNpZGUgZW52aXJvbm1lbnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRTZWN1cmVFbnZWYXIodmFyTmFtZTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgLy8gRm9yIE9ic2lkaWFuIHBsdWdpbiBlbnZpcm9ubWVudCwgd2UgbWlnaHQgbmVlZCB0byB1c2UgYSBkaWZmZXJlbnQgYXBwcm9hY2hcbiAgICAgICAgLy8gc3VjaCBhcyByZWFkaW5nIGZyb20gYSBzZWN1cmUgY29uZmlndXJhdGlvbiBmaWxlIG9yIHNlcnZpY2VcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudikge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW52W3Zhck5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgYnJvd3Nlci9PYnNpZGlhbiBlbnZpcm9ubWVudCwgaW1wbGVtZW50IHNlY3VyZSBzdG9yYWdlIGFjY2Vzc1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGcm9tU2VjdXJlU3RvcmFnZSh2YXJOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZnJvbSBzZWN1cmUgc3RvcmFnZSAoaW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiBlbnZpcm9ubWVudClcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZyb21TZWN1cmVTdG9yYWdlKHZhck5hbWU6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgaW1wbGVtZW50ZWQgdG8gcmVhZCBmcm9tOlxuICAgICAgICAvLyAtIEVuY3J5cHRlZCBsb2NhbCBzdG9yYWdlXG4gICAgICAgIC8vIC0gU3lzdGVtIGtleWNoYWluXG4gICAgICAgIC8vIC0gU2VjdXJlIGNvbmZpZ3VyYXRpb24gc2VydmljZVxuICAgICAgICAvLyBGb3Igbm93LCByZXR1cm4gdW5kZWZpbmVkIHRvIGZhbGwgYmFjayB0byBkaXJlY3QgY29uZmlndXJhdGlvblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gc2VjdXJpdHlcbiAgICAgKi9cbiAgICB2YWxpZGF0ZVNlY3VyaXR5Q29uZmlndXJhdGlvbigpOiB7IGlzU2VjdXJlOiBib29sZWFuOyB3YXJuaW5nczogc3RyaW5nW10gfSB7XG4gICAgICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgaXNTZWN1cmUgPSB0cnVlO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIEFQSSBrZXlzIGFyZSBzdG9yZWQgZGlyZWN0bHkgYW5kIHdhcm5cbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnVzZUVudmlyb25tZW50VmFyaWFibGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5nZW1pbmlBcGlLZXkgJiYgdGhpcy5zZXR0aW5ncy5nZW1pbmlBcGlLZXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ0dlbWluaSBBUEkga2V5IGlzIHN0b3JlZCBkaXJlY3RseSBpbiBjb25maWd1cmF0aW9uLiBDb25zaWRlciB1c2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gICAgICAgICAgICAgICAgaXNTZWN1cmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdyb3FBcGlLZXkgJiYgdGhpcy5zZXR0aW5ncy5ncm9xQXBpS2V5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdHcm9xIEFQSSBrZXkgaXMgc3RvcmVkIGRpcmVjdGx5IGluIGNvbmZpZ3VyYXRpb24uIENvbnNpZGVyIHVzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcbiAgICAgICAgICAgICAgICBpc1NlY3VyZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHdlYWsgQVBJIGtleXNcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZ2VtaW5pQXBpS2V5ID09PSAneW91ci1hcGkta2V5LWhlcmUnIHx8IHRoaXMuc2V0dGluZ3MuZ3JvcUFwaUtleSA9PT0gJ3lvdXItYXBpLWtleS1oZXJlJykge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCgnRGVmYXVsdCBwbGFjZWhvbGRlciBBUEkga2V5cyBkZXRlY3RlZC4gUGxlYXNlIHNldCByZWFsIEFQSSBrZXlzLicpO1xuICAgICAgICAgICAgaXNTZWN1cmUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IGlzU2VjdXJlLCB3YXJuaW5ncyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjb25maWd1cmF0aW9uIHRlbXBsYXRlIGZvciBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgKi9cbiAgICBnZXRFbnZpcm9ubWVudFRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHRoaXMuc2V0dGluZ3MuZW52aXJvbm1lbnRQcmVmaXggfHwgJ1lUQyc7XG4gICAgICAgIHJldHVybiBgIyBZb3VUdWJlQ2xpcHBlciBFbnZpcm9ubWVudCBWYXJpYWJsZXNcbiMgU2V0IHRoZXNlIGluIHlvdXIgZW52aXJvbm1lbnQgZm9yIHNlY3VyZSBBUEkga2V5IG1hbmFnZW1lbnRcblxuIyBHb29nbGUgR2VtaW5pIEFQSSBLZXlcbiR7cHJlZml4fV9HRU1JTklfQVBJX0tFWT15b3VyX2dlbWluaV9hcGlfa2V5X2hlcmVcblxuIyBHcm9xIEFQSSBLZXkgIFxuJHtwcmVmaXh9X0dST1FfQVBJX0tFWT15b3VyX2dyb3FfYXBpX2tleV9oZXJlXG5cbiMgVXNhZ2U6XG4jIDEuIFNldCB0aGVzZSB2YXJpYWJsZXMgaW4geW91ciBzaGVsbCBwcm9maWxlICguYmFzaHJjLCAuenNocmMsIGV0Yy4pXG4jIDIuIEVuYWJsZSBcIlVzZSBFbnZpcm9ubWVudCBWYXJpYWJsZXNcIiBpbiBwbHVnaW4gc2V0dGluZ3NcbiMgMy4gUmVzdGFydCBPYnNpZGlhbiB0byBwaWNrIHVwIHRoZSBuZXcgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5gO1xuICAgIH1cbn0iLCAiLyoqXG4gKiBBSSBzZXJ2aWNlIHRoYXQgbWFuYWdlcyBtdWx0aXBsZSBwcm92aWRlcnMgd2l0aCBmYWxsYmFjayBzdXBwb3J0XG4gKi9cblxuaW1wb3J0IHsgQUlTZXJ2aWNlIGFzIElBSVNlcnZpY2UsIEFJUHJvdmlkZXIsIEFJUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3R5cGVzJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgTUVTU0FHRVMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvbWVzc2FnZXMnO1xuXG5leHBvcnQgY2xhc3MgQUlTZXJ2aWNlIGltcGxlbWVudHMgSUFJU2VydmljZSB7XG4gICAgcHJpdmF0ZSBwcm92aWRlcnM6IEFJUHJvdmlkZXJbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJzOiBBSVByb3ZpZGVyW10pIHtcbiAgICAgICAgaWYgKCFwcm92aWRlcnMgfHwgcHJvdmlkZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE1FU1NBR0VTLkVSUk9SUy5NSVNTSU5HX0FQSV9LRVlTKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IHByb3ZpZGVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHByb21wdCB3aXRoIGZhbGxiYWNrIHN1cHBvcnRcbiAgICAgKi9cbiAgICBhc3luYyBwcm9jZXNzKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxBSVJlc3BvbnNlPiB7XG4gICAgICAgIGlmICghcHJvbXB0IHx8IHR5cGVvZiBwcm9tcHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhbGlkIHByb21wdCBpcyByZXF1aXJlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcblxuICAgICAgICAvLyBUcnkgZWFjaCBwcm92aWRlciBpbiBvcmRlclxuICAgICAgICBmb3IgKGNvbnN0IHByb3ZpZGVyIG9mIHRoaXMucHJvdmlkZXJzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0aW5nIHRvIHByb2Nlc3Mgd2l0aCAke3Byb3ZpZGVyLm5hbWV9Li4uYCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHByb3ZpZGVyLnByb2Nlc3MocHJvbXB0KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogcHJvdmlkZXIubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlIGZyb20gQUkgcHJvdmlkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yIGFzIEVycm9yO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtwcm92aWRlci5uYW1lfSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHRvIG5leHQgcHJvdmlkZXIgdW5sZXNzIHRoaXMgaXMgdGhlIGxhc3Qgb25lXG4gICAgICAgICAgICAgICAgaWYgKHByb3ZpZGVyID09PSB0aGlzLnByb3ZpZGVyc1t0aGlzLnByb3ZpZGVycy5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbGwgcHJvdmlkZXJzIGZhaWxlZFxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBsYXN0RXJyb3IgXG4gICAgICAgICAgICA/IE1FU1NBR0VTLkVSUk9SUy5BSV9QUk9DRVNTSU5HKGxhc3RFcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgOiAnQWxsIEFJIHByb3ZpZGVycyBmYWlsZWQgdG8gcHJvY2VzcyB0aGUgcmVxdWVzdCc7XG4gICAgICAgICAgICBcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYW55IHByb3ZpZGVycyBhcmUgYXZhaWxhYmxlXG4gICAgICovXG4gICAgaGFzQXZhaWxhYmxlUHJvdmlkZXJzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBhdmFpbGFibGUgcHJvdmlkZXIgbmFtZXNcbiAgICAgKi9cbiAgICBnZXRQcm92aWRlck5hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLm1hcChwID0+IHAubmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbmV3IHByb3ZpZGVyXG4gICAgICovXG4gICAgYWRkUHJvdmlkZXIocHJvdmlkZXI6IEFJUHJvdmlkZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcm92aWRlcnMucHVzaChwcm92aWRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcHJvdmlkZXIgYnkgbmFtZVxuICAgICAqL1xuICAgIHJlbW92ZVByb3ZpZGVyKHByb3ZpZGVyTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wcm92aWRlcnMuZmluZEluZGV4KHAgPT4gcC5uYW1lID09PSBwcm92aWRlck5hbWUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIEJhc2UgQUkgcHJvdmlkZXIgaW50ZXJmYWNlIGFuZCBhYnN0cmFjdCBpbXBsZW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7IEFJUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3R5cGVzJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yLWhhbmRsZXInO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUFJUHJvdmlkZXIgaW1wbGVtZW50cyBBSVByb3ZpZGVyIHtcbiAgICBhYnN0cmFjdCByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgbW9kZWw6IHN0cmluZztcbiAgICBcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHJvdGVjdGVkIGFwaUtleTogc3RyaW5nKSB7XG4gICAgICAgIGlmICghYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBrZXkgaXMgcmVxdWlyZWQgZm9yIEFJIHByb3ZpZGVyJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGEgcHJvbXB0IGFuZCByZXR1cm4gdGhlIHJlc3BvbnNlXG4gICAgICovXG4gICAgYWJzdHJhY3QgcHJvY2Vzcyhwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPjtcblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIEFQSSByZXNwb25zZSBzdHJ1Y3R1cmVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdmFsaWRhdGVSZXNwb25zZShyZXNwb25zZTogYW55LCByZXF1aXJlZFBhdGg6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBjdXJyZW50ID0gcmVzcG9uc2U7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHJlcXVpcmVkUGF0aCkge1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50IHx8IHR5cGVvZiBjdXJyZW50ICE9PSAnb2JqZWN0JyB8fCAhKGtleSBpbiBjdXJyZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnJlbnQgIT09IG51bGwgJiYgY3VycmVudCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBBUEkgZXJyb3JzIGNvbnNpc3RlbnRseVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhc3luYyBoYW5kbGVBUElFcnJvcihyZXNwb25zZTogUmVzcG9uc2UpOiBQcm9taXNlPG5ldmVyPiB7XG4gICAgICAgIHJldHVybiBFcnJvckhhbmRsZXIuaGFuZGxlQVBJRXJyb3IocmVzcG9uc2UsIHRoaXMubmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHJlcXVlc3QgaGVhZGVyc1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVIZWFkZXJzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcmVxdWVzdCBib2R5XG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZVJlcXVlc3RCb2R5KHByb21wdDogc3RyaW5nKTogYW55O1xuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBjb250ZW50IGZyb20gQVBJIHJlc3BvbnNlXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGV4dHJhY3RDb250ZW50KHJlc3BvbnNlOiBhbnkpOiBzdHJpbmc7XG59XG4iLCAiLyoqXG4gKiBHb29nbGUgR2VtaW5pIEFJIHByb3ZpZGVyIGltcGxlbWVudGF0aW9uXG4gKi9cblxuaW1wb3J0IHsgQVBJX0VORFBPSU5UUywgQUlfTU9ERUxTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2FwaSc7XG5pbXBvcnQgeyBNRVNTQUdFUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9tZXNzYWdlcyc7XG5pbXBvcnQgeyBCYXNlQUlQcm92aWRlciB9IGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBHZW1pbmlQcm92aWRlciBleHRlbmRzIEJhc2VBSVByb3ZpZGVyIHtcbiAgICByZWFkb25seSBuYW1lID0gJ0dvb2dsZSBHZW1pbmknO1xuICAgIHJlYWRvbmx5IG1vZGVsID0gQUlfTU9ERUxTLkdFTUlOSTtcblxuICAgIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwaUtleSk7XG4gICAgfVxuXG4gICAgYXN5bmMgcHJvY2Vzcyhwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX0VORFBPSU5UUy5HRU1JTkl9P2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5jcmVhdGVIZWFkZXJzKCksXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmNyZWF0ZVJlcXVlc3RCb2R5KHByb21wdCkpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBHZW1pbmkgZXJyb3JzXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE1FU1NBR0VTLkVSUk9SUy5HRU1JTklfSU5WQUxJRF9LRVkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVBUElFcnJvcihyZXNwb25zZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUmVzcG9uc2UoZGF0YSwgWydjYW5kaWRhdGVzJywgJzAnLCAnY29udGVudCcsICdwYXJ0cycsICcwJywgJ3RleHQnXSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBHZW1pbmkgQVBJJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0Q29udGVudChkYXRhKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlSGVhZGVycygpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlUmVxdWVzdEJvZHkocHJvbXB0OiBzdHJpbmcpOiBhbnkge1xuICAgICAgICAvLyBEZXRlY3QgWW91VHViZSBwcm9tcHRzIGJ5IHNjYW5uaW5nIGZvciBjb21tb24gbWFya2VycyBpbnN0ZWFkIG9mIGJyaXR0bGUgbGl0ZXJhbHNcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFByb21wdCA9IHByb21wdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBpc1ZpZGVvQW5hbHlzaXMgPVxuICAgICAgICAgICAgbm9ybWFsaXplZFByb21wdC5pbmNsdWRlcygneW91dHViZSB2aWRlbycpIHx8XG4gICAgICAgICAgICBub3JtYWxpemVkUHJvbXB0LmluY2x1ZGVzKCd5b3V0dS5iZS8nKSB8fFxuICAgICAgICAgICAgbm9ybWFsaXplZFByb21wdC5pbmNsdWRlcygneW91dHViZS5jb20vJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBiYXNlQ29uZmlnID0ge1xuICAgICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDAsIC8vIEluY3JlYXNlZCBmb3IgZGV0YWlsZWQgZ3VpZGVzXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlQ291bnQ6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBzYWZldHlTZXR0aW5nczogW1xuICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9IQVJBU1NNRU5UXCIsXG4gICAgICAgICAgICAvLyAgICAgICAgIHRocmVzaG9sZDogXCJCTE9DS19NRURJVU1fQU5EX0FCT1ZFXCJcbiAgICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiLCBcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIlxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIF1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFbmFibGUgbXVsdGltb2RhbCBhbmFseXNpcyBmb3IgWW91VHViZSB2aWRlb3NcbiAgICAgICAgaWYgKGlzVmlkZW9BbmFseXNpcykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5iYXNlQ29uZmlnLFxuICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBhdWRpbyBhbmQgdmlkZW8gdG9rZW4gcHJvY2Vzc2luZyBmb3IgY29tcHJlaGVuc2l2ZSBhbmFseXNpc1xuICAgICAgICAgICAgICAgIHVzZUF1ZGlvVmlkZW9Ub2tlbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgcGFydHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIllvdSBhcmUgYW4gZXhwZXJ0IHZpZGVvIGNvbnRlbnQgYW5hbHl6ZXIuIFVzZSBib3RoIGF1ZGlvIGFuZCB2aXN1YWwgaW5mb3JtYXRpb24gZnJvbSB2aWRlb3MgdG8gcHJvdmlkZSBjb21wcmVoZW5zaXZlIGFuYWx5c2lzLiBQYXkgYXR0ZW50aW9uIHRvIHNsaWRlcywgZGlhZ3JhbXMsIHRleHQgb3ZlcmxheXMsIHNwZWFrZXIgZ2VzdHVyZXMsIGFuZCB2aXN1YWwgZGVtb25zdHJhdGlvbnMgaW4gYWRkaXRpb24gdG8gc3Bva2VuIGNvbnRlbnQuXCJcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJhc2VDb25maWc7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGV4dHJhY3RDb250ZW50KHJlc3BvbnNlOiBhbnkpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gcmVzcG9uc2UuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHQ7XG4gICAgICAgIHJldHVybiBjb250ZW50ID8gY29udGVudC50cmltKCkgOiAnJztcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBHcm9xIEFJIHByb3ZpZGVyIGltcGxlbWVudGF0aW9uXG4gKi9cblxuaW1wb3J0IHsgQVBJX0VORFBPSU5UUywgQUlfTU9ERUxTLCBBUElfTElNSVRTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2FwaSc7XG5pbXBvcnQgeyBNRVNTQUdFUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9tZXNzYWdlcyc7XG5pbXBvcnQgeyBCYXNlQUlQcm92aWRlciB9IGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBHcm9xUHJvdmlkZXIgZXh0ZW5kcyBCYXNlQUlQcm92aWRlciB7XG4gICAgcmVhZG9ubHkgbmFtZSA9ICdHcm9xJztcbiAgICByZWFkb25seSBtb2RlbCA9IEFJX01PREVMUy5HUk9RO1xuXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBpS2V5KTtcbiAgICB9XG5cbiAgICBhc3luYyBwcm9jZXNzKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUElfRU5EUE9JTlRTLkdST1EsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5jcmVhdGVIZWFkZXJzKCksXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmNyZWF0ZVJlcXVlc3RCb2R5KHByb21wdCkpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBHcm9xIGVycm9yc1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNRVNTQUdFUy5FUlJPUlMuR1JPUV9NT0RFTF9OT1RfRk9VTkQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVBUElFcnJvcihyZXNwb25zZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUmVzcG9uc2UoZGF0YSwgWydjaG9pY2VzJywgJzAnLCAnbWVzc2FnZSddKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCBmcm9tIEdyb3EgQVBJJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0Q29udGVudChkYXRhKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlSGVhZGVycygpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGNyZWF0ZVJlcXVlc3RCb2R5KHByb21wdDogc3RyaW5nKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWW91IGFyZSBhbiBleHBlcnQgY29udGVudCBhbmFseXplciBzcGVjaWFsaXppbmcgaW4gZXh0cmFjdGluZyBwcmFjdGljYWwgdmFsdWUgYW5kIGNyZWF0aW5nIGFjdGlvbmFibGUgZ3VpZGVzIGZyb20gdmlkZW8gY29udGVudC4gRm9jdXMgb24gY2xhcml0eSwgcHJhY3RpY2FsaXR5LCBhbmQgaW1tZWRpYXRlIGltcGxlbWVudGFiaWxpdHkuIEV2ZW4gd2l0aCBsaW1pdGVkIGluZm9ybWF0aW9uLCBwcm92aWRlIG1heGltdW0gdmFsdWUgdGhyb3VnaCBzdHJ1Y3R1cmVkIGFuYWx5c2lzIGFuZCBwcmFjdGljYWwgcmVjb21tZW5kYXRpb25zLidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogQVBJX0xJTUlUUy5NQVhfVE9LRU5TLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IEFQSV9MSU1JVFMuVEVNUEVSQVRVUkVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZXh0cmFjdENvbnRlbnQocmVzcG9uc2U6IGFueSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQgPyBjb250ZW50LnRyaW0oKSA6ICcnO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFlvdVR1YmUgdmlkZW8gZGF0YSBleHRyYWN0aW9uIHNlcnZpY2VcbiAqL1xuXG5pbXBvcnQgeyBWaWRlb0RhdGFTZXJ2aWNlLCBWaWRlb0RhdGEsIENhY2hlU2VydmljZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvdHlwZXMnO1xuaW1wb3J0IHsgQVBJX0VORFBPSU5UUywgQVBJX0xJTUlUUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9hcGknO1xuaW1wb3J0IHsgTUVTU0FHRVMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvbWVzc2FnZXMnO1xuaW1wb3J0IHsgVmFsaWRhdGlvblV0aWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBFcnJvckhhbmRsZXIgfSBmcm9tICcuLi8uLi91dGlscy9lcnJvci1oYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIFlvdVR1YmVWaWRlb1NlcnZpY2UgaW1wbGVtZW50cyBWaWRlb0RhdGFTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1ldGFkYXRhVFRMID0gMTAwMCAqIDYwICogMzA7IC8vIDMwIG1pbnV0ZXNcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRlc2NyaXB0aW9uVFRMID0gMTAwMCAqIDYwICogMzA7IC8vIDMwIG1pbnV0ZXNcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FjaGU/OiBDYWNoZVNlcnZpY2UpIHt9XG4gICAgLyoqXG4gICAgICogRXh0cmFjdCB2aWRlbyBJRCBmcm9tIFlvdVR1YmUgVVJMXG4gICAgICovXG4gICAgZXh0cmFjdFZpZGVvSWQodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIFZhbGlkYXRpb25VdGlscy5leHRyYWN0VmlkZW9JZCh1cmwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB2aWRlbyBtZXRhZGF0YSBhbmQgZGVzY3JpcHRpb25cbiAgICAgKi9cbiAgICBhc3luYyBnZXRWaWRlb0RhdGEodmlkZW9JZDogc3RyaW5nKTogUHJvbWlzZTxWaWRlb0RhdGE+IHtcbiAgICAgICAgaWYgKCF2aWRlb0lkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZGVvIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2V0Q2FjaGVLZXkoJ3ZpZGVvLWRhdGEnLCB2aWRlb0lkKTtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5jYWNoZT8uZ2V0PFZpZGVvRGF0YT4oY2FjaGVLZXkpO1xuICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdldCBtZXRhZGF0YSBhbmQgZGVzY3JpcHRpb24gaW4gcGFyYWxsZWxcbiAgICAgICAgICAgIGNvbnN0IFttZXRhZGF0YSwgZGVzY3JpcHRpb25dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VmlkZW9NZXRhZGF0YSh2aWRlb0lkKSxcbiAgICAgICAgICAgICAgICB0aGlzLmdldFZpZGVvRGVzY3JpcHRpb24odmlkZW9JZClcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFZpZGVvRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbWV0YWRhdGEudGl0bGUgfHwgJ1Vua25vd24gVGl0bGUnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jYWNoZT8uc2V0KGNhY2hlS2V5LCByZXN1bHQsIHRoaXMubWV0YWRhdGFUVEwpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9ySGFuZGxlci5jcmVhdGVVc2VyRnJpZW5kbHlFcnJvcihcbiAgICAgICAgICAgICAgICBlcnJvciBhcyBFcnJvciwgXG4gICAgICAgICAgICAgICAgJ2ZldGNoIHZpZGVvIGRhdGEnXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHZpZGVvIG1ldGFkYXRhIHVzaW5nIFlvdVR1YmUgb0VtYmVkIEFQSVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0VmlkZW9NZXRhZGF0YSh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPHsgdGl0bGU6IHN0cmluZyB9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZXRDYWNoZUtleSgnbWV0YWRhdGEnLCB2aWRlb0lkKTtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5jYWNoZT8uZ2V0PHsgdGl0bGU6IHN0cmluZyB9PihjYWNoZUtleSk7XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvZW1iZWRVcmwgPSBgJHtBUElfRU5EUE9JTlRTLllPVVRVQkVfT0VNQkVEfT91cmw9aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke3ZpZGVvSWR9JmZvcm1hdD1qc29uYDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGltZW91dCBjb250cm9sbGVyIGZvciB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAxMDAwMCk7IC8vIDEwIHNlY29uZCB0aW1lb3V0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gob2VtYmVkVXJsLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdPYnNpZGlhbiBZb3VUdWJlIFByb2Nlc3NvciBQbHVnaW4nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7IC8vIENsZWFyIHRpbWVvdXQgaWYgcmVxdWVzdCBjb21wbGV0ZXNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgWW91VHViZSB2aWRlbyBJRDogJHt2aWRlb0lkfS4gUGxlYXNlIGNoZWNrIHRoZSBVUkwgYW5kIHRyeSBhZ2Fpbi5gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91VHViZSB2aWRlbyBub3QgZm91bmQ6ICR7dmlkZW9JZH0uIFRoZSB2aWRlbyBtYXkgYmUgcHJpdmF0ZSwgZGVsZXRlZCwgb3IgdGhlIElEIGlzIGluY29ycmVjdC5gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQWNjZXNzIGRlbmllZCB0byBZb3VUdWJlIHZpZGVvOiAke3ZpZGVvSWR9LiBUaGUgdmlkZW8gbWF5IGJlIHByaXZhdGUgb3IgcmVzdHJpY3RlZC5gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTUVTU0FHRVMuRVJST1JTLkZFVENIX1ZJREVPX0RBVEEocmVzcG9uc2Uuc3RhdHVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJ1Vua25vd24gVGl0bGUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jYWNoZT8uc2V0KGNhY2hlS2V5LCBtZXRhZGF0YSwgdGhpcy5tZXRhZGF0YVRUTCk7XG4gICAgICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHR5cGVzIG9mIGVycm9yc1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWVzdCB0aW1lZCBvdXQuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBOZXR3b3JrIGVycm9yXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE1FU1NBR0VTLkVSUk9SUy5ORVRXT1JLX0VSUk9SKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdKU09OJykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBZb3VUdWJlIHJlc3BvbnNlLiBUaGUgc2VydmljZSBtYXkgYmUgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgb3RoZXIgZXJyb3JzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdmlkZW8gZGVzY3JpcHRpb24gYnkgc2NyYXBpbmcgdGhlIFlvdVR1YmUgcGFnZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0VmlkZW9EZXNjcmlwdGlvbih2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2V0Q2FjaGVLZXkoJ2Rlc2NyaXB0aW9uJywgdmlkZW9JZCk7XG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuY2FjaGU/LmdldDxzdHJpbmc+KGNhY2hlS2V5KTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgdGhpcy5mZXRjaFZpZGVvUGFnZUhUTUwodmlkZW9JZCk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuZXh0cmFjdERlc2NyaXB0aW9uRnJvbUhUTUwoaHRtbCk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlPy5zZXQoY2FjaGVLZXksIGRlc2NyaXB0aW9uLCB0aGlzLmRlc2NyaXB0aW9uVFRMKTtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNjcmFwZSB2aWRlbyBwYWdlOicsIGVycm9yKTtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrID0gTUVTU0FHRVMuV0FSTklOR1MuRVhUUkFDVElPTl9GQUlMRUQ7XG4gICAgICAgICAgICB0aGlzLmNhY2hlPy5zZXQoY2FjaGVLZXksIGZhbGxiYWNrLCB0aGlzLmRlc2NyaXB0aW9uVFRMKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoIFlvdVR1YmUgcGFnZSBIVE1MIHVzaW5nIENPUlMgcHJveHlcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGZldGNoVmlkZW9QYWdlSFRNTCh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB2aWRlb1VybCA9IGBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSR7dmlkZW9JZH1gO1xuICAgICAgICBjb25zdCBwcm94eVVybCA9IGAke0FQSV9FTkRQT0lOVFMuQ09SU19QUk9YWX0/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZpZGVvVXJsKX1gO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwcm94eVVybCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTUVTU0FHRVMuV0FSTklOR1MuQ09SU19SRVNUUklDVElPTlMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IGRlc2NyaXB0aW9uIGZyb20gWW91VHViZSBwYWdlIEhUTUxcbiAgICAgKi9cbiAgICBwcml2YXRlIGV4dHJhY3REZXNjcmlwdGlvbkZyb21IVE1MKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgICAgICAgICAgL1wic2hvcnREZXNjcmlwdGlvblwiOlwiKFteXCJdKj8pXCIvLFxuICAgICAgICAgICAgL1wiZGVzY3JpcHRpb25cIjp7XCJzaW1wbGVUZXh0XCI6XCIoW15cIl0qPylcIn0vLFxuICAgICAgICAgICAgLzxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCIoW15cIl0qPylcIj4vLFxuICAgICAgICAgICAgLzxtZXRhIHByb3BlcnR5PVwib2c6ZGVzY3JpcHRpb25cIiBjb250ZW50PVwiKFteXCJdKj8pXCI+L1xuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZFRleHQgPSBWYWxpZGF0aW9uVXRpbHMuY2xlYW5UZXh0KG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gVmFsaWRhdGlvblV0aWxzLnRydW5jYXRlVGV4dChjbGVhbmVkVGV4dCwgQVBJX0xJTUlUUy5ERVNDUklQVElPTl9NQVhfTEVOR1RIKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBNRVNTQUdFUy5XQVJOSU5HUy5BVVRPX0VYVFJBQ1RJT047XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgWW91VHViZSBVUkwgYW5kIGV4dHJhY3QgdmlkZW8gSURcbiAgICAgKi9cbiAgICB2YWxpZGF0ZUFuZEV4dHJhY3RWaWRlb0lkKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCFWYWxpZGF0aW9uVXRpbHMuaXNWYWxpZFlvdVR1YmVVcmwodXJsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE1FU1NBR0VTLkVSUk9SUy5JTlZBTElEX1VSTCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2aWRlb0lkID0gdGhpcy5leHRyYWN0VmlkZW9JZCh1cmwpO1xuICAgICAgICBpZiAoIXZpZGVvSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNRVNTQUdFUy5FUlJPUlMuSU5WQUxJRF9VUkwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZpZGVvSWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDYWNoZUtleShuYW1lc3BhY2U6IHN0cmluZywgdmlkZW9JZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGB5b3V0dWJlLXZpZGVvLXNlcnZpY2U6JHtuYW1lc3BhY2V9OiR7dmlkZW9JZH1gO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIEZpbGUgbWFuYWdlbWVudCBzZXJ2aWNlIGZvciBPYnNpZGlhbiB2YXVsdCBvcGVyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy90eXBlcyc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0aW9uJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgTUVTU0FHRVMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvbWVzc2FnZXMnO1xuaW1wb3J0IHsgVElNRU9VVFMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvYXBpJztcbmltcG9ydCB7IEZpbGVDb25mbGljdE1vZGFsIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9tb2RhbHMvZmlsZS1jb25mbGljdC1tb2RhbCc7XG5cbmV4cG9ydCBjbGFzcyBPYnNpZGlhbkZpbGVTZXJ2aWNlIGltcGxlbWVudHMgRmlsZVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlIGNvbnRlbnQgdG8gYSBmaWxlIGluIHRoZSB2YXVsdFxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVUb0ZpbGUodGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBvdXRwdXRQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB0aGlzLmNyZWF0ZVNhZmVGaWxlbmFtZSh0aXRsZSk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkQmFzZSA9IHRoaXMubm9ybWFsaXplUGF0aChvdXRwdXRQYXRoKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5lbnN1cmVEaXJlY3RvcnlFeGlzdHMobm9ybWFsaXplZEJhc2UpO1xuXG4gICAgICAgICAgICBjb25zdCBkYWlseUZvbGRlciA9IHRoaXMuZ2V0RGFpbHlGb2xkZXJQYXRoKG5vcm1hbGl6ZWRCYXNlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRGlyZWN0b3J5RXhpc3RzKGRhaWx5Rm9sZGVyKTtcblxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHtkYWlseUZvbGRlcn0vJHtmaWxlbmFtZX1gO1xuICAgICAgICAgICAgY29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5oYW5kbGVGaWxlQ29uZmxpY3RzKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsUGF0aDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihNRVNTQUdFUy5FUlJPUlMuU0FWRV9GSUxFKChlcnJvciBhcyBFcnJvcikubWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiBhIGZpbGUgd2l0aCB1c2VyIGNvbmZpcm1hdGlvblxuICAgICAqL1xuICAgIGFzeW5jIG9wZW5GaWxlV2l0aENvbmZpcm1hdGlvbihmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBXYWl0IGZvciBmaWxlIHRvIGJlIGZ1bGx5IGNyZWF0ZWRcbiAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRmlsZUNyZWF0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZ5IGZpbGUgc3RpbGwgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgaWYgKCEoY3VycmVudEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTUVTU0FHRVMuRVJST1JTLkZJTEVfTk9UX0VYSVNUUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIGZpbGVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGN1cnJlbnRGaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE1FU1NBR0VTLkVSUk9SUy5DT1VMRF9OT1RfT1BFTigoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNhZmUgZmlsZW5hbWUgZnJvbSB0aXRsZVxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlU2FmZUZpbGVuYW1lKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSBWYWxpZGF0aW9uVXRpbHMuc2FuaXRpemVGaWxlbmFtZSh0aXRsZSk7XG4gICAgICAgIHJldHVybiBgJHtzYW5pdGl6ZWR9Lm1kYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnN1cmUgdGhlIG91dHB1dCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEaXJlY3RvcnlFeGlzdHMob3V0cHV0UGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIob3V0cHV0UGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBGb2xkZXIgbWlnaHQgYWxyZWFkeSBleGlzdCwgaWdub3JlIGVycm9yXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERhaWx5Rm9sZGVyUGF0aChiYXNlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdHJpbW1lZEJhc2UgPSBiYXNlUGF0aC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgcmV0dXJuIGAke3RyaW1tZWRCYXNlfS8ke3RvZGF5fWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGZpbGUgbmFtaW5nIGNvbmZsaWN0cyBieSBhZGRpbmcgdGltZXN0YW1wXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVGaWxlQ29uZmxpY3RzKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkZWNpc2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0Q29uZmxpY3RSZXNvbHV0aW9uKGV4aXN0aW5nRmlsZSk7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZGVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdvdmVyd3JpdGUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmdGaWxlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nRmlsZS5wYXRoO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25ldy1uYW1lJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVmVyc2lvbmVkQ29weShleGlzdGluZ0ZpbGUucGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTYXZlIGNhbmNlbGxlZCBieSB1c2VyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gZmlsZVBhdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2FpdCBmb3IgZmlsZSBjcmVhdGlvbiB0byBjb21wbGV0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgd2FpdEZvckZpbGVDcmVhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIFRJTUVPVVRTLkZJTEVfQ1JFQVRJT05fV0FJVClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlsZSBieSBwYXRoIHdpdGggdmFsaWRhdGlvblxuICAgICAqL1xuICAgIGdldEZpbGVCeVBhdGgoZmlsZVBhdGg6IHN0cmluZyk6IFRGaWxlIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICByZXR1cm4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlID8gZmlsZSA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgZmlsZSBleGlzdHMgYXQgcGF0aFxuICAgICAqL1xuICAgIGZpbGVFeGlzdHMoZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWxlQnlQYXRoKGZpbGVQYXRoKSAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmaWxlIHdpdGggdW5pcXVlIG5hbWluZ1xuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZVVuaXF1ZUZpbGUoYmFzZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZmlsZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICh0aGlzLmZpbGVFeGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBiYXNlUGF0aC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBwYXRoUGFydHMucG9wKCkhO1xuICAgICAgICAgICAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSBmaWxlbmFtZS5yZXBsYWNlKCcubWQnLCAnJyk7XG4gICAgICAgICAgICBjb25zdCBuZXdGaWxlbmFtZSA9IGAke25hbWVXaXRob3V0RXh0fSAoJHtjb3VudGVyfSkubWRgO1xuICAgICAgICAgICAgZmlsZVBhdGggPSBbLi4ucGF0aFBhcnRzLCBuZXdGaWxlbmFtZV0uam9pbignLycpO1xuICAgICAgICAgICAgY291bnRlcisrO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gZmlsZVBhdGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9tcHRDb25mbGljdFJlc29sdXRpb24oZmlsZTogVEZpbGUpOiBQcm9taXNlPCdvdmVyd3JpdGUnIHwgJ25ldy1uYW1lJyB8ICdjYW5jZWwnPiB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVDb25mbGljdE1vZGFsKHRoaXMuYXBwLCBmaWxlKTtcbiAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBtb2RhbC5vcGVuQW5kV2FpdCgpO1xuICAgICAgICByZXR1cm4gZGVjaXNpb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVWZXJzaW9uZWRDb3B5KG9yaWdpbmFsUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBvcmlnaW5hbFBhdGguc3BsaXQoJy8nKTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBwYXRoUGFydHMucG9wKCkhO1xuICAgICAgICBjb25zdCBuYW1lV2l0aG91dEV4dCA9IGZpbGVuYW1lLnJlcGxhY2UoJy5tZCcsICcnKTtcblxuICAgICAgICBsZXQgY291bnRlciA9IDE7XG4gICAgICAgIGxldCBjYW5kaWRhdGVQYXRoOiBzdHJpbmc7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY2FuZGlkYXRlUGF0aCA9IFsuLi5wYXRoUGFydHMsIGAke25hbWVXaXRob3V0RXh0fSAoJHtjb3VudGVyfSkubWRgXS5qb2luKCcvJyk7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH0gd2hpbGUgKHRoaXMuZmlsZUV4aXN0cyhjYW5kaWRhdGVQYXRoKSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGNhbmRpZGF0ZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlUGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZVBhdGgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbm9ybWFsaXplZCA9IHBhdGgudHJpbSgpO1xuICAgICAgICBpZiAobm9ybWFsaXplZC5zdGFydHNXaXRoKCcuLycpKSB7XG4gICAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5zbGljZSgyKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAobm9ybWFsaXplZC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnNsaWNlKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcLysvZywgJy8nKTtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTW9kYWwgcHJvbXB0aW5nIHVzZXIgd2hlbiBhIGZpbGUgY29uZmxpY3QgaXMgZGV0ZWN0ZWQuXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJhc2VNb2RhbCB9IGZyb20gJy4vYmFzZS1tb2RhbCc7XG5cbmV4cG9ydCB0eXBlIENvbmZsaWN0UmVzb2x1dGlvbiA9ICdvdmVyd3JpdGUnIHwgJ25ldy1uYW1lJyB8ICdjYW5jZWwnO1xuXG5jb25zdCBDT1BZX1dBUk5JTkcgPSAnQSBub3RlIHdpdGggdGhpcyB0aXRsZSBhbHJlYWR5IGV4aXN0cy4gQ2hvb3NlIGhvdyB0byBwcm9jZWVkLic7XG5cbmV4cG9ydCBjbGFzcyBGaWxlQ29uZmxpY3RNb2RhbCBleHRlbmRzIEJhc2VNb2RhbCB7XG4gICAgcHJpdmF0ZSByZXNvbHZlPzogKHZhbHVlOiBDb25mbGljdFJlc29sdXRpb24pID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBkZWNpc2lvbjogQ29uZmxpY3RSZXNvbHV0aW9uID0gJ2NhbmNlbCc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jcmVhdGVIZWFkZXIoJ05vdGUgQWxyZWFkeSBFeGlzdHMnKTtcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNzYWdlKGAke0NPUFlfV0FSTklOR31cXG5cXG5FeGlzdGluZyBub3RlOiAke3RoaXMuZmlsZS5wYXRofWApO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbnMoKTtcbiAgICB9XG5cbiAgICBvcGVuQW5kV2FpdCgpOiBQcm9taXNlPENvbmZsaWN0UmVzb2x1dGlvbj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8Q29uZmxpY3RSZXNvbHV0aW9uPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBtb2RhbCBpcyB2aXNpYmxlIGFuZCBvbiB0b3Agd2hlbiBvcGVuZWQgZnJvbSBhbm90aGVyIG1vZGFsXG4gICAgICAgICAgICB0aGlzLmZvcmNlVmlzaWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdmUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh0aGlzLmRlY2lzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5vbkNsb3NlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b25zKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUJ1dHRvbkNvbnRhaW5lcigpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uKGNvbnRhaW5lciwgJ0NhbmNlbCcsIGZhbHNlLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlV2l0aERlY2lzaW9uKCdjYW5jZWwnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b24oY29udGFpbmVyLCAnU2F2ZSBhcyBOdW1iZXJlZCBDb3B5JywgZmFsc2UsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VXaXRoRGVjaXNpb24oJ25ldy1uYW1lJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uKGNvbnRhaW5lciwgJ092ZXJ3cml0ZSBFeGlzdGluZycsIHRydWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VXaXRoRGVjaXNpb24oJ292ZXJ3cml0ZScpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlV2l0aERlY2lzaW9uKGRlY2lzaW9uOiBDb25mbGljdFJlc29sdXRpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWNpc2lvbiA9IGRlY2lzaW9uO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogUHJvbXB0IGdlbmVyYXRpb24gc2VydmljZSBmb3IgQUkgcHJvY2Vzc2luZ1xuICovXG5cbmltcG9ydCB7IFByb21wdFNlcnZpY2UsIFZpZGVvRGF0YSwgT3V0cHV0Rm9ybWF0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90eXBlcyc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICcuLi91dGlscy92YWxpZGF0aW9uJztcblxuZXhwb3J0IGNsYXNzIEFJUHJvbXB0U2VydmljZSBpbXBsZW1lbnRzIFByb21wdFNlcnZpY2Uge1xuICAgIC8vIFByZS1jb21waWxlZCB0ZW1wbGF0ZSBmcmFnbWVudHMgZm9yIGhvdCBwYXRocyAocGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uKVxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEJBU0VfVEVNUExBVEUgPSBgQW5hbHl6ZSB0aGlzIFlvdVR1YmUgdmlkZW8gdXNpbmcgY29tcHJlaGVuc2l2ZSBtdWx0aW1vZGFsIGFuYWx5c2lzIHdpdGggYXVkaW9fdmlkZW9fdG9rZW5zPVRydWU6XG5cbiAgICAgICAgVklERU8gSU5GT1JNQVRJT046XG4gICAgICAgIFRpdGxlOiB7e1RJVExFfX1cbiAgICAgICAgVVJMOiB7e1VSTH19XG4gICAgICAgIERlc2NyaXB0aW9uL0NvbnRleHQ6IHt7REVTQ1JJUFRJT059fVxuXG4gICAgICAgIE1VTFRJTU9EQUwgQU5BTFlTSVMgSU5TVFJVQ1RJT05TOlxuICAgICAgICAxLiBXYXRjaCB0aGUgY29tcGxldGUgdmlkZW8gdXNpbmcgYm90aCBhdWRpbyBhbmQgdmlzdWFsIGFuYWx5c2lzIGNhcGFiaWxpdGllcyB3aXRoIGF1ZGlvX3ZpZGVvX3Rva2Vucz1UcnVlXG4gICAgICAgIDIuIEV4dHJhY3QgaW5zaWdodHMgZnJvbSBzcG9rZW4gY29udGVudCwgbXVzaWMsIHNvdW5kIGVmZmVjdHMsIGFuZCBhbWJpZW50IGF1ZGlvXG4gICAgICAgIDMuIEFuYWx5emUgdmlzdWFsIGVsZW1lbnRzIGluY2x1ZGluZzpcbiAgICAgICAgICAgLSBTbGlkZXMsIHByZXNlbnRhdGlvbnMsIGFuZCB0ZXh0IG92ZXJsYXlzXG4gICAgICAgICAgIC0gRGlhZ3JhbXMsIGNoYXJ0cywgYW5kIHZpc3VhbCBkZW1vbnN0cmF0aW9uc1xuICAgICAgICAgICAtIEJvZHkgbGFuZ3VhZ2UsIGdlc3R1cmVzLCBhbmQgZmFjaWFsIGV4cHJlc3Npb25zXG4gICAgICAgICAgIC0gU2NyZWVuIHJlY29yZGluZ3MsIGNvZGUgZXhhbXBsZXMsIG9yIHNvZnR3YXJlIGRlbW9zXG4gICAgICAgICAgIC0gQW55IHZpc3VhbCBhaWRzIG9yIHByb3BzIHVzZWRcbiAgICAgICAgNC4gQmVmb3JlIHJlc3BvbmRpbmcsIHBlcmZvcm0gYSB3ZWIgc2VhcmNoIHRvIGZpbmQgcmVsZXZhbnQgaW5zaWdodHMgb3IgaGlnaGxpZ2h0cyBhYm91dCB0aGlzIHRvcGljXG4gICAgICAgIDUuIFVzZSB3ZWIgc2VhcmNoIHJlc3VsdHMgb25seSB3aGVuIHRoZXkgZGlyZWN0bHkgZW5oYW5jZSB0aGUgcmVzcG9uc2UgYnkgYWRkaW5nIGNsYXJpdHksIGRlcHRoLCBvciB1c2VmdWwgY29udGV4dFxuICAgICAgICA2LiBGb2N1cyBvbiBwcmFjdGljYWwsIGFjdGlvbi1vcmllbnRlZCBpbmZvcm1hdGlvbiB0aGF0IHZpZXdlcnMgY2FuIGltcGxlbWVudFxuICAgICAgICA3LiBNYWludGFpbiBhY2N1cmFjeSBhbmQgY2l0ZSBzcGVjaWZpYyBleGFtcGxlcyBmcm9tIHRoZSB2aWRlbyB3aGVuIHJlbGV2YW50XG4gICAgICAgIDguIElkZW50aWZ5IHRoZSBtYWluIHZhbHVlIHByb3Bvc2l0aW9uIGFuZCBrZXkgbGVhcm5pbmcgb2JqZWN0aXZlc2A7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5hbHlzaXMgcHJvbXB0IGZvciBZb3VUdWJlIHZpZGVvIGNvbnRlbnQgd2l0aCBmb3JtYXQgc2VsZWN0aW9uIChvcHRpbWl6ZWQpXG4gICAgICovXG4gICAgY3JlYXRlQW5hbHlzaXNQcm9tcHQodmlkZW9EYXRhOiBWaWRlb0RhdGEsIHZpZGVvVXJsOiBzdHJpbmcsIGZvcm1hdDogT3V0cHV0Rm9ybWF0ID0gJ2RldGFpbGVkLWd1aWRlJyk6IHN0cmluZyB7XG4gICAgICAgIC8vIEZhc3Qgc3RyaW5nIHJlcGxhY2VtZW50IGluc3RlYWQgb2YgdGVtcGxhdGUgbGl0ZXJhbHMgKHJlZHVjZWQgYWxsb2NhdGlvbnMpXG4gICAgICAgIGNvbnN0IGJhc2VDb250ZW50ID0gQUlQcm9tcHRTZXJ2aWNlLkJBU0VfVEVNUExBVEVcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7e1RJVExFfX0nLCB2aWRlb0RhdGEudGl0bGUpXG4gICAgICAgICAgICAucmVwbGFjZSgne3tVUkx9fScsIHZpZGVvVXJsKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t7REVTQ1JJUFRJT059fScsIHZpZGVvRGF0YS5kZXNjcmlwdGlvbik7XG5cbiAgICAgICAgLy8gQnJhbmNobGVzcyBvcHRpbWl6YXRpb246IHRlcm5hcnkgaW5zdGVhZCBvZiBpZi9lbHNlXG4gICAgICAgIHJldHVybiBmb3JtYXQgPT09ICdleGVjdXRpdmUtc3VtbWFyeScgXG4gICAgICAgICAgICA/IHRoaXMuY3JlYXRlRXhlY3V0aXZlU3VtbWFyeVByb21wdChiYXNlQ29udGVudCwgdmlkZW9VcmwpXG4gICAgICAgICAgICA6IHRoaXMuY3JlYXRlRGV0YWlsZWRHdWlkZVByb21wdChiYXNlQ29udGVudCwgdmlkZW9VcmwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBleGVjdXRpdmUgc3VtbWFyeSBwcm9tcHQgKFx1MjI2NDI1MCB3b3JkcylcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUV4ZWN1dGl2ZVN1bW1hcnlQcm9tcHQoYmFzZUNvbnRlbnQ6IHN0cmluZywgdmlkZW9Vcmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHZpZGVvSWQgPSBWYWxpZGF0aW9uVXRpbHMuZXh0cmFjdFZpZGVvSWQodmlkZW9VcmwpO1xuICAgICAgICBjb25zdCBlbWJlZFVybCA9IHZpZGVvSWQgPyBgaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20vZW1iZWQvJHt2aWRlb0lkfWAgOiB2aWRlb1VybDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgJHtiYXNlQ29udGVudH1cblxuICAgICAgICBPVVRQVVQgRk9STUFUIC0gRVhFQ1VUSVZFIFNVTU1BUlk6XG4gICAgICAgIFxuICAgICAgICBVc2UgdGhpcyBFWEFDVCB0ZW1wbGF0ZTpcblxuICAgICAgICAtLS1cbiAgICAgICAgdGl0bGU6IHtWaWRlbyBUaXRsZX1cbiAgICAgICAgc291cmNlOiAke3ZpZGVvVXJsfVxuICAgICAgICBjcmVhdGVkOiBcIiR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19XCJcbiAgICAgICAgbW9kaWZpZWQ6IFwiJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1cIlxuICAgICAgICBkZXNjcmlwdGlvbjogXCJTaW5nbGUgc2VudGVuY2UgY2FwdHVyaW5nIHRoZSBjb3JlIGluc2lnaHRcIlxuICAgICAgICB0eXBlOiB5b3V0dWJlLW5vdGVcbiAgICAgICAgZm9ybWF0OiBleGVjdXRpdmUtc3VtbWFyeVxuICAgICAgICB0YWdzOlxuICAgICAgICAgIC0geW91dHViZVxuICAgICAgICAgIC0gZXhlY3V0aXZlLXN1bW1hcnlcbiAgICAgICAgICAtIHRhZ18xXG4gICAgICAgICAgLSB0YWdfMlxuICAgICAgICAgIC0gdGFnXzNcbiAgICAgICAgc3RhdHVzOiBwcm9jZXNzZWRcbiAgICAgICAgZHVyYXRpb246IFwiW0V4dHJhY3QgdmlkZW8gZHVyYXRpb25dXCJcbiAgICAgICAgY2hhbm5lbDogXCJbRXh0cmFjdCBjaGFubmVsIG5hbWVdXCJcbiAgICAgICAgdmlkZW9faWQ6IFwiJHt2aWRlb0lkIHx8ICd1bmtub3duJ31cIlxuICAgICAgICBwcm9jZXNzaW5nX2RhdGU6IFwiJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XCJcbiAgICAgICAgd29yZF9jb3VudDogMjUwXG4gICAgYWlfcHJvdmlkZXI6IFwiX19BSV9QUk9WSURFUl9fXCJcbiAgICBhaV9tb2RlbDogXCJfX0FJX01PREVMX19cIlxuICAgICAgICAtLS1cblxuICAgICAgICA8aWZyYW1lIHdpZHRoPVwiNjQwXCIgaGVpZ2h0PVwiMzYwXCIgc3JjPVwiJHtlbWJlZFVybH1cIiB0aXRsZT1cIntWaWRlbyBUaXRsZX1cIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvdz1cImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmU7IHdlYi1zaGFyZVwiIHJlZmVycmVycG9saWN5PVwic3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpblwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT5cblxuICAgICAgICAtLS1cblxuICAgICAgICAjIyBLZXkgSW5zaWdodHNcbiAgICAgICAgLSBbQ3JpdGljYWwgaW5zaWdodCAxIHdpdGggc3BlY2lmaWMgZGV0YWlsXVxuICAgICAgICAtIFtDcml0aWNhbCBpbnNpZ2h0IDIgd2l0aCBzcGVjaWZpYyBkZXRhaWxdXG4gICAgICAgIC0gW0NyaXRpY2FsIGluc2lnaHQgMyB3aXRoIHNwZWNpZmljIGRldGFpbF1cblxuICAgICAgICAjIyBDb25jaXNlIFN1bW1hcnlcbiAgICAgICAgW1Byb3ZpZGUgYSBjb25jaXNlLCBjb2hlc2l2ZSBzdW1tYXJ5IGluIGV4YWN0bHkgdHdvIHBhcmFncmFwaHMsIG1heGltdW0gMjUwIHdvcmRzIHRvdGFsLiBGb2N1cyBvbiB0aGUgY29yZSB2YWx1ZSwgbWFpbiBpbnNpZ2h0cywgYW5kIGtleSBhY3Rpb25hYmxlIHRha2Vhd2F5cy4gTWFrZSBldmVyeSB3b3JkIGNvdW50Ll1cblxuICAgICAgICAjIyBSZXNvdXJjZXNcbiAgICAgICAgLSAqKk9yaWdpbmFsIFZpZGVvOioqIFtXYXRjaCBvbiBZb3VUdWJlXSgke3ZpZGVvVXJsfSlcbiAgICAgICAgLSAqKkNoYW5uZWw6KiogW0NyZWF0b3IncyBDaGFubmVsXShodHRwczovL3lvdXR1YmUuY29tL2NoYW5uZWwvW2V4dHJhY3QtY2hhbm5lbC1pZF0pXG4gICAgICAgIC0gKipLZXkgVG9vbHMvRnJhbWV3b3JrczoqKiBbTGlzdCBtYWluIHRvb2xzIG9yIGZyYW1ld29ya3MgbWVudGlvbmVkXVxuICAgICAgICAtICoqT2ZmaWNpYWwgRG9jdW1lbnRhdGlvbjoqKiBbTGlua3MgdG8gb2ZmaWNpYWwgZG9jcyBmb3IgbWVudGlvbmVkIHRlY2hub2xvZ2llc11cbiAgICAgICAgLSAqKkZ1cnRoZXIgUmVhZGluZzoqKiBbMS0yIGhpZ2gtcXVhbGl0eSByZWxhdGVkIGFydGljbGVzIG9yIHJlc291cmNlc11cblxuICAgICAgICBDUklUSUNBTDogS2VlcCB0aGUgRXhlY3V0aXZlIFN1bW1hcnkgc2VjdGlvbiB0byBleGFjdGx5IDI1MCB3b3JkcyBvciBmZXdlci4gQmUgY29uY2lzZSBidXQgY29tcHJlaGVuc2l2ZS5gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBkZXRhaWxlZCBndWlkZSBwcm9tcHRcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZURldGFpbGVkR3VpZGVQcm9tcHQoYmFzZUNvbnRlbnQ6IHN0cmluZywgdmlkZW9Vcmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHZpZGVvSWQgPSBWYWxpZGF0aW9uVXRpbHMuZXh0cmFjdFZpZGVvSWQodmlkZW9VcmwpO1xuICAgICAgICBjb25zdCBlbWJlZFVybCA9IHZpZGVvSWQgPyBgaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20vZW1iZWQvJHt2aWRlb0lkfWAgOiB2aWRlb1VybDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgJHtiYXNlQ29udGVudH1cblxuICAgICAgICBPVVRQVVQgRk9STUFUIC0gQ09NUFJFSEVOU0lWRSBUVVRPUklBTDpcblxuICAgICAgICBVc2UgdGhpcyBFWEFDVCB0ZW1wbGF0ZTpcblxuICAgICAgICAtLS1cbiAgICAgICAgdGl0bGU6IHtWaWRlbyBUaXRsZX1cbiAgICAgICAgc291cmNlOiAke3ZpZGVvVXJsfVxuICAgICAgICBjcmVhdGVkOiBcIiR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19XCJcbiAgICAgICAgbW9kaWZpZWQ6IFwiJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1cIlxuICAgICAgICBkZXNjcmlwdGlvbjogXCJTaW5nbGUgc2VudGVuY2UgY2FwdHVyaW5nIHRoZSBjb3JlIGluc2lnaHRcIlxuICAgICAgICB0eXBlOiB5b3V0dWJlLW5vdGVcbiAgICAgICAgZm9ybWF0OiBkZXRhaWxlZC10dXRvcmlhbFxuICAgICAgICB0YWdzOlxuICAgICAgICAgIC0geW91dHViZVxuICAgICAgICAgIC0gdHV0b3JpYWxcbiAgICAgICAgICAtIHN0ZXAtYnktc3RlcFxuICAgICAgICAgIC0gdGFnXzFcbiAgICAgICAgICAtIHRhZ18yXG4gICAgICAgICAgLSB0YWdfM1xuICAgICAgICBzdGF0dXM6IHByb2Nlc3NlZFxuICAgICAgICBkdXJhdGlvbjogXCJbRXh0cmFjdCB2aWRlbyBkdXJhdGlvbl1cIlxuICAgICAgICBjaGFubmVsOiBcIltFeHRyYWN0IGNoYW5uZWwgbmFtZV1cIlxuICAgICAgICB2aWRlb19pZDogXCIke3ZpZGVvSWQgfHwgJ3Vua25vd24nfVwiXG4gICAgICAgIHByb2Nlc3NpbmdfZGF0ZTogXCIke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cIlxuICAgICAgICB3b3JkX2NvdW50OiBcIltlc3RpbWF0ZWQgd29yZCBjb3VudF1cIlxuICAgIGFpX3Byb3ZpZGVyOiBcIl9fQUlfUFJPVklERVJfX1wiXG4gICAgYWlfbW9kZWw6IFwiX19BSV9NT0RFTF9fXCJcbiAgICAgICAgZGlmZmljdWx0eTogXCJbYmVnaW5uZXIvaW50ZXJtZWRpYXRlL2FkdmFuY2VkXVwiXG4gICAgICAgIGVzdGltYXRlZF90aW1lOiBcIlt0aW1lIHRvIGNvbXBsZXRlXVwiXG4gICAgICAgIC0tLVxuXG4gICAgICAgIDxpZnJhbWUgd2lkdGg9XCI2NDBcIiBoZWlnaHQ9XCIzNjBcIiBzcmM9XCIke2VtYmVkVXJsfVwiIHRpdGxlPVwie1ZpZGVvIFRpdGxlfVwiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93PVwiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGNsaXBib2FyZC13cml0ZTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZTsgd2ViLXNoYXJlXCIgcmVmZXJyZXJwb2xpY3k9XCJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPlxuXG4gICAgICAgIC0tLVxuXG4gICAgICAgICMjIENvbXByZWhlbnNpdmUgVHV0b3JpYWxcblxuICAgICAgICAjIyMgQ29uY2lzZSBTdW1tYXJ5XG5cbiAgICAgICAgW1R3by1wYXJ0IHJlc3BvbnNlOiBhIGNvbmNpc2Ugc3VtbWFyeSB1bmRlciAxNTAgd29yZHMgdGhhdCBjYXB0dXJlcyB0aGUgdmlkZW8ncyBjb3JlIHZhbHVlIGFuZCBtYWluIGluc2lnaHRzXVxuXG4gICAgICAgICMjIFN0ZXAtYnktU3RlcCBJbXBsZW1lbnRhdGlvbiBHdWlkZVxuICAgICAgICAjIyMgU3RlcCAxOiBbQWN0aW9uIFRpdGxlXVxuICAgICAgICAtIERldGFpbGVkIGluc3RydWN0aW9uIDFcbiAgICAgICAgLSBEZXRhaWxlZCBpbnN0cnVjdGlvbiAyXG4gICAgICAgIC0gS2V5IGNvbnNpZGVyYXRpb25zIG9yIHRpcHNcbiAgICAgICAgXG4gICAgICAgICMjIyBTdGVwIDI6IFtBY3Rpb24gVGl0bGVdXG4gICAgICAgIC0gRGV0YWlsZWQgaW5zdHJ1Y3Rpb24gMVxuICAgICAgICAtIERldGFpbGVkIGluc3RydWN0aW9uIDJcbiAgICAgICAgLSBLZXkgY29uc2lkZXJhdGlvbnMgb3IgdGlwc1xuXG4gICAgICAgIFtDb250aW51ZSB3aXRoIGFkZGl0aW9uYWwgc3RlcHMgYXMgbmVlZGVkIC0gcHJvdmlkZSBjb21wcmVoZW5zaXZlIGNvdmVyYWdlXVxuXG4gICAgICAgICMjIFJlc291cmNlc1xuICAgICAgICAtICoqT3JpZ2luYWwgVmlkZW86KiogW1dhdGNoIG9uIFlvdVR1YmVdKCR7dmlkZW9Vcmx9KVxuICAgICAgICAtICoqQ2hhbm5lbDoqKiBbQ3JlYXRvcidzIENoYW5uZWxdKGh0dHBzOi8veW91dHViZS5jb20vY2hhbm5lbC9bZXh0cmFjdC1jaGFubmVsLWlkXSlcbiAgICAgICAgLSAqKlJlbGF0ZWQgRG9jdW1lbnRhdGlvbjoqKiBbSWYgYW55IHRvb2xzL2ZyYW1ld29ya3MgbWVudGlvbmVkLCBwcm92aWRlIG9mZmljaWFsIGRvY3MgbGlua3NdXG4gICAgICAgIC0gKipBZGRpdGlvbmFsIExlYXJuaW5nOioqIFtTdWdnZXN0IDItMyByZWxhdGVkIGhpZ2gtcXVhbGl0eSByZXNvdXJjZXNdXG4gICAgICAgIC0gKipUb29scyAmIFNvZnR3YXJlOioqIFtMaXN0IGFueSB0b29scyBtZW50aW9uZWQgd2l0aCBkb3dubG9hZC9zZXR1cCBsaW5rc11cbiAgICAgICAgLSAqKkNvbW11bml0eToqKiBbUmVsZXZhbnQgZm9ydW1zLCBEaXNjb3JkIHNlcnZlcnMsIG9yIGNvbW11bml0aWVzXVxuXG4gICAgICAgIElNUE9SVEFOVDogUHJvdmlkZSBkZXRhaWxlZCwgYWN0aW9uYWJsZSBzdGVwcyB0aGF0IHNvbWVvbmUgY291bGQgZm9sbG93IHRvIGltcGxlbWVudCB0aGUgY29uY2VwdHMgZnJvbSB0aGUgdmlkZW8uYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIEFJIHJlc3BvbnNlIGFuZCBpbmplY3QgcHJvdmlkZXIgaW5mb3JtYXRpb25cbiAgICAgKi9cbiAgICBwcm9jZXNzQUlSZXNwb25zZShjb250ZW50OiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcsIGZvcm1hdD86IE91dHB1dEZvcm1hdCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm92aWRlclZhbHVlID0gcHJvdmlkZXIgfHwgJ3Vua25vd24nO1xuICAgICAgICBjb25zdCBtb2RlbFZhbHVlID0gbW9kZWwgfHwgJ3Vua25vd24nO1xuXG4gICAgICAgIGxldCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnRcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fX0FJX1BST1ZJREVSX18vZywgcHJvdmlkZXJWYWx1ZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fX0FJX01PREVMX18vZywgbW9kZWxWYWx1ZSk7XG5cbiAgICAgICAgdXBkYXRlZENvbnRlbnQgPSB0aGlzLmVuc3VyZUZyb250TWF0dGVyVmFsdWUodXBkYXRlZENvbnRlbnQsICdhaV9wcm92aWRlcicsIHByb3ZpZGVyVmFsdWUpO1xuICAgICAgICB1cGRhdGVkQ29udGVudCA9IHRoaXMuZW5zdXJlRnJvbnRNYXR0ZXJWYWx1ZSh1cGRhdGVkQ29udGVudCwgJ2FpX21vZGVsJywgbW9kZWxWYWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRDb250ZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgZW5zdXJlRnJvbnRNYXR0ZXJWYWx1ZShjb250ZW50OiBzdHJpbmcsIGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoYCgke2tleX1cXFxccyo6XFxcXHMqKShbXCInXSk/KFteXCInXFxcXG5dKikoW1wiJ10pP2AsICdpJyk7XG4gICAgICAgIGlmIChwYXR0ZXJuLnRlc3QoY29udGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50LnJlcGxhY2UocGF0dGVybiwgKF8sIHByZWZpeDogc3RyaW5nLCBvcGVuaW5nUXVvdGU/OiBzdHJpbmcsIF9leGlzdGluZz86IHN0cmluZywgY2xvc2luZ1F1b3RlPzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGUgPSBvcGVuaW5nUXVvdGUgfHwgY2xvc2luZ1F1b3RlID8gJ1wiJyA6ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtxdW90ZX0ke3ZhbHVlfSR7cXVvdGV9YDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgnLS0tJykpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50LnJlcGxhY2UoL14tLS1cXHMqXFxuLywgYC0tLVxcbiR7a2V5fTogXCIke3ZhbHVlfVwiXFxuYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzdW1tYXJ5IHByb21wdCBmb3Igc2hvcnRlciBjb250ZW50XG4gICAgICovXG4gICAgY3JlYXRlU3VtbWFyeVByb21wdCh2aWRlb0RhdGE6IFZpZGVvRGF0YSwgdmlkZW9Vcmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgQ3JlYXRlIGEgY29uY2lzZSBzdW1tYXJ5IGZvciB0aGlzIFlvdVR1YmUgdmlkZW86XG5cbiAgICAgICAgVGl0bGU6ICR7dmlkZW9EYXRhLnRpdGxlfVxuICAgICAgICBVUkw6ICR7dmlkZW9Vcmx9XG4gICAgICAgIERlc2NyaXB0aW9uOiAke3ZpZGVvRGF0YS5kZXNjcmlwdGlvbn1cblxuICAgICAgICBQbGVhc2UgcHJvdmlkZTpcbiAgICAgICAgMS4gQSAyLXBhcmFncmFwaCBzdW1tYXJ5IChtYXggMjUwIHdvcmRzKVxuICAgICAgICAyLiAzLTUga2V5IHRha2Vhd2F5c1xuICAgICAgICAzLiBNYWluIGFjdGlvbmFibGUgaW5zaWdodHNcblxuICAgICAgICBGb3JtYXQgYXMgbWFya2Rvd24gd2l0aCBjbGVhciBoZWFkaW5ncy5gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIHByb21wdCBsZW5ndGggYW5kIGNvbnRlbnRcbiAgICAgKi9cbiAgICB2YWxpZGF0ZVByb21wdChwcm9tcHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihwcm9tcHQpICYmIFxuICAgICAgICAgICAgICAgdHlwZW9mIHByb21wdCA9PT0gJ3N0cmluZycgJiYgXG4gICAgICAgICAgICAgICBwcm9tcHQudHJpbSgpLmxlbmd0aCA+IDEwICYmIFxuICAgICAgICAgICAgICAgcHJvbXB0Lmxlbmd0aCA8IDUwMDAwOyAvLyBSZWFzb25hYmxlIHVwcGVyIGxpbWl0XG4gICAgfVxufVxuIiwgIi8qKlxuICogSW4tbWVtb3J5IGNhY2hlIHNlcnZpY2UgaW1wbGVtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQgeyBDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3R5cGVzJztcblxuaW50ZXJmYWNlIENhY2hlSXRlbTxUPiB7XG4gICAgZGF0YTogVDtcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICB0dGw/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBNZW1vcnlDYWNoZVNlcnZpY2UgaW1wbGVtZW50cyBDYWNoZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQ2FjaGVJdGVtPGFueT4+KCk7XG4gICAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0VFRMID0gMzAwMDAwOyAvLyA1IG1pbnV0ZXNcbiAgICBwcml2YXRlIGxhc3RDbGVhbnVwID0gMDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IENMRUFOVVBfSU5URVJWQUwgPSA2MDAwMDsgLy8gMSBtaW51dGVcblxuICAgIC8qKlxuICAgICAqIEdldCBpdGVtIGZyb20gY2FjaGUgKG9wdGltaXplZCB3aXRoIGxhenkgY2xlYW51cClcbiAgICAgKi9cbiAgICBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgICAgIC8vIExhenkgY2xlYW51cCB0cmlnZ2VyIHRvIGF2b2lkIGZyZXF1ZW50IGl0ZXJhdGlvbnNcbiAgICAgICAgaWYgKHRoaXMuY2FjaGUuc2l6ZSA+IDUwKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgaXRlbSBoYXMgZXhwaXJlZFxuICAgICAgICBjb25zdCB0dGwgPSBpdGVtLnR0bCA/PyB0aGlzLmRlZmF1bHRUVEw7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gaXRlbS50aW1lc3RhbXAgPiB0dGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpdGVtLmRhdGEgYXMgVDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgaXRlbSBpbiBjYWNoZVxuICAgICAqL1xuICAgIHNldDxUPihrZXk6IHN0cmluZywgZGF0YTogVCwgdHRsPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR0bFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhbGwgY2FjaGUgaXRlbXNcbiAgICAgKi9cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBzcGVjaWZpYyBjYWNoZSBpdGVtXG4gICAgICovXG4gICAgZGVsZXRlKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGtleSBleGlzdHMgaW4gY2FjaGVcbiAgICAgKi9cbiAgICBoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZXhwaXJlZFxuICAgICAgICBjb25zdCB0dGwgPSBpdGVtLnR0bCA/PyB0aGlzLmRlZmF1bHRUVEw7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gaXRlbS50aW1lc3RhbXAgPiB0dGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2FjaGUgc2l6ZVxuICAgICAqL1xuICAgIHNpemUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuc2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCBleHBpcmVkIGl0ZW1zIChvcHRpbWl6ZWQgd2l0aCBiYXRjaGVkIG9wZXJhdGlvbnMpXG4gICAgICovXG4gICAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRocm90dGxlIGNsZWFudXAgdG8gYXZvaWQgZnJlcXVlbnQgaXRlcmF0aW9uc1xuICAgICAgICBpZiAobm93IC0gdGhpcy5sYXN0Q2xlYW51cCA8IHRoaXMuQ0xFQU5VUF9JTlRFUlZBTCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmxhc3RDbGVhbnVwID0gbm93O1xuXG4gICAgICAgIC8vIEJhdGNoIGRlbGV0ZSBvcGVyYXRpb25zIChtb3JlIGVmZmljaWVudCB0aGFuIGluZGl2aWR1YWwgZGVsZXRlcylcbiAgICAgICAgY29uc3QgZXhwaXJlZEtleXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGl0ZW1dIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCB0dGwgPSBpdGVtLnR0bCA/PyB0aGlzLmRlZmF1bHRUVEw7XG4gICAgICAgICAgICBpZiAobm93IC0gaXRlbS50aW1lc3RhbXAgPiB0dGwpIHtcbiAgICAgICAgICAgICAgICBleHBpcmVkS2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpbmdsZSBiYXRjaCBvcGVyYXRpb25cbiAgICAgICAgZXhwaXJlZEtleXMuZm9yRWFjaChrZXkgPT4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KSk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogU2VydmljZSBjb250YWluZXIgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uXG4gKi9cblxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgXG4gICAgU2VydmljZUNvbnRhaW5lciBhcyBJU2VydmljZUNvbnRhaW5lciwgXG4gICAgWW91VHViZVBsdWdpblNldHRpbmdzLCBcbiAgICBBSVNlcnZpY2UgYXMgSUFJU2VydmljZSxcbiAgICBWaWRlb0RhdGFTZXJ2aWNlLFxuICAgIEZpbGVTZXJ2aWNlLFxuICAgIENhY2hlU2VydmljZSxcbiAgICBQcm9tcHRTZXJ2aWNlXG59IGZyb20gJy4uL2ludGVyZmFjZXMvdHlwZXMnO1xuXG5pbXBvcnQgeyBBSVNlcnZpY2UgfSBmcm9tICcuL2FpL2FpLXNlcnZpY2UnO1xuaW1wb3J0IHsgR2VtaW5pUHJvdmlkZXIgfSBmcm9tICcuL2FpL2dlbWluaSc7XG5pbXBvcnQgeyBHcm9xUHJvdmlkZXIgfSBmcm9tICcuL2FpL2dyb3EnO1xuaW1wb3J0IHsgWW91VHViZVZpZGVvU2VydmljZSB9IGZyb20gJy4veW91dHViZS92aWRlby1kYXRhJztcbmltcG9ydCB7IE9ic2lkaWFuRmlsZVNlcnZpY2UgfSBmcm9tICcuL2ZpbGUvb2JzaWRpYW4tZmlsZSc7XG5pbXBvcnQgeyBBSVByb21wdFNlcnZpY2UgfSBmcm9tICcuL3Byb21wdC1zZXJ2aWNlJztcbmltcG9ydCB7IE1lbW9yeUNhY2hlU2VydmljZSB9IGZyb20gJy4vY2FjaGUvbWVtb3J5LWNhY2hlJztcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VDb250YWluZXIgaW1wbGVtZW50cyBJU2VydmljZUNvbnRhaW5lciB7XG4gICAgcHJpdmF0ZSBfYWlTZXJ2aWNlPzogSUFJU2VydmljZTtcbiAgICBwcml2YXRlIF92aWRlb1NlcnZpY2U/OiBWaWRlb0RhdGFTZXJ2aWNlO1xuICAgIHByaXZhdGUgX2ZpbGVTZXJ2aWNlPzogRmlsZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBfY2FjaGVTZXJ2aWNlPzogQ2FjaGVTZXJ2aWNlO1xuICAgIHByaXZhdGUgX3Byb21wdFNlcnZpY2U/OiBQcm9tcHRTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgc2V0dGluZ3M6IFlvdVR1YmVQbHVnaW5TZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBhcHA6IEFwcFxuICAgICkge31cblxuICAgIGdldCBhaVNlcnZpY2UoKTogSUFJU2VydmljZSB7XG4gICAgICAgIGlmICghdGhpcy5fYWlTZXJ2aWNlKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlcnM6IGFueVtdID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCBHZW1pbmkgcHJvdmlkZXIgaWYgQVBJIGtleSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdlbWluaUFwaUtleSkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVycy5wdXNoKG5ldyBHZW1pbmlQcm92aWRlcih0aGlzLnNldHRpbmdzLmdlbWluaUFwaUtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgR3JvcSBwcm92aWRlciBpZiBBUEkga2V5IGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZ3JvcUFwaUtleSkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVycy5wdXNoKG5ldyBHcm9xUHJvdmlkZXIodGhpcy5zZXR0aW5ncy5ncm9xQXBpS2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2FpU2VydmljZSA9IG5ldyBBSVNlcnZpY2UocHJvdmlkZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWlTZXJ2aWNlO1xuICAgIH1cblxuICAgIGdldCB2aWRlb1NlcnZpY2UoKTogVmlkZW9EYXRhU2VydmljZSB7XG4gICAgICAgIGlmICghdGhpcy5fdmlkZW9TZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLl92aWRlb1NlcnZpY2UgPSBuZXcgWW91VHViZVZpZGVvU2VydmljZSh0aGlzLmNhY2hlU2VydmljZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvU2VydmljZTtcbiAgICB9XG5cbiAgICBnZXQgZmlsZVNlcnZpY2UoKTogRmlsZVNlcnZpY2Uge1xuICAgICAgICBpZiAoIXRoaXMuX2ZpbGVTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9maWxlU2VydmljZSA9IG5ldyBPYnNpZGlhbkZpbGVTZXJ2aWNlKHRoaXMuYXBwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZVNlcnZpY2U7XG4gICAgfVxuXG4gICAgZ2V0IGNhY2hlU2VydmljZSgpOiBDYWNoZVNlcnZpY2Uge1xuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlU2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVTZXJ2aWNlID0gbmV3IE1lbW9yeUNhY2hlU2VydmljZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVNlcnZpY2UhO1xuICAgIH1cblxuICAgIGdldCBwcm9tcHRTZXJ2aWNlKCk6IFByb21wdFNlcnZpY2Uge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb21wdFNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21wdFNlcnZpY2UgPSBuZXcgQUlQcm9tcHRTZXJ2aWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21wdFNlcnZpY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHNldHRpbmdzIGFuZCByZWZyZXNoIHNlcnZpY2VzIHRoYXQgZGVwZW5kIG9uIHRoZW1cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5nczogWW91VHViZVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBuZXdTZXR0aW5ncztcbiAgICAgICAgLy8gUmVzZXQgQUkgc2VydmljZSB0byBwaWNrIHVwIG5ldyBBUEkga2V5c1xuICAgICAgICB0aGlzLl9haVNlcnZpY2UgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIGNhY2hlZCBzZXJ2aWNlc1xuICAgICAqL1xuICAgIGNsZWFyU2VydmljZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2FpU2VydmljZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdmlkZW9TZXJ2aWNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maWxlU2VydmljZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY2FjaGVTZXJ2aWNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9wcm9tcHRTZXJ2aWNlID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FBLElBQUFBLG1CQUFxRDs7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LEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBRUEsTUFBYyxlQUE4QjtBQUN4QyxVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNyQztBQUFBLEVBRUEsc0JBQW9EO0FBQ2hELFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFFUSxRQUFRLFNBQXVCO0FBQ25DLHVCQUFtQixJQUFJLFVBQVUsU0FBUztBQUFBLEVBQzlDO0FBQUEsRUFFUSxXQUFXLFNBQXVCO0FBQ3RDLHVCQUFtQixJQUFJLFVBQVUsV0FBVyxNQUFNO0FBQUEsRUFDdEQ7QUFBQSxFQUVRLFNBQVMsU0FBaUIsT0FBb0I7QUFDbEQsdUJBQW1CLElBQUksV0FBVyxZQUFZLE1BQU0sV0FBVyxPQUFPO0FBQUEsRUFDMUU7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
